layui.define("layer",function(e){"use strict";var x=layui.$,d=layui.layer,a=layui.hint(),f=layui.device(),b="form",h=".layui-form",C="layui-this",w="layui-hide",T="layui-disabled",t=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};t.prototype.set=function(e){return x.extend(!0,this.config,e),this},t.prototype.verify=function(e){return x.extend(!0,this.config.verify,e),this},t.prototype.on=function(e,t){return layui.onevent.call(this,b,e,t)},t.prototype.val=function(e,i){return x(h+'[lay-filter="'+e+'"]').each(function(e,t){var a=x(this);layui.each(i,function(e,t){var i=a.find('[name="'+e+'"]');i[0]&&("checkbox"===(e=i[0].type)?i[0].checked=t:"radio"===e?i.each(function(){this.value==t&&(this.checked=!0)}):i.val(t))})}),n.render(null,e),this.getValue(e)},t.prototype.getValue=function(e,t){t=t||x(h+'[lay-filter="'+e+'"]').eq(0);var a={},n={},t=t.find("input,select,textarea");return layui.each(t,function(e,t){var i;t.name=(t.name||"").replace(/^\s*|\s*&/,""),t.name&&(/^.*\[\]$/.test(t.name)&&(i=t.name.match(/^(.*)\[\]$/g)[0],a[i]=0|a[i],t.name=t.name.replace(/^(.*)\[\]$/,"$1["+a[i]+++"]")),/^checkbox|radio$/.test(t.type)&&!t.checked||(n[t.name]=t.value))}),n},t.prototype.render=function(e,t){var i=x(h+(t?'[lay-filter="'+t+'"]':"")),t={select:function(){function y(e,t){x(e.target).parent().hasClass(m)&&!t||(x("."+p).removeClass(p+"ed "+p+"up"),v&&g&&v.val(g)),v=null}function c(a,e,t){var s,i,n,o,l,r=x(this),c=a.find("."+m),u=c.find("input"),d=a.find("dl"),f=d.children("dd"),h=this.selectedIndex;e||(i=function(){var e=a.offset().top+a.outerHeight()+5-$.scrollTop(),t=d.outerHeight();h=r[0].selectedIndex,a.addClass(p+"ed"),f.removeClass(w),s=null,f.eq(h).addClass(C).siblings().removeClass(C),e+t>$.height()&&t<=e&&a.addClass(p+"up"),o()},n=function(e){a.removeClass(p+"ed "+p+"up"),u.blur(),s=null,e||l(u.val(),function(e){var t=r[0].selectedIndex;e&&(g=x(r[0].options[t]).html(),0===t&&g===u.attr("placeholder")&&(g=""),u.val(g||""))})},o=function(){var e,t,i=d.children("dd."+C);i[0]&&(e=i.position().top,t=d.height(),i=i.height(),t<e&&d.scrollTop(e+d.scrollTop()-t+i-5),e<0&&d.scrollTop(e+d.scrollTop()-5))},c.on("click",function(e){a.hasClass(p+"ed")?n():(y(e,!0),i()),d.find("."+k).remove()}),c.find(".layui-edge").on("click",function(){u.focus()}),u.on("keyup",function(e){9===e.keyCode&&i()}).on("keydown",function(l){var e=l.keyCode;9===e&&n();var r=function(a,n){l.preventDefault();var e=function(){var e=d.children("dd."+C);if(d.children("dd."+w)[0]&&"next"===a){var t=d.children("dd:not(."+w+",."+T+")"),i=t.eq(0).index();if(0<=i&&i<e.index()&&!t.hasClass(C))return t.eq(0).prev()[0]?t.eq(0).prev():d.children(":last")}return n&&n[0]?n:s&&s[0]?s:e}(),t=e[a](),i=e[a]("dd:not(."+w+")");return t[0]?(s=e[a](),i[0]&&!i.hasClass(T)||!s[0]?(i.addClass(C).siblings().removeClass(C),void o()):r(a,s)):s=null};38===e&&r("prev"),40===e&&r("next"),13===e&&(l.preventDefault(),d.children("dd."+C).trigger("click"))}),l=function(a,e,n){var l=0;layui.each(f,function(){var e=x(this),t=e.text(),i=-1===t.indexOf(a);(""===a||"blur"===n?a!==t:i)&&l++,"keyup"===n&&e[i?"addClass":"removeClass"](w)});var t=l===f.length;return e(t),t},t&&u.on("keyup",function(e){var t=this.value,e=e.keyCode;return 9!==e&&13!==e&&37!==e&&38!==e&&39!==e&&40!==e&&(l(t,function(e){e?d.find("."+k)[0]||d.append('<p class="'+k+'">无匹配项</p>'):d.find("."+k).remove()},"keyup"),""===t&&d.find("."+k).remove(),void o())}).on("blur",function(e){var t=r[0].selectedIndex;v=u,g=x(r[0].options[t]).html(),0===t&&g===u.attr("placeholder")&&(g=""),setTimeout(function(){l(u.val(),function(e){g||u.val("")},"blur")},200)}),f.on("click",function(){var e=x(this),t=e.attr("lay-value"),i=r.attr("lay-filter");return!e.hasClass(T)&&(e.hasClass("layui-select-tips")?u.val(""):(u.val(e.text()),e.addClass(C)),e.siblings().removeClass(C),r.val(t).removeClass("layui-form-danger"),layui.event.call(this,b,"select("+i+")",{elem:r[0],value:t,othis:a}),n(!0),!1)}),a.find("dl>dt").on("click",function(e){return!1}),x(document).off("click",y).on("click",y))}var v,u="请选择",p="layui-form-select",m="layui-select-title",k="layui-select-none",g="",e=i.find("select");e.each(function(e,t){var i=x(this),a=i.next("."+p),n=this.disabled,l=t.value,r=x(t.options[t.selectedIndex]),s=t.options[0];if("string"==typeof i.attr("lay-ignore"))return i.show();var o,t="string"==typeof i.attr("lay-search"),s=s&&!s.value&&s.innerHTML||u,r=x(['<div class="'+(t?"":"layui-unselect ")+p,(n?" layui-select-disabled":"")+'">','<div class="'+m+'">','<input type="text" placeholder="'+s+'" value="'+(l?r.html():"")+'"'+(!n&&t?"":" readonly")+' class="layui-input'+(t?"":" layui-unselect")+(n?" "+T:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(i.find("optgroup")[0]?" layui-select-group":"")+'">',(r=i.find("*"),o=[],layui.each(r,function(e,t){0!==e||t.value?"optgroup"===t.tagName.toLowerCase()?o.push("<dt>"+t.label+"</dt>"):o.push('<dd lay-value="'+t.value+'" class="'+(l===t.value?C:"")+(t.disabled?" "+T:"")+'">'+t.innerHTML+"</dd>"):o.push('<dd lay-value="" class="layui-select-tips">'+(t.innerHTML||u)+"</dd>")}),0===o.length&&o.push('<dd lay-value="" class="'+T+'">没有选项</dd>'),o.join("")+"</dl>"),"</div>"].join(""));a[0]&&a.remove(),i.after(r),c.call(this,r,n,t)})},checkbox:function(){var o={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=i.find("input[type=checkbox]");e.each(function(e,t){var i=x(this),a=i.attr("lay-skin"),n=(i.attr("lay-text")||"").split("|"),l=this.disabled,r=o[a="switch"===a?"_"+a:a]||o.checkbox;if("string"==typeof i.attr("lay-ignore"))return i.show();var s=i.next("."+r[0]),n=x(['<div class="layui-unselect '+r[0],t.checked?" "+r[1]:"",l?" layui-checkbox-disbaled "+T:"",'"',a?' lay-skin="'+a+'"':"",">",(n={checkbox:[t.title.replace(/\s/g,"")?"<span>"+t.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((t.checked?n[0]:n[1])||"")+"</em><i></i>"})[a]||n.checkbox,"</div>"].join(""));s[0]&&s.remove(),i.after(n),function(i,a){var n=x(this);i.on("click",function(){var e=n.attr("lay-filter"),t=(n.attr("lay-text")||"").split("|");n[0].disabled||(n[0].checked?(n[0].checked=!1,i.removeClass(a[1]).find("em").text(t[1])):(n[0].checked=!0,i.addClass(a[1]).find("em").text(t[0])),layui.event.call(n[0],b,a[2]+"("+e+")",{elem:n[0],value:n[0].value,othis:i}))})}.call(this,n,r)})},radio:function(){var r="layui-form-radio",s=["&#xe643;","&#xe63f;"],e=i.find("input[type=radio]");e.each(function(e,t){var i=x(this),a=i.next("."+r),n=this.disabled;if("string"==typeof i.attr("lay-ignore"))return i.show();a[0]&&a.remove();t=x(['<div class="layui-unselect '+r,t.checked?" "+r+"ed":"",(n?" layui-radio-disbaled "+T:"")+'">','<i class="layui-anim layui-icon">'+s[t.checked?0:1]+"</i>","<div>"+(t=t.title||"","string"==typeof i.next().attr("lay-radio")&&(t=i.next().html(),i.next().remove()),t)+"</div>","</div>"].join(""));i.after(t),function(a){var n=x(this),l="layui-anim-scaleSpring";a.on("click",function(){var e=n[0].name,t=n.parents(h),i=n.attr("lay-filter"),e=t.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");n[0].disabled||(layui.each(e,function(){var e=x(this).next("."+r);this.checked=!1,e.removeClass(r+"ed"),e.find(".layui-icon").removeClass(l).html(s[1])}),n[0].checked=!0,a.addClass(r+"ed"),a.find(".layui-icon").addClass(l).html(s[0]),layui.event.call(n[0],b,"radio("+i+")",{elem:n[0],value:n[0].value,othis:a}))})}.call(this,t)})}};return e?t[e]?t[e]():a.error("不支持的"+e+"表单渲染"):layui.each(t,function(e,t){t()}),this};function i(){var o=null,c=n.config.verify,u="layui-form-danger",e=(a=x(this)).parents(h),t=e.find("*[lay-verify]"),i=a.parents("form")[0],a=a.attr("lay-filter");return layui.each(t,function(e,n){var l=x(this),t=l.attr("lay-verify").split("|"),r=l.attr("lay-verType"),s=l.val();if(l.removeClass(u),layui.each(t,function(e,t){var i="",a="function"==typeof c[t];if(c[t]){a=a?i=c[t](s,n):!c[t][0].test(s),i=i||c[t][1];if("required"===t&&(i=l.attr("lay-reqText")||i),a)return"tips"===r?d.tips(i,"string"==typeof l.attr("lay-ignore")||"select"!==n.tagName.toLowerCase()&&!/^checkbox|radio$/.test(n.type)?l:l.next(),{tips:1}):"alert"===r?d.alert(i,{title:"提示",shadeClose:!0}):/\bstring|number\b/.test(typeof i)&&d.msg(i,{icon:5,shift:6}),f.android||f.ios||setTimeout(function(){n.focus()},7),l.addClass(u),o=!0}}),o)return o}),!o&&(e=n.getValue(null,e),layui.event.call(this,b,"submit("+a+")",{elem:this,form:i,field:e}))}var n=new t,t=x(document),$=x(window);n.render(),t.on("reset",h,function(){var e=x(this).attr("lay-filter");setTimeout(function(){n.render(null,e)},50)}),t.on("submit",h,i).on("click","*[lay-submit]",i),e(b,n)});
!function(n){var i={};function l(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,l),t.l=!0,t)).exports}l.m=n,l.c=i,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/asset//",l(l.s=349)}({349:function(e,t,n){n=n(350);"api"in window||(window.api={}),window.api.multiSelector=n,"MS"in window||(window.MS={}),window.MS.multiSelector=n},350:function(n,i,l){!function(e,d){var t;!function(){function e(e){if(void 0!==d){function r(e,t,n){n=n||null;var i={},l=c.opt.sortKey;i[c.opt.parentValueKey]=e,i[c.opt.titleKey]=n,d.ajax({type:c.opt.serverMethod,url:c.opt.server,dataType:c.opt.serverDataType,timeout:3e4,data:i,success:function(e){c.opt.serverResponseHandle(e).sort(function(e,t){return e[l]-t[l]});e=a(e.data);t(e)},error:function(){alert("请求出现错误 T_T")}})}function o(n,e){for(var t=[],i=c.data,l=0;l<i.length;l++)i[l].parentValue==e&&t.push({value:i[l].value,title:i[l].title});if(f.find("select").each(function(e,t){parseInt(d(t).attr("data-level"))>=n&&d(t).remove()}),t.length){var a=[];for(a.push('<select data-level="'+n+'" class="select">'),a.push('<option value="">'+c.opt.lang.pleaseSelect+"</option>"),l=0;l<t.length;l++)a.push('<option value="'+t[l].value+'">'+t[l].title+"</option>");a.push("</select>"),f.append(a.join("")),p.trigger("widget.category.rendered",[c])}}function s(n){f.find("select").each(function(e,t){parseInt(d(t).attr("data-level"))>=n&&d(t).remove()})}function u(){p.find(c.opt.selectorValue).val(""),p.find(c.opt.selectorTitle).val("");var i=[],l=[];f.find("select").each(function(e,t){var n=d(t).val();n&&(i.push(n),l.push(d(t).find("option:selected").text()))}),p.find(c.opt.selectorValue).each(function(e,t){var n=d(t).attr("data-level");n?(n=parseInt(n))<=i.length&&d(t).val(i[n-1]):d(t).val(i.join(c.seperator))}),p.find(c.opt.selectorTitle).each(function(e,t){var n=d(t).attr("data-level");n?(n=parseInt(n))<=l.length&&d(t).val(l[n-1]):d(t).val(l.join(c.seperator))}),c.value=i,c.title=l,p.trigger("widget.category.change",[c]),c.opt.onChange(i,l)}this.opt=d.extend({container:null,seperator:",",dynamic:!1,server:"/path/to/data",data:[],maxLevel:0,fixedLevel:0,lang:{loading:"正在加载...",pleaseSelect:"请选择"},onChange:function(e,t){},selectorValue:"[data-value]",selectorTitle:"[data-title]",selectorSelect:"[data-select]",valueKey:"id",parentValueKey:"pid",titleKey:"title",sortKey:"sort",rootParentValue:0,serverMethod:"get",serverDataType:"json",serverResponseHandle:function(e){return"object"!=typeof e?(alert("ErrorResponse:"+e),[]):"code"in e&&"data"in e?0!=e.code?(alert("ErrorResponseCode:"+e.code),[]):e.data:(alert("ErrorResponseObject:"+e.toString()),[])}},e);var c=this,p=d(this.opt.container),f=p.find(this.opt.selectorSelect),a=(this.value=null,this.title=null,this.server=null,this.seperator=",",this.maxLevel=0,this.data=[],this.initValues=[],this.initTitles=[],function(e){for(var t=[],n=0;n<e.length;n++)t.push({parentValue:e[n][c.opt.parentValueKey],value:e[n][c.opt.valueKey],title:e[n][c.opt.titleKey]});return t}),e=(this.val=function(e){if(null==e)return c.value;if(c.initValues=e,c.initValues.length)if(c.opt.dynamic)r(c.initValues.join(","),function(e){c.data=e,f.html(""),o(1,0);for(var t=0;t<c.initValues.length-1;t++){var n=t+2,i=c.initValues[t];(0==c.maxLevel||n<=c.maxLevel)&&o(n,i)}f.find("select").each(function(e,t){var n=d(t).attr("data-level");n&&(n=parseInt(n))<=c.initValues.length&&d(t).val(c.initValues[n-1])}),c.initValues=[],u()});else{o(1,c.opt.rootParentValue);for(var t=0;t<c.initValues.length;t++){var n=t+1,i=c.initValues[t],l=f.find("select");l.length>=n&&d(l.get(n-1)).val(i).trigger("change")}c.initValues=[]}else s(1)},this.titleVal=function(e){if(null==e)return c.title;if(c.initTitles=e,c.initTitles.length)if(c.opt.dynamic)r(null,function(e){c.data=e,f.html(""),o(1,0);for(var t=0;t<c.initTitles.length-1;t++){var n=t+2,i=c.initTitles[t],l=f.find("select[data-level="+(n-1)+"]"),a=null;l.find("option").each(function(e,t){d(t).text()==i&&(a=d(t).attr("value"))}),null!==a&&(0==c.maxLevel||n<=c.maxLevel)&&o(n,a)}f.find("select").each(function(e,t){var n,i=d(t).attr("data-level");i&&(i=parseInt(i))<=c.initTitles.length&&(n=c.initTitles[i-1],d(t).find("option").each(function(e,t){d(t).text()==n&&d(t).prop("selected",!0)}))}),u()},c.initTitles.join(","));else{o(1,c.opt.rootParentValue);for(var t=0;t<c.initTitles.length;t++){var n,i=t+1,l=c.initTitles[t],a=f.find("select");a.length>=i&&(n=d(a.get(i-1))).find("option").each(function(e,t){d(t).text()==l&&n.val(d(t).attr("value")).trigger("change")})}}else s(1)},f.on("change","select",function(){var l=parseInt(d(this).attr("data-level")),a=d(this).val();return c.opt.dynamic?(0==c.maxLevel||l<c.maxLevel)&&(0<a?r(a,function(e){if(c.data=e,o(l+1,a),c.initValues&&c.initValues.length){if(!(t=f.find("select")).length)return;(n=d(t.get(t.length-1))).val(c.initValues.splice(0,1)[0]).trigger("change")}else if(c.initTitles&&c.initTitles.length){var t;if(!(t=f.find("select")).length)return;var n=d(t.get(t.length-1)),i=c.initTitles.splice(0,1)[0];n.find("option").each(function(e,t){d(t).text()==i&&n.val(d(t).attr("value")).trigger("change")})}u()}):(s(l+1),u())):(0==c.maxLevel||l<c.maxLevel)&&(0<a?o(l+1,a):s(l+1),u()),!1}),p.find(c.opt.selectorValue).val()),t=p.find(c.opt.selectorTitle).val();if(e)for(var n=e.split(c.seperator),i=0;i<n.length;i++)n[i]&&c.initValues.push(n[i]);else if(t)for(var l=t.split(c.seperator),i=0;i<l.length;i++)l[i]&&c.initTitles.push(l[i]);f.html(c.opt.lang.loading),c.opt.dynamic&&c.initValues.length?c.val(c.initValues):c.opt.dynamic&&c.initTitles.length?c.titleVal(c.initTitles):c.opt.dynamic?r(c.opt.rootParentValue,function(e){c.data=e,f.html(""),o(1,c.opt.rootParentValue),c.initValues.length?c.val(c.initValues):c.initTitles.length&&c.titleVal(c.initTitles)}):(c.data=a(c.opt.data),f.html(""),c.initValues.length?c.val(c.initValues):c.initTitles.length?c.titleVal(c.initTitles):o(1,c.opt.rootParentValue))}else alert("MultiSelector require jQuery")}l(351).cmd?n.exports=e:void 0!==(t=function(){return e}.call(i,l,i,n))&&(n.exports=t)}.call(function(){return this||("undefined"!=typeof window?window:e)}())}.call(this,l(7),l(8))},351:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},7:function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},8:function(e,t){e.exports=window.$}});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es.array.find.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.number.is-nan.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.match.js"),require("core-js/modules/es.regexp.constructor.js"),require("core-js/modules/es.regexp.sticky.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.string.trim.js"),require("core-js/modules/es.regexp.test.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/es.number.to-fixed.js"),require("core-js/modules/es.string.repeat.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.typed-array.uint8-array.js"),require("core-js/modules/esnext.typed-array.at.js"),require("core-js/modules/es.typed-array.copy-within.js"),require("core-js/modules/es.typed-array.every.js"),require("core-js/modules/es.typed-array.fill.js"),require("core-js/modules/es.typed-array.filter.js"),require("core-js/modules/es.typed-array.find.js"),require("core-js/modules/es.typed-array.find-index.js"),require("core-js/modules/esnext.typed-array.find-last.js"),require("core-js/modules/esnext.typed-array.find-last-index.js"),require("core-js/modules/es.typed-array.for-each.js"),require("core-js/modules/es.typed-array.includes.js"),require("core-js/modules/es.typed-array.index-of.js"),require("core-js/modules/es.typed-array.iterator.js"),require("core-js/modules/es.typed-array.join.js"),require("core-js/modules/es.typed-array.last-index-of.js"),require("core-js/modules/es.typed-array.map.js"),require("core-js/modules/es.typed-array.reduce.js"),require("core-js/modules/es.typed-array.reduce-right.js"),require("core-js/modules/es.typed-array.reverse.js"),require("core-js/modules/es.typed-array.set.js"),require("core-js/modules/es.typed-array.slice.js"),require("core-js/modules/es.typed-array.some.js"),require("core-js/modules/es.typed-array.sort.js"),require("core-js/modules/es.typed-array.subarray.js"),require("core-js/modules/es.typed-array.to-locale-string.js"),require("core-js/modules/es.typed-array.to-string.js"),require("core-js/modules/web.url.js"),require("core-js/modules/web.url-search-params.js"),require("core-js/modules/es.json.stringify.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es.array.find.js","core-js/modules/es.object.to-string.js","core-js/modules/es.array.concat.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.object.keys.js","core-js/modules/es.array.slice.js","core-js/modules/es.array.join.js","core-js/modules/es.array.splice.js","core-js/modules/es.promise.js","core-js/modules/es.function.name.js","core-js/modules/es.number.is-nan.js","core-js/modules/es.number.constructor.js","core-js/modules/es.array.map.js","core-js/modules/es.array.iterator.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.array.filter.js","core-js/modules/es.object.assign.js","core-js/modules/es.symbol.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.match.js","core-js/modules/es.regexp.constructor.js","core-js/modules/es.regexp.sticky.js","core-js/modules/es.regexp.to-string.js","core-js/modules/es.string.split.js","core-js/modules/es.string.replace.js","core-js/modules/es.string.trim.js","core-js/modules/es.regexp.test.js","core-js/modules/es.array.sort.js","core-js/modules/es.string.iterator.js","core-js/modules/es.number.to-fixed.js","core-js/modules/es.string.repeat.js","core-js/modules/es.array.find-index.js","core-js/modules/es.typed-array.uint8-array.js","core-js/modules/esnext.typed-array.at.js","core-js/modules/es.typed-array.copy-within.js","core-js/modules/es.typed-array.every.js","core-js/modules/es.typed-array.fill.js","core-js/modules/es.typed-array.filter.js","core-js/modules/es.typed-array.find.js","core-js/modules/es.typed-array.find-index.js","core-js/modules/esnext.typed-array.find-last.js","core-js/modules/esnext.typed-array.find-last-index.js","core-js/modules/es.typed-array.for-each.js","core-js/modules/es.typed-array.includes.js","core-js/modules/es.typed-array.index-of.js","core-js/modules/es.typed-array.iterator.js","core-js/modules/es.typed-array.join.js","core-js/modules/es.typed-array.last-index-of.js","core-js/modules/es.typed-array.map.js","core-js/modules/es.typed-array.reduce.js","core-js/modules/es.typed-array.reduce-right.js","core-js/modules/es.typed-array.reverse.js","core-js/modules/es.typed-array.set.js","core-js/modules/es.typed-array.slice.js","core-js/modules/es.typed-array.some.js","core-js/modules/es.typed-array.sort.js","core-js/modules/es.typed-array.subarray.js","core-js/modules/es.typed-array.to-locale-string.js","core-js/modules/es.typed-array.to-string.js","core-js/modules/web.url.js","core-js/modules/web.url-search-params.js","core-js/modules/es.json.stringify.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Player=t()}(this,function(){"use strict";function n(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){c(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function g(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=l(i);return p(this,n?(e=l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function y(){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){t=Object.getOwnPropertyDescriptor(n,t);return t.get?t.get.call(arguments.length<3?e:i):t.value}}).apply(this,arguments)}function v(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return r(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);e=t.call(e,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}var k,C,e={exports:{}};function b(){}function _(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function w(e,t,i,n,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");o=new _(i,n||e,o),t=C?C+t:t;return e._events[t]?e._events[t].fn?e._events[t]=[e._events[t],o]:e._events[t].push(o):(e._events[t]=o,e._eventsCount++),e}function T(e,t){0==--e._eventsCount?e._events=new b:delete e._events[t]}function t(){this._events=new b,this._eventsCount=0}S=e,k=Object.prototype.hasOwnProperty,C="~",Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(C=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)k.call(e,t)&&i.push(C?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var e=C?C+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,o=new Array(n);i<n;i++)o[i]=t[i].fn;return o},t.prototype.listenerCount=function(e){e=C?C+e:e,e=this._events[e];return e?e.fn?1:e.length:0},t.prototype.emit=function(e,t,i,n,o,r){var s=C?C+e:e;if(!this._events[s])return!1;var a,l=this._events[s],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,o),!0;case 6:return l.fn.call(l.context,t,i,n,o,r),!0}for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];l.fn.apply(l.context,a)}else for(var u,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,i);break;case 4:l[d].fn.call(l[d].context,t,i,n);break;default:if(!a)for(u=1,a=new Array(c-1);u<c;u++)a[u-1]=arguments[u];l[d].fn.apply(l[d].context,a)}return!0},t.prototype.on=function(e,t,i){return w(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return w(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){e=C?C+e:e;if(!this._events[e])return this;if(!t)return T(this,e),this;var o=this._events[e];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||T(this,e);else{for(var r=0,s=[],a=o.length;r<a;r++)(o[r].fn!==t||n&&!o[r].once||i&&o[r].context!==i)&&s.push(o[r]);s.length?this._events[e]=1===s.length?s[0]:s:T(this,e)}return this},t.prototype.removeAllListeners=function(e){return e?(e=C?C+e:e,this._events[e]&&T(this,e)):(this._events=new b,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=C,S.exports=t.EventEmitter=t;var x=e.exports,S="undefined"!=typeof window&&window.location&&-1<window.location.href.indexOf("xgplayerdebugger=1"),E={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},P="%c[xgplayer]",L={config:{debug:S?3:0},logInfo:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];3<=this.config.debug&&(t=console).log.apply(t,[P,E.info,e].concat(n))},logWarn:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];1<=this.config.debug&&(t=console).warn.apply(t,[P,E.warn,e].concat(n))},logError:function(e){var t;if(!(this.config.debug<1)){for(var i=2<=this.config.debug?"trace":"error",n=arguments.length,o=new Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(t=console)[i].apply(t,[P,E.error,e].concat(o))}}},I=(a(O,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),O),A={};function O(e){m(this,O),this.bufferedList=e}function D(e){var t=f(e);return null!==e&&("object"===t||"function"===t)}function R(n,r,e){var s,a,i,l,c,u,h=0,d=!1,f=!1,t=!0,o=!r&&0!==r&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof n)throw new TypeError("Expected a function");function p(e){var t=s,i=a;return s=a=void 0,h=e,l=n.apply(i,t)}function g(e,t){return o?(window.cancelAnimationFrame(c),window.requestAnimationFrame(e)):setTimeout(e,t)}function y(e){var t=e-u;return void 0===u||r<=t||t<0||f&&i<=e-h}function m(){var e,t=Date.now();if(y(t))return v(t);c=g(m,(e=t-h,t=r-(t-u),f?Math.min(t,i-e):t))}function v(e){return c=void 0,t&&s?p(e):(s=a=void 0,l)}function k(){for(var e=Date.now(),t=y(e),i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(s=n,a=this,u=e,t){if(void 0===c)return h=t=u,c=g(m,r),d?p(t):l;if(f)return c=g(m,r),p(u)}return void 0===c&&(c=g(m,r)),l}return r=+r||0,D(e)&&(d=!!e.leading,i=(f="maxWait"in e)?Math.max(+e.maxWait||0,r):i,t="trailing"in e?!!e.trailing:t),k.cancel=function(){var e;void 0!==c&&(e=c,o?window.cancelAnimationFrame(e):clearTimeout(e)),s=u=a=c=void(h=0)},k.flush=function(){return void 0===c?l:v(Date.now())},k.pending=function(){return void 0!==c},k}A.createDom=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(i);return o.className=t,o.innerHTML=e,Object.keys(n).forEach(function(e){var t=e,e=n[e];("video"!==i&&"audio"!==i&&"live-video"!==i||e)&&o.setAttribute(t,e)}),o},A.createDomFromHtml=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";try{(o=document.createElement("div")).innerHTML=e;var n=o.children,o=null;return 0<n.length?(n=n[0],i&&A.addClass(n,i),t&&Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n):null}catch(e){return L.logError("util.createDomFromHtml",e),null}},A.hasClass=function(t,i){if(!t||!i)return!1;try{return Array.prototype.some.call(t.classList,function(e){return e===i})}catch(e){t=t.className&&"object"===f(t.className)?t.getAttribute("class"):t.className;return t&&!!t.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))}},A.addClass=function(t,i){if(t&&i)try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)})}catch(e){A.hasClass(t,i)||(t.className&&"object"===f(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+i):t.className+=" "+i)}},A.removeClass=function(t,i){if(t&&i)try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.remove(e)})}catch(e){A.hasClass(t,i)&&i.split(/\s+/g).forEach(function(e){e=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===f(t.className)?t.setAttribute("class",t.getAttribute("class").replace(e," ")):t.className=t.className.replace(e," ")})}},A.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach(function(e){A.hasClass(t,e)?A.removeClass(t,e):A.addClass(t,e)})},A.classNames=function(){for(var i=arguments,n=[],e=0;e<arguments.length;e++)!function(t){"String"===A.typeOf(i[t])?n.push(i[t]):"Object"===A.typeOf(i[t])&&Object.keys(i[t]).map(function(e){i[t][e]&&n.push(e)})}(e);return n.join(" ")},A.findDom=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=1<arguments.length?arguments[1]:void 0;try{t=i.querySelector(n)}catch(e){L.logError("util.findDom",e),0===n.indexOf("#")&&(t=i.getElementById(n.slice(1)))}return t},A.getCss=function(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,!1))[t]},A.padStart=function(e,t,i){for(var n=String(i),t=t>>0,o=Math.ceil(t/n.length),r=[],e=String(e);o--;)r.push(n);return r.join("").substring(0,t-e.length)+e},A.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=A.padStart(Math.floor(e/3600),2,0),i=A.padStart(Math.floor((e-3600*t)/60),2,0),e=A.padStart(Math.floor(e-3600*t-60*i),2,0);return("00"===t?[i,e]:[t,i,e]).join(":")},A.event=function(e){var t;e.touches&&(t=e.touches[0]||e.changedTouches[0],e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop),e._target=e.target||e.srcElement},A.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},A.deepCopy=function(t,i){if("Object"===A.typeOf(i)&&"Object"===A.typeOf(t))return Object.keys(i).forEach(function(e){"Object"!==A.typeOf(i[e])||i[e]instanceof Node?"Array"===A.typeOf(i[e])?t[e]="Array"===A.typeOf(t[e])?t[e].concat(i[e]):i[e]:t[e]=i[e]:void 0===t[e]||void 0===t[e]?t[e]=i[e]:A.deepCopy(t[e],i[e])}),t},A.deepMerge=function(i,n){return Object.keys(n).map(function(e){var t;"Array"===A.typeOf(n[e])&&"Array"===A.typeOf(i[e])?"Array"===A.typeOf(i[e])&&(t=i[e]).push.apply(t,v(n[e])):A.typeOf(i[e])!==A.typeOf(n[e])||null===i[e]||"Object"!==A.typeOf(i[e])||n[e]instanceof window.Node?null!==n[e]&&(i[e]=n[e]):A.deepMerge(i[e],n[e])}),i},A.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";e=document.createElement("a");return e.href=t.replace(/url\("|"\)/g,""),e.href},A.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},A.setInterval=function(e,t,i,n){e._interval[t]||(e._interval[t]=window.setInterval(i.bind(e),n))},A.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},A.setTimeout=function(e,t,i){e._timers||(e._timers=[]);var n=setTimeout(function(){t(),A.clearTimeout(e,n)},i);return e._timers.push(n),n},A.clearTimeout=function(e,t){var i=e._timers;if("Array"===A.typeOf(i)){for(var n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1),clearTimeout(t);break}}else clearTimeout(t)},A.clearAllTimers=function(e){var t=e._timers;"Array"===A.typeOf(t)&&(t.map(function(e){clearTimeout(e)}),e._timerIds=[])},A.createImgBtn=function(e,t,i,n){var o,r,s,a=A.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),i&&n&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(-1<i.indexOf(e)&&-1<n.indexOf(e)&&(o=parseFloat(i.slice(0,i.indexOf(e)).trim()),r=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=e,1))}),a.style.width="".concat(o).concat(s),a.style.height="".concat(r).concat(s),a.style.backgroundSize="".concat(o).concat(s," ").concat(r).concat(s),a.style.margin="start"===e?"-".concat(r/2).concat(s," auto auto -").concat(o/2).concat(s):"auto 5px auto 5px"),a},A.Hex2RGBA=function(e,t){var i,n=[];return/^\#[0-9A-F]{3}$/i.test(e)&&(i="#",e.replace(/[0-9A-F]/gi,function(e){i+=e+e}),e=i),/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},A.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},A.checkIsFunction=function(e){return e&&"function"==typeof e},A.checkIsObject=function(e){return null!==e&&"object"===f(e)},A.hide=function(e){e.style.display="none"},A.show=function(e,t){e.style.display=t||"block"},A.isUndefined=function(e){if(null==e)return!0},A.isNotNull=function(e){return!(null==e)},A.setStyleFromCsstext=function(t,i){i&&("String"===A.typeOf(i)?i.replace(/\s+/g,"").split(";").map(function(e){!e||1<(e=e.split(":")).length&&(t.style[e[0]]=e[1])}):Object.keys(i).map(function(e){t.style[e]=i[e]}))},A.filterStyleFromText=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],e=t.style.cssText;if(!e)return{};var e=e.replace(/\s+/g,"").split(";"),n={},o={};return e.map(function(e){!e||1<(e=e.split(":")).length&&(function(e,t){for(var i=0,n=t.length;i<n;i++)if(-1<e.indexOf(t[i]))return 1}(e[0],i)?n[e[0]]=e[1]:o[e[0]]=e[1])}),t.setAttribute("style",""),Object.keys(o).map(function(e){t.style[e]=o[e]}),n},A.getStyleFromCsstext=function(e){e=e.style.cssText;if(!e)return{};var e=e.replace(/\s+/g,"").split(";"),t={};return e.map(function(e){!e||1<(e=e.split(":")).length&&(t[e[0]]=e[1])}),t},A.preloadImg=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};e&&((t=new window.Image).onload=function(e){t=null,i&&i(e)},t.onerror=function(e){t=null,n&&n(e)},t.src=e)},A.stopPropagation=function(e){e&&e.stopPropagation()},A.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},A.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},A.checkTouchSupport=function(){return"ontouchstart"in window},A.getBuffered2=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,i=[],n=0;n<e.length;n++)i.push({start:e.start(n)<.5?0:e.start(n),end:e.end(n)});i.sort(function(e,t){return e.start-t.start||t.end-e.end});var o=[];if(t)for(var r=0;r<i.length;r++){var s,a=o.length;a?(s=o[a-1].end,i[r].start-s<t?i[r].end>s&&(o[a-1].end=i[r].end):o.push(i[r])):o.push(i[r])}else o=i;return new I(o)},A.getEventPos=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return{x:(e=e.touches&&0<e.touches.length?e.touches[0]:e).x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},A.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},A.getHostFromUrl=function(e){if("String"!==A.typeOf(e))return"";var t=e.split("/"),e="";return e=3<t.length&&t[2]?t[2]:e},A.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},A.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},A.isBlob=function(e){return/^blob/.test(e)},A.generateSessionId=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=(new Date).getTime();try{t=parseInt(t)}catch(e){t=0}return i+=t,window.performance&&"function"==typeof window.performance.now&&(i+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)})},A.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},A.adjustTimeByDuration=function(e,t,i){return t&&e&&(t<e||i&&e<t)?t:e},A.createPositionBar=function(e,t){e=A.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(e),e},A.getTransformStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,scale:1,rotate:0},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")};return Object.keys(n).forEach(function(e){var t=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),e="".concat(e,"(").concat(n[e],")");t.test(i)?(t.lastIndex=-1,i=i.replace(t,e)):i+="".concat(e," ")}),i},A.convertDeg=function(e){return Math.abs(e)<=1?360*e:e%360},A.getIndexByTime=function(e,t){var i=t.length,n=-1;if(i<1)return n;if(e<=t[0].end||i<2)n=0;else if(e>t[i-1].end)n=i-1;else for(var o=1;o<i;o++)if(e>t[o-1].end&&e<=t[o].end){n=o;break}return n},A.getOffsetCurrentTime=function(e,t){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;if((i=0<=n&&n<t.length?n:A.getIndexByTime(e,t))<0)return-1;var o=t.length,r=t[i],s=r.start,n=r.end,t=r.cTime,r=r.offset;return e<s?t:s<=e&&e<=n?e-r:n<e&&o-1<=i?n:-1},A.getCurrentTimeByOffset=function(e,t){var i=-1;if(!t||t.length<0)return e;for(var n=0;n<t.length;n++)if(e<=t[n].duration){i=n;break}if(-1===i)return e;var o=t[i].start;return i-1<0?o+e:o+(e-t[i-1].duration)};var M=/(Android)\s([\d.]+)/,j=/(Version)\/([\d.]+)/,N=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],F={get device(){return F.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var t=navigator.userAgent.toLowerCase(),i={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(i).filter(function(e){return i[e].test(t)}))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r,a=!(s||n||i||r),e=/(?:iPad|PlayBook)/.test(e);return{isTablet:r,isPhone:s,isIpad:e,isIos:s||e,isAndroid:n,isPc:a,isSymbian:i,isWindowsPhone:t,isFireFox:o}},get osVersion(){if("undefined"==typeof navigator)return 0;var e=navigator.userAgent,t="",e=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?j:M)?t.exec(e):[];if(e&&3<=e.length){e=e[2].split(".");return 0<e.length?parseInt(e[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var t={isSupport:!1,mime:""};if("undefined"==typeof document)return t;if(this.supportResult)return this.supportResult;var i=document.createElement("video");return"function"==typeof i.canPlayType&&N.map(function(e){"probably"===i.canPlayType('video/mp4; codecs="'.concat(e,'"'))&&(t.isSupport=!0,t.mime+="||".concat(e))}),this.supportResult=t,i=null,t},isMSESupport:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if("undefined"==typeof MediaSource||!MediaSource)return!1;try{return MediaSource.isTypeSupported(t)}catch(e){return this._logger.error(t,e),!1}},isHevcSupported:function(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var i=e.video||{},e=e.audio||{};try{var n=MediaSource.isTypeSupported(i.contentType),o=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:n&&o,smooth:!1,powerEfficient:!1})}catch(e){return Promise.resolve(t)}}},H="3.0.10",B={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},U={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},V=a(function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};m(this,e);var n=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var o=i.mediaError||t.media.error||{},r=t.duration,s=t.currentTime,a=t.ended,l=t.src,c=t.currentSrc,u=t.media,h=u.readyState,d=u.networkState,u=i.errorCode||o.code,f={playerVersion:H,currentTime:s,duration:r,ended:a,readyState:h,networkState:d,src:l||c,errorType:i.errorType,errorCode:u=U[u]?U[u]:u,message:i.errorMessage||o.message,mediaError:o,originError:i.originError?i.originError.stack:"",host:A.getHostFromUrl(l||c)};return i.ext&&Object.keys(i.ext).map(function(e){f[e]=i.ext[e]}),f}if(1<arguments.length){for(var p={playerVersion:H,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)p[g[y]]=arguments[y];return p.ex=n?(n[t]||{}).msg:"",p}}),G="play",W="playing",z="ended",K="pause",q="error",Y="seeking",X="seeked",Z="timeupdate",J="waiting",$="canplay",Q="durationchange",ee="volumechange",te="loadeddata",ie="ratechange",ne="progress",oe="loadstart",re="emptied",se="focus",ae="ready",le="urlNull",ce="autoplay_started",ue="autoplay_was_prevented",he="complete",de="replay",fe="destroy",pe="urlchange",ge="download_speed_change",ye="fullscreen_change",me="cssFullscreen_change",ve="mini_state_change",ke="definition_change",Ce="after_definition_change",be="video_resize",_e="pip_change",we="screenShot",Te="playnext",xe="shortcut",Se="user_action",Ee="reset",Pe="source_error",Le="source_success",Ie=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],e={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Ae="fps_stuck",S=Object.freeze(Object.defineProperty({__proto__:null,PLAY:G,PLAYING:W,ENDED:z,PAUSE:K,ERROR:q,SEEKING:Y,SEEKED:X,TIME_UPDATE:Z,WAITING:J,CANPLAY:$,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:Q,VOLUME_CHANGE:ee,LOADED_DATA:te,LOADED_METADATA:"loadedmetadata",RATE_CHANGE:ie,PROGRESS:ne,LOAD_START:oe,EMPTIED:re,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:se,PLAYER_BLUR:"blur",READY:ae,URL_NULL:le,AUTOPLAY_STARTED:ce,AUTOPLAY_PREVENTED:ue,COMPLETE:he,REPLAY:de,DESTROY:fe,URL_CHANGE:pe,DOWNLOAD_SPEED_CHANGE:ge,FULLSCREEN_CHANGE:ye,CSS_FULLSCREEN_CHANGE:me,MINI_STATE_CHANGE:ve,DEFINITION_CHANGE:ke,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:Ce,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:be,PIP_CHANGE:_e,ROTATE:"rotate",SCREEN_SHOT:we,PLAYNEXT:Te,SHORTCUT:xe,XGLOG:"xglog",USER_ACTION:Se,RESET:Ee,SOURCE_ERROR:Pe,SOURCE_SUCCESS:Le,SWITCH_SUBTITLE:"switch_subtitle",VIDEO_EVENTS:Ie,STATS_EVENTS:e,FPS_STUCK:Ae},Symbol.toStringTag,{value:"Module"}));function Oe(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}var De=function(){h(s,x);var n=g(s);function s(e){var t;m(this,s),(t=n.call(this,e))._hasStart=!1,t._currentTime=0,t._duration=0,t._internalOp={},t._lastMuted=!1,t.vtype="MP4",t._rate=-1,t.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video","data-index":-1},e.videoConfig,e.videoAttributes);var i=e["x5-video-player-type"]||e.x5VideoPlayerType;return F.isWeixin&&F.os.isAndroid&&i&&(t.mediaConfig["x5-video-player-type"]=i,delete t.mediaConfig.playsinline,delete t.mediaConfig["webkit-playsinline"],delete t.mediaConfig["x5-playsinline"]),e.loop&&(t.mediaConfig.loop="loop"),e.autoplayMuted&&!Object.prototype.hasOwnProperty.call(t.mediaConfig,"muted")&&(t.mediaConfig.muted=!0),t.media=A.createDom(t.mediaConfig.mediaType,"",t.mediaConfig,""),e.defaultPlaybackRate&&(t.media.defaultPlaybackRate=t.media.playbackRate=e.defaultPlaybackRate),"Number"===A.typeOf(e.volume)&&(t.volume=e.volume),e.autoplayMuted&&(t.media.muted=!0,t._lastMuted=!0),e.autoplay&&(t.media.autoplay=!0),t._interval={},t.mediaEventMiddleware={},t.attachVideoEvents(),t}return a(s,[{key:"setEventsMiddleware",value:function(t){var i=this;Object.keys(t).map(function(e){i.mediaEventMiddleware[e]=t[e]})}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map(function(e){delete t.mediaEventMiddleware[e]})}},{key:"attachVideoEvents",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=Ie.map(function(e){var n,o,t="on".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));return"function"==typeof i[t]&&i.on(e,i[t]),c({},e,(n=e,o=i,function(e,t){var i={player:o,eventName:n,originalEvent:e,detail:e.detail||{},timeStamp:e.timeStamp,currentTime:o.currentTime,duration:o.duration,paused:o.paused,ended:o.ended,isInternalOp:!!o._internalOp[e.type],muted:o.muted,volume:o.volume,host:A.getHostFromUrl(o.currentSrc),vtype:o.vtype};if(o.removeInnerOP(e.type),"timeupdate"===n&&(o._currentTime=o.media&&o.media.currentTime),"ratechange"===n){e=o.media?o.media.playbackRate:0;if(e&&o._rate===e)return;o._rate=o.media&&o.media.playbackRate}if("durationchange"===n&&(o._duration=o.media.duration),"volumechange"===n&&(i.isMutedChange=o._lastMuted!==o.muted,o._lastMuted=o.muted),"error"===n&&(i.error=t||o.video.error),o.mediaEventMiddleware[n]){t=Oe.bind(o,n,i);try{o.mediaEventMiddleware[n].call(o,i,t)}catch(e){throw Oe.call(o,n,i),e}}else Oe.call(o,n,i)}))})),this._evHandlers.forEach(function(e){var t=Object.keys(e)[0];n.addEventListener(t,e[t],!1)})}},{key:"detachVideoEvents",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach(function(e){var t=Object.keys(e)[0];n.removeEventListener(t,e[t],!1)}),this._evHandlers.forEach(function(e){var t=Object.keys(e)[0],e="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));"function"==typeof i[e]&&i.off(t,i[e])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var i=this;e.removeAttribute("src"),e.load(),t.forEach(function(e,t){i.media.appendChild(A.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||""),"data-index":t+1}))});var n=e.children;if(n){this._videoSourceCount=n.length,this._videoSourceIndex=n.length,this._vLoadeddata=function(e){i.emit(Le,{src:e.target.currentSrc,host:A.getHostFromUrl(e.target.currentSrc)})};for(var o=null,r=0;r<this._evHandlers.length;r++)if("error"===Object.keys(this._evHandlers[r])[0]){o=this._evHandlers[r];break}this._sourceError||(this._sourceError=function(e){var t=parseInt(e.target.getAttribute("data-index"),10);i._videoSourceIndex--,(0===i._videoSourceIndex||t>=i._videoSourceCount)&&(t={code:4,message:"sources_load_error"},o?o.error(e,t):i.errorHandler("error",t)),i.emit(Pe,new V(i,{errorType:B[4],errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:e.target.src}))});for(var s=0;s<n.length;s++)n[s].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var i=0;i<t.length;i++)t[i].removeEventListener("error",this._sourceError);for(;0<t.length;)e.removeChild(t[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.media&&(this.media.error||i)&&(i=(t=this.media.error||i).code?B[t.code]:"other",t.message,this.media.currentSrc||(t={code:6,message:"empty_src"}),this.emit(e,new V(this,{errorType:i,errorCode:t.code,errorMessage:t.message||"",mediaError:t})))}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e=e||this.media.buffered;var i=this.media.currentTime;if(e)for(var n=0,o=e.length;n<o&&(t[0]=e.start(n),t[1]=e.end(n),!(t[0]<=i&&i<=t[1]));n++);return t[0]-i<=0&&i-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?A.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var i=0;i<t.length;i++)if((t.start(i)<=this.currentTime||t.start(i)<.1)&&t.end(i)>=this.currentTime)return{start:t.start(i),end:t.end(i)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){return this.media.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]:""}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(pe,e),this.emit(J),this._currentTime=0,this._duration=0,A.isMSE(this.media)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===A.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];(i=y(l(s.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];(i=y(l(s.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];(i=y(l(s.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];(i=y(l(s.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){y(l(s.prototype),"removeAllListeners",this).call(this)}}]),s}(),Re=(a(He,[{key:"openDB",value:function(t){var i=this,n=this,e=this.myDB.version||1,e=n.indexedDB.open(n.myDB.name,e);e.onerror=function(e){},e.onsuccess=function(e){i.myDB.db=e.target.result,t.call(n)},e.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(i=n.add(t[o])).onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(i=n.put(t[o])).onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,i){var n=this,t=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);t.onerror=function(){i.call(n,null)},t.onsuccess=function(e){e=e.target.result;i.call(n,e)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),He),Me=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],je=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Ne=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Fe="data-xgplayerid";function He(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};m(this,He),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}function Be(n,e,o){for(var t=arguments.length,i=new Array(3<t?t-3:0),r=3;r<t;r++)i[r-3]=arguments[r];e=e.call.apply(e,[n].concat(i));o&&"function"==typeof o&&(e&&e.then?e.then(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.call.apply(o,[n].concat(t))}):o.call.apply(o,[n].concat(i)))}function Ue(r,s){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),this.__hooks[r]||(this.__hooks[r]=null),function(){var e,t=arguments,i=this;if(a.pre)try{(e=a.pre).call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(r,":pre error] >> ").concat(e.message),e}if(this.__hooks&&this.__hooks[r])try{var n,o=(n=this.__hooks[r]).call.apply(n,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(e){!1!==e&&Be.apply(void 0,[i,s,a.next].concat(v(t)))}).catch(function(e){throw e}):Be.apply(void 0,[this,s,a.next].concat(Array.prototype.slice.call(arguments))):void 0===o&&Be.apply(void 0,[this,s,a.next].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(r,"] >> ").concat(e.message),e}else Be.apply(void 0,[this,s,a.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Ve(e,t){var i=this.__hooks;if(i)return i.hasOwnProperty(e)?(i&&(i[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function Ge(e,t){var i=this.__hooks;i&&delete i[e]}function We(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var e=this.plugins[e.toLowerCase()],t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.useHooks&&e.useHooks.apply(e,i)}}function ze(e){if(this.plugins&&this.plugins[e.toLowerCase()]){e=this.plugins[e.toLowerCase()];if(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.removeHooks&&e.removeHooks.apply(e,i)}}}function Ke(t,e){e=1<arguments.length&&void 0!==e?e:[];t.__hooks={},e&&e.map(function(e){t.__hooks[e]=null}),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map(function(e){if(t.__hooks[e])return e})}})}function qe(e){e.__hooks=null}function Ye(t,i,n){for(var e=arguments.length,o=new Array(3<e?e-3:0),r=3;r<e;r++)o[r-3]=arguments[r];if(!t.__hooks||!t.__hooks[i])return n.call.apply(n,[t,t].concat(o));var s=(s=t.__hooks[i]).call.apply(s,[t,t].concat(o));if(s&&s.then)s.then(function(e){return!1===e?null:n.call.apply(n,[t,t].concat(o))}).catch(function(e){console.warn("[runHooks]".concat(i," reject"),e.message)});else if(!1!==s)return n.call.apply(n,[t,t].concat(o))}function Xe(e,t){L.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var Ze=(a(Je,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=(e.pluginName?e:this.constructor).pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||this.lang}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=A.checkTouchSupport()?"touch":"mouse";return e=this.playerConfig&&("touch"===this.playerConfig.domEventType||"mouse"===this.playerConfig.domEventType)?this.playerConfig.domEventType:e}},{key:"on",value:function(e,t){var i=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){i.__events[e]=t,i.player.on(e,t)}):Xe(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(t,i){var n=this;t&&i&&this.player?"string"==typeof t?(this.__onceEvents[t]=i,this.player.once(t,i)):Array.isArray(t)&&t.forEach(function(e){n.__onceEvents[e]=i,n.player.once(t,i)}):Xe(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(t,i){var n=this;t&&i&&this.player?"string"==typeof t?(delete this.__events[t],this.player.off(t,i)):Array.isArray(t)&&t.forEach(function(e){delete n.__events[t],n.player.off(e,i)}):Xe(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(t){Object.keys(i[t]).forEach(function(e){i[t][e]&&i.off(e,i[t][e]),e&&delete i[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(t=this.player).emit.apply(t,[e].concat(n))}}},{key:"emitUserAction",value:function(e,t){var i;this.player&&(i=u(u({},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),{},{pluginName:this.pluginName}),this.player.emitUserAction(e,t,i))}},{key:"hook",value:function(e,t){return Ue.call.apply(Ue,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return Ve.call.apply(Ve,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return Ge.call.apply(Ge,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return i&&(t.pluginName=i),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var t=this,e=this.player,i=this.pluginName;this.offAll(),A.clearAllTimers(this),A.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(e){t[e]=null}),e.unRegisterPlugin(i),qe(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.defineProperty(e,i,t[i])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),Je);function Je(e){m(this,Je),A.checkIsFunction(this.beforeCreate)&&this.beforeCreate(e),Ke(this),this.__args=e,this.__events={},this.__onceEvents={},this.config=e.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(e)}"undefined"==typeof Element||Element.prototype.matches||((Gi=Element.prototype).matches=Gi.matchesSelector||Gi.mozMatchesSelector||Gi.msMatchesSelector||Gi.oMatchesSelector||Gi.webkitMatchesSelector);var $e=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}};function Qe(e,t,i,n,o){var r=function(t,i,e,n){return function(e){e.delegateTarget=$e(e.target,i),e.delegateTarget&&n.call(t,e)}}.apply(this,arguments);return e.addEventListener(i,r,o),{destroy:function(){e.removeEventListener(i,r,o)}}}function et(e,t,i,n,o){return"function"==typeof e.addEventListener?Qe.apply(null,arguments):"function"==typeof i?Qe.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return Qe(e,t,i,n,o)}))}var tt={CONTROLS:"controls",ROOT:"root"},it={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function nt(e){return e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function ot(t,e,i,n,o){var i=2<arguments.length&&void 0!==i?i:"",r=3<arguments.length&&void 0!==n?n:{},o=4<arguments.length&&void 0!==o?o:"",s=null;if(t instanceof window.Element)return A.addClass(t,i),Object.keys(r).map(function(e){t.setAttribute(e,r[e])}),t;if(nt(t)||nt(t.url))return r.src=nt(t)?t:t.url||"",s=A.createDom(t.tag||"img","",r,"xg-img ".concat(i));if("function"==typeof t)try{return(s=t())instanceof window.Element?(A.addClass(s,i),Object.keys(r).map(function(e){s.setAttribute(e,r[e])}),s):(L.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(o,"] is a function mast return an Element Object")),null)}catch(e){return L.logError("Plugin named [".concat(o,"]:createIcon"),e),null}return"string"==typeof t?A.createDomFromHtml(t,r,i):(L.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(o,"] is invalid")),null)}function rt(c,u){var h=u.config.icons||u.playerConfig.icons;Object.keys(c).map(function(e){var t,i,n,o,r=c[e],s=r&&r.class?r.class:"",a=r&&r.attr?r.attr:{},l=null;h&&h[e]&&(n=h[e],o=s,s="object"===f(n)&&n.class&&"string"==typeof n.class?"".concat(o," ").concat(n.class):o,t=h[e],i=a,"object"===f(t)&&t.attr&&"object"===f(t.attr)&&Object.keys(t.attr).map(function(e){i[e]=t.attr[e]}),l=ot(h[e],e,s,a=i,u.pluginName)),!l&&r&&(l=ot(r.icon||r,a,s,{},u.pluginName)),u.icons[e]=l})}var st=function(){h(s,Ze);var t=g(s);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return m(this,s),(e=t.call(this,e)).__delegates=[],e}return a(s,[{key:"__init",value:function(e){if(y(l(s.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,rt(this.registerIcons()||{},this),this.langText={};var n=this.registerLanguageTexts()||{},o=this;Object.keys(n).map(function(i){Object.defineProperty(o.langText,i,{get:function(){var e=o.lang,t=o.i18n;return t[i]||n[i]&&n[i][e]||""}})});var r="";try{r=this.render()}catch(e){throw L.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(r)(i=s.insert(r,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=A.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;i=this.config.attr||{},t=this.config.style||{};this.setAttr(i),this.setStyle(t),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var r,s=this;this.root&&(this._children=[],(r=this.children())&&"object"===f(r)&&0<Object.keys(r).length&&Object.keys(r).map(function(e){var t,i,n=e,o=r[n],e={root:s.root};"function"==typeof o?(t=s.config[n]||{},i=o):"object"===f(o)&&"function"==typeof o.plugin&&(t=o.options?A.deepCopy(s.config[n]||{},o.options):s.config[n]||{},i=o.plugin),void 0!==(e.config=t).index&&(e.index=t.index),t.root&&(e.root=t.root),s.registerPlugin(i,e,n)}))}},{key:"updateLang",value:function(i){i=i||this.lang;var e=this.root,n=this.i18n,o=this.langText;e&&function e(t,i){for(var n=0;n<t.children.length;n++)0<t.children[n].children.length?e(t.children[n],i):i(t.children[n])}(e,function(e){var t=e.getAttribute&&e.getAttribute("lang-key");!t||(t=n[t.toUpperCase()]||o[t])&&(e.innerHTML="function"==typeof t?t(i):t)})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=this.i18n||{},n=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);t=i[t]||n[t]||"";t&&(e.innerHTML=t)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;i=y(l(s.prototype),"registerPlugin",this).call(this,e,t,i);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var n=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){n.bindEL(e,t)}):this.bindEL(e,t):(i=s.delegate.call(this,this.root,e,t,i),this.__delegates=this.__delegates.concat(i))}},{key:"unbind",value:function(e,t){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t);else for(var n="".concat(e,"_").concat(t),o=0;o<this.__delegates.length;o++)if(this.__delegates[o].key===n){this.__delegates[o].destroy(),this.__delegates.splice(o,1);break}}},{key:"setStyle",value:function(t,e){var i=this;if(this.root)return"String"===A.typeOf(t)?this.root.style[t]=e:void("Object"===A.typeOf(t)&&Object.keys(t).map(function(e){i.root.style[e]=t[e]}))}},{key:"setAttr",value:function(t,e){var i=this;if(this.root)return"String"===A.typeOf(t)?this.root.setAttribute(t,e):void("Object"===A.typeOf(t)&&Object.keys(t).map(function(e){i.root.setAttribute(e,t[e])}))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,i)}},{key:"unbindEL",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,i)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&e instanceof window.Element)return this.root.appendChild(e);if(!(t&&t instanceof window.Element))return null;try{return("string"==typeof e?this.find(e):e).appendChild(t)}catch(e){return L.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var t=this,i=this.player;this.__delegates.map(function(e){e.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(e){i.unRegisterPlugin(e.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),y(l(s.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(e){t[e]=null})}}],[{key:"insert",value:function(e,t){var i=t.children.length,n=Number(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0),o=e instanceof window.Node;if(i){for(var r=0,s=null,a="";r<i;r++){var s=t.children[r],l=Number(s.getAttribute("data-index"));if(n<=l){a="beforebegin";break}l<n&&(a="afterend")}return o?"afterend"===a?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(a,e),"afterend"===a?t.children[t.children.length-1]:t.children[r]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(i,n,e,o){var t,r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=[];return i instanceof window.Node&&"function"==typeof o&&(Array.isArray(e)?e.forEach(function(e){var t=et(i,n,e,o,r);t.key="".concat(n,"_").concat(e),s.push(t)}):((t=et(i,n,e,o,r)).key="".concat(n,"_").concat(e),s.push(t))),s}},{key:"ROOT_TYPES",get:function(){return tt}},{key:"POSITIONS",get:function(){return it}}]),s}(),at=(a(ct,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var i=e.getAttribute(Fe),n=this.__handlers,o=-1,r=0;r<n.length;r++)n[r]&&e===n[r].target&&(o=r);-1<o?this.__handlers[o].handler=t:this.__handlers.push({target:e,handler:t,playerId:i})}}},{key:"unObserver",value:function(i){var n=-1;this.__handlers.map(function(e,t){i===e.target&&(n=t)});try{this.observer&&this.observer.unobserve(i)}catch(e){}this.observer&&this.observer.unobserve(i),-1<n&&this.__handlers.splice(n,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,i=0;i<t.length;i++)if(t[i]&&e===t[i].target){try{t[i].handler(e)}catch(e){console.error(e)}return!0}return!1}}]),ct),lt=null;function ct(){var n=this;if(m(this,ct),c(this,"__trigger",function(e){var t=(new Date).getTime();n.timeStamp=t;for(var i=0;i<e.length;i++)n.__runHandler(e[i].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(e,t){var i=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return D(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),R(e,100,{leading:i,trailing:n,maxWait:100})}(this.__trigger,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}var ut={pluginGroup:{},init:function(e){var t,i,n=e._pluginInfoId;n||(n=(new Date).getTime(),e._pluginInfoId=n),e.config.closeResizeObserver||(t=e.root,i=function(){e.resize()},(lt=lt||new at).addObserver(t,i)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[n]={_player:e,_originalOptions:e.config||{},_plugins:{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),i=0;i<t.length;i++){var n=this.pluginGroup[t[i]]._player;if(n.root===e)return n}return null}return null},formatPluginInfo:function(e,t){var i=null,n=null,n=e.plugin&&"function"==typeof e.plugin?(i=e.plugin,e.options):(i=e,{});return t&&(n.config=t||{}),{PLUFGIN:i,options:n}},checkPluginIfExits:function(e,t){for(var i=0;i<t.length;i++)if(e.toLowerCase()===t[i].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var i=Object.keys(t),n=null,o=0;o<i.length;o++)if(e.toLowerCase()===i[o].toLowerCase()){n=t[i[o]];break}return"Object"===A.typeOf(n)?{root:n.root,position:n.position}:{}},lazyRegister:function(i,e){var n=this,o=e.timeout||1500;return Promise.race([e.loader().then(function(e){var t=e&&e.__esModule?e.default:e;n.register(i,t,e.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},o)})])},register:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var n=e._pluginInfoId;if(n&&this.pluginGroup[n]){this.pluginGroup[n]._plugins||(this.pluginGroup[n]._plugins={});var o=this.pluginGroup[n]._plugins,r=this.pluginGroup[n]._originalOptions;i.player=this.pluginGroup[n]._player;var s=i.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){i.config||(i.config={});for(var a=Object.keys(r),l=0;l<a.length;l++)if(s.toLowerCase()===a[l].toLowerCase()){var c=r[a[l]];"Object"===A.typeOf(c)?i.config=Object.assign({},i.config,r[a[l]]):"Boolean"===A.typeOf(c)&&(i.config.disable=!c);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach(function(e){void 0===i.config[e]&&(i.config[e]=t.defaultConfig[e])}),i.root?"string"==typeof i.root&&(i.root=e[i.root]):i.root=e.root,i.index=i.config.index||0;try{o[s.toLowerCase()]&&(this.unRegister(n,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new t(i);return o[s.toLowerCase()]=u,o[s.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(s,"]"))}}},unRegister:function(t,i){t._pluginInfoId&&(t=t._pluginInfoId),i=i.toLowerCase();try{var e=this.pluginGroup[t]._plugins[i];e&&(e.pluginName&&e.__destroy(),delete this.pluginGroup[t]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(t,"] error"),e)}},deletePlugin:function(e,t){e=e._pluginInfoId;e&&this.pluginGroup[e]&&this.pluginGroup[e]._plugins&&delete this.pluginGroup[e]._plugins[t]},getPlugins:function(e){e=e._pluginInfoId;return e&&this.pluginGroup[e]?this.pluginGroup[e]._plugins:{}},findPlugin:function(e,t){e=e._pluginInfoId;if(!e||!this.pluginGroup[e])return null;t=t.toLowerCase();return this.pluginGroup[e]._plugins[t]},beforeInit:function(o){var r=this;function s(e){return e&&e.then?e:new Promise(function(e){e()})}return new Promise(function(t){if(r.pluginGroup)return(o._loadingPlugins&&o._loadingPlugins.length?Promise.all(o._loadingPlugins):Promise.resolve()).then(function(){var i,n,e=o._pluginInfoId;r.pluginGroup[e]?(i=r.pluginGroup[e]._plugins,n=[],Object.keys(i).forEach(function(e){if(i[e]&&i[e].beforePlayerInit)try{var t=i[e].beforePlayerInit();n.push(s(t))}catch(e){throw n.push(s(null)),e}}),Promise.all([].concat(n)).then(function(){t()}).catch(function(e){console.error(e),t()})):t()})})},afterInit:function(e){var t,e=e._pluginInfoId;e&&this.pluginGroup[e]&&(t=this.pluginGroup[e]._plugins,Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()}))},setLang:function(e,t){var i,t=t._pluginInfoId;t&&this.pluginGroup[t]&&(i=this.pluginGroup[t]._plugins,Object.keys(i).forEach(function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))},reRender:function(t){var i,n,o=this,r=t._pluginInfoId;r&&this.pluginGroup[r]&&(i=[],n=this.pluginGroup[r]._plugins,Object.keys(n).forEach(function(e){"controls"!==e&&n[e]&&(i.push({plugin:n[e].func,options:n[e].__args}),o.unRegister(r,e))}),i.forEach(function(e){o.register(t,e.plugin,e.options)}))},onPluginsReady:function(e){var t,e=e._pluginInfoId;e&&this.pluginGroup[e]&&(t=this.pluginGroup[e]._plugins||{},Object.keys(t).forEach(function(e){t[e].onPluginsReady&&"function"==typeof t[e].onPluginsReady&&t[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var i=Object.keys(this.pluginGroup),n=0;n<i.length;n++){var o=this.pluginGroup[i[n]];o&&o._player&&(this.pluginGroup[i[n]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var i=this.pluginGroup[e[t]];if(i&&i._player&&i._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var i=e.root;lt.unObserver(i,void 0);for(var i=this.pluginGroup[t]._plugins,n=0,o=Object.keys(i);n<o.length;n++){var r=o[n];this.unRegister(t,r)}var s,i=e.isUseActive;delete this.pluginGroup[t],delete e._pluginInfoId,i&&0<(s=Object.keys(this.pluginGroup)).length&&this.setCurrentUserActive(s[s.length-1],!0)}}},ht={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function dt(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:e="zh-cn"===(e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase())?"zh":e,controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}};var e}var ft=1,pt=2,gt=4,yt=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],mt=function(){h(r,st);var o=g(r);function r(){var n;m(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(n=o.call.apply(o,[this].concat(t))),"onMouseEnter",function(e){var t=d(n),i=t.player;t.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})}),c(d(n),"onMouseLeave",function(e){d(n).player.focus()}),n}return a(r,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==F.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var t,i=this,e=this.config,n=e.disable,o=e.height,e=e.mode;n||("flex"===e&&this.player.addClass(ht.FLEX_CONTROLS),t={height:"".concat(o,"px")},Object.keys(t).map(function(e){i.root.style[e]=t[e]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(ve,function(e){e?A.addClass(i.root,"mini-controls"):A.removeClass(i.root,"mini-controls")}),o=this.playerConfig.isMobileSimulateMode,"mobile"!==F.device&&"mobile"!==o&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave)))}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&A.addClass(this.root,ht.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){A.removeClass(this.root,ht.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;if(this.root){var n=e.defaultConfig||{};if(!t.root){switch(t.position||(t.config&&t.config.position?t.config:n).position){case it.CONTROLS_LEFT:t.root=this.left;break;case it.CONTROLS_RIGHT:t.root=this.right;break;case it.CONTROLS_CENTER:t.root=this.center;break;case it.CONTROLS:t.root=this.root;break;default:t.root=this.left}return y(l(r.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==F.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,i=e.autoHide,n=e.initShow;if(!e.disable){i=A.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},c({},ht.CONTROLS_AUTOHIDE,i),{"xgplayer-controls-initshow":n||!i});return'<xg-controls class="'.concat(i,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),r}(),vt={lang:{},langKeys:[],textKeys:[]};function kt(o,r){return Object.keys(r).forEach(function(e){var t,i=A.typeOf(r[e]),n=A.typeOf(o[e]);"Array"===i?("Array"!==n&&(o[e]=[]),(t=o[e]).push.apply(t,v(r[e]))):"Object"===i?("Object"!==n&&(o[e]={}),kt(o[e],r[e])):o[e]=r[e]}),o}function Ct(){Object.keys(vt.lang.en).map(function(e){vt.textKeys[e]=e})}function bt(e,t){var i=e.LANG;(t=t||vt).lang&&(e=e.TEXT||{},t.lang[i="zh"===i?"zh-cn":i]?kt(t.lang[i],e):(t.langKeys.push(i),t.lang[i]=e),Ct())}bt({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var _t={get textKeys(){return vt.textKeys},get langKeys(){return vt.langKeys},get lang(){var t={};return vt.langKeys.map(function(e){t[e]=vt.lang[e]}),vt.lang["zh-cn"]&&(t.zh=vt.lang["zh-cn"]||{}),t},extend:function(t,i){var n,e=[];(i=i||vt).lang&&(e="Array"!==A.typeOf(t)?Object.keys(t).map(function(e){return{LANG:"zh"===e?"zh-cn":e,TEXT:t[e]}}):t,n=i.lang,e.map(function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),n[e.LANG]?kt(n[e.LANG]||{},e.TEXT||{}):bt(e,i)}),Ct())},use:bt,init:function(e){var t={lang:{},langKeys:[],textKeys:{},pId:e};return kt(t.lang,vt.lang),(e=t.langKeys).push.apply(e,v(vt.langKeys)),kt(t.textKeys,vt.textKeys),t}},wt=["play","pause","replay","retry"],Tt=0,xt=0,St=function(){h(s,De);var n=g(s);function s(e){var r;m(this,s);var e=A.deepMerge(dt(),e);c(d(r=n.call(this,e)),"canPlayFunc",function(){var e,t,i;r.config&&(e=(i=r.config).autoplay,t=i.startTime,i=i.defaultPlaybackRate,L.logInfo("player","canPlayFunc, startTime",t),t&&(r.currentTime=t>r.duration?r.duration:t,r.config.startTime=0),r.playbackRate=i,(e||r._useAutoplay)&&r.mediaPlay(),r.off($,r.canPlayFunc),r.removeClass(ht.ENTER))}),c(d(r),"onFullscreenChange",function(e,t){var i=function(){A.setTimeout(d(r),function(){r.resize()},100)},n=A.getFullScreenEl();r._fullActionFrom?r._fullActionFrom="":r.emit(Se,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:r.currentTime,duration:r.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=function(e,t){if(e){var i=e.getAttribute(Fe);return!(!i||i!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}(n,r.playerId);t||n&&(n===r._fullscreenEl||o)?(i(),r.config.closeFocusVideoFocus||r.media.focus(),r.fullscreen=!0,r.changeFullStyle(r.root,n,ht.FULLSCREEN),r.emit(ye,!0,r._fullScreenOffset),r.cssfullscreen&&r.exitCssFullscreen()):r.fullscreen&&(i(),i=(n=d(r))._fullScreenOffset,n.config.needFullscreenScroll?(window.scrollTo(i.left,i.top),A.setTimeout(d(r),function(){r.fullscreen=!1,r._fullScreenOffset=null},100)):(r.config.closeFocusVideoFocus||r.media.focus(),r.fullscreen=!1,r._fullScreenOffset=null),r.cssfullscreen?r.removeClass(ht.FULLSCREEN):r.recoverFullStyle(r.root,r._fullscreenEl,ht.FULLSCREEN),r._fullscreenEl=null,r.emit(ye,!1))}),c(d(r),"_onWebkitbeginfullscreen",function(e){r._fullscreenEl=r.media,r.onFullscreenChange(e,!0)}),c(d(r),"_onWebkitendfullscreen",function(e){r.onFullscreenChange(e,!1)}),Ke(d(r),wt),r.config=e,r._pluginInfoId=A.generateSessionId(),(e=d(r)).logInfo=L.logInfo.bind(e),e.logWarn=L.logWarn.bind(e),e.logError=L.logError.bind(e);e=r.constructor.defaultPreset;if(r.config.presets.length?0<=(t=r.config.presets.indexOf("default"))&&e&&(r.config.presets[t]=e):e&&r.config.presets.push(e),r.userTimer=null,r.waitTimer=null,r._state=ft,r.isError=!1,r._hasStart=!1,r.isSeeking=!1,r.isCanplay=!1,r._useAutoplay=!1,r.rotateDeg=0,r.isActive=!1,r.fullscreen=!1,r.cssfullscreen=!1,r.isRotateFullscreen=!1,r._fullscreenEl=null,r.timeSegments=[],r._cssfullscreenEl=null,r.curDefinition=null,r._orgCss="",r._fullScreenOffset=null,r._videoHeight=0,r._videoWidth=0,r.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},r.sizeInfo={width:0,height:0,left:0,top:0},r._accPlayed={t:0,acc:0,loopAcc:0},r._offsetInfo={currentTime:-1,duration:0},r.innerContainer=null,r.controls=null,r.topBar=null,r.root=null,r.__i18n=_t.init(r._pluginInfoId),F.os.isAndroid&&0<F.osVersion&&F.osVersion<6&&(r.config.autoplay=!1),r.database=new Re,r.isUserActive=!1,r._onceSeekCanplay=null,r._isPauseBeforeSeek=0,r.innerStates={isActiveLocked:!1},!r._initDOM())return console.error(new Error("can't find the dom which id is ".concat(r.config.id," or this.config.el does not exist"))),p(r);var t=r.config,e=t.definition,i=void 0===e?{}:e;return!t.url&&i.list&&0<i.list.length&&((t=i.list.find(function(e){return e.definition&&e.definition===i.defaultDefinition}))||(i.defaultDefinition=i.list[0].definition,t=i.list[0]),r.config.url=t.url,r.curDefinition=t),r._bindEvents(),r._registerPresets(),r._registerPlugins(),ut.onPluginsReady(d(r)),r.getInitDefinition(),r.setState(pt),A.setTimeout(d(r),function(){r.emit(ae)},0),r.onReady&&r.onReady(),(r.config.videoInit||r.config.autoplay)&&(!r.hasStart||r.state<gt)&&r.start(),r}return a(s,[{key:"_initDOM",value:function(){var t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit(q,new V("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=e}var i=ut.checkPlayerRoot(this.root);i&&(L.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),i.destroy()),this.root.setAttribute(Fe,this.playerId),ut.init(this),this._initBaseDoms();e=this.constructor.XgVideoProxy;e&&this.mediaConfig.mediaType===e.mediaType&&(i=this.innerContainer||this.root,this.detachVideoEvents(this.media),i=new e(i,this.config,this.mediaConfig),this.attachVideoEvents(i),this.media=i),this.media.setAttribute(Fe,this.playerId),this.config.controls&&(o=this.config.controls.root||null,o=ut.register(this,mt,{root:o}),this.controls=o);var n,o="mobile"===this.config.isMobileSimulateMode?"mobile":F.device;this.addClass("".concat(ht.DEFAULT," ").concat(ht.INACTIVE," xgplayer-").concat(o," ").concat(this.config.controls?"":ht.NO_CONTROLS)),this.config.autoplay?this.addClass(ht.ENTER):this.addClass(ht.NO_START),this.config.fluid?(a=(r=this.config).width,s=r.height,"number"==typeof a&&"number"==typeof s||(a=600,s=337.5),n={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*s/a,"%")},Object.keys(n).forEach(function(e){t.root.style[e]=n[e]})):["width","height"].forEach(function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))});var o=this.root.getBoundingClientRect(),r=o.width,s=o.height,a=o.left,o=o.top;return this.sizeInfo.width=r,this.sizeInfo.height=s,this.sizeInfo.left=a,this.sizeInfo.top=o,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=A.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var t=this;["focus","blur"].forEach(function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),Me.forEach(function(e){document&&document.addEventListener(e,t.onFullscreenChange)}),F.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(te,this.resize),this.playFunc=function(){t.config.closeFocusVideoFocus||t.media.focus()},this.once(G,this.playFunc)}},{key:"_unbindEvents",value:function(){var t=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Me.forEach(function(e){document.removeEventListener(e,t.onFullscreenChange)}),this.playFunc&&this.off(G,this.playFunc),this.off($,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;!this.media||(!e||""===e||"Array"===A.typeOf(e)&&0===e.length)&&(e="",this.emit(le),L.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart)||(this._detachSourceEvents(this.media),"Array"===A.typeOf(e)&&0<e.length?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e,"Number"===A.typeOf(this.config.volume)&&(this.volume=this.config.volume),e=this.innerContainer||this.root,this.media instanceof window.Element&&!e.contains(this.media)&&e.insertBefore(this.media,e.firstChild),e=this.media.readyState,L.logInfo("_startInit readyState",e),this.config.autoplay&&(A.isMSE(this.media)||this.load(),(F.os.isIpad||F.os.isPhone)&&this.mediaPlay()),2<=e?this.canPlayFunc():this.once($,this.canPlayFunc),(!this.hasStart||this.state<gt)&&ut.afterInit(this),this.hasStart=!0,this.setState(gt),A.setTimeout(this,function(){t.emit(he)},0))}},{key:"_registerPlugins",value:function(){var n=this,o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var e=this.config.ignores||[],t=this.config.plugins||[],i=this.config.i18n||[];o&&_t.extend(i,this.__i18n);var r=e.join("||").toLowerCase().split("||"),s=this.plugins;t.forEach(function(e){try{var t=(e.plugin||e).pluginName;if(t&&-1<r.indexOf(t.toLowerCase()))return null;if(!o&&s[t.toLowerCase()])return;if(e.lazy&&e.loader){var i=ut.lazyRegister(n,e);return void(e.forceBeforeInit&&(i.then(function(){n._loadingPlugins.splice(n._loadingPlugins.indexOf(i),1)}).catch(function(e){L.logError("_registerPlugins:loadingPlugin",e),n._loadingPlugins.splice(n._loadingPlugins.indexOf(i),1)}),n._loadingPlugins.push(i)))}return n.registerPlugin(e)}catch(e){L.logError("_registerPlugins:",e)}})}},{key:"_registerPresets",value:function(){var t=this;this.config.presets.forEach(function(e){!function(t,e){var i=e.preset&&e.options?new e.preset(e.options,t.config):new e({},t.config),n=i.plugins,o=void 0===n?[]:n,e=i.ignores,n=void 0===e?[]:e,e=i.icons,r=void 0===e?{}:e,e=i.i18n,i=void 0===e?[]:e;t.config.plugins||(t.config.plugins=[]),t.config.ignores||(t.config.ignores=[]),(e=t.config.plugins).push.apply(e,v(o)),(o=t.config.ignores).push.apply(o,v(n)),Object.keys(r).map(function(e){t.config.icons[e]||(t.config.icons[e]=r[e])});n=t.config.i18n||[];i.push.apply(i,v(n)),t.config.i18n=i}(t,e)})}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case it.ROOT_RIGHT:this.rightBar||(this.rightBar=A.createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case it.ROOT_LEFT:this.leftBar||(this.leftBar=A.createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case it.ROOT_TOP:this.topBar||(this.topBar=A.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&A.addClass(this.topBar,ht.TOP_BAR_AUTOHIDE)),t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var i=ut.formatPluginInfo(e,t),e=i.PLUFGIN,t=i.options,i=this.config.plugins;ut.checkPluginIfExits(e.pluginName,i)||i.push(e);i=ut.getRootByConfig(e.pluginName,this.config);i.root&&(t.root=i.root),i.position&&(t.position=i.position);i=t.position||t.config&&t.config.position||e.defaultConfig&&e.defaultConfig.position;return!t.root&&"string"==typeof i&&-1<i.indexOf("controls")?this.controls&&this.controls.registerPlugin(e,t,e.pluginName):(t.root||(t.root=this._getRootByPosition(i)),ut.register(this,e,t))}},{key:"deregister",value:function(e){"string"==typeof e?ut.unRegister(this,e):e instanceof Ze&&ut.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof Ze&&(t=e.pluginName),t)for(var i=this.config.plugins.length-1;-1<i;i--)if(this.config.plugins[i].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(i,1);break}}},{key:"plugins",get:function(){return ut.getPlugins(this)}},{key:"getPlugin",value:function(e){e=ut.findPlugin(this,e);return e&&e.pluginName?e:null}},{key:"addClass",value:function(e){this.root&&(A.hasClass(this.root,e)||A.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&A.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return A.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(t){var i=this;if(!(3<this.state))return t||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(3),this._registerPlugins(!1),ut.beforeInit(this).then(function(){if(i.config){t=t||(i.url||i.config.url);var e=i.preProcessUrl(t);return i._startInit(e.url)}}).catch(function(e){throw e.fileName="player",e.lineNumber="236",L.logError("start:beforeInit:",e),e})}},{key:"switchURL",value:function(e,t){var o=this,r=e;"Object"===A.typeOf(e)&&(r=e.url);var r=this.preProcessUrl(r).url,s=this.currentTime,a=this.paused&&!this.isError;return this.src=r,new Promise(function(e,t){function i(e){o.off("timeupdate",n),o.off("canplay",n),t(e)}var n=function(){o.currentTime=s,a&&o.pause(),o.off("error",i),e(!0)};o.once("error",i),r?(F.os.isAndroid?o.once("timeupdate",n):o.once("canplay",n),o.play()):o.errorHandler("error",{code:6,message:"empty_src"})})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var t=this;if(!this.hasStart&&this.state<gt)return this.removeClass(ht.NO_START),this.addClass(ht.ENTER),this.start(),void(this._useAutoplay=!0);this.state<6&&(this.removeClass(ht.NO_START),this.isCanplay||this.addClass(ht.ENTER));var e=y(l(s.prototype),"play",this).call(this);return void 0!==e&&e&&e.then?e.then(function(){t.removeClass(ht.NOT_ALLOW_AUTOPLAY),t.addClass(ht.PLAYING),t.state<6&&(L.logInfo(">>>>playPromise.then"),t.setState(6),t.emit(ce))}).catch(function(e){return L.logWarn(">>>>playPromise.catch",e.name),t.media&&t.media.error?(t.onError(),void t.removeClass(ht.ENTER)):void("NotAllowedError"===e.name&&(t._errorTimer=A.setTimeout(t,function(){t._errorTimer=null,t.emit(ue),t.addClass(ht.NOT_ALLOW_AUTOPLAY),t.removeClass(ht.ENTER),t.pause(),t.setState(5)},0)))}):(L.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(ht.NOT_ALLOW_AUTOPLAY),this.removeClass(ht.NO_START),this.removeClass(ht.ENTER),this.addClass(ht.PLAYING),this.emit(ce))),e}},{key:"mediaPause",value:function(){y(l(s.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){y(l(s.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(ht.PAUSED),Ye(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Ye(this,"pause",function(){y(l(s.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,t){var i,n,o,r=this;this.media&&!Number.isNaN(Number(e))&&this.hasStart&&(i=(n=this.config).isSeekedPlay,n=n.seekedStatus,o=t||(i?"play":n),e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this._isPauseBeforeSeek||(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(X,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(r.removeClass(ht.ENTER),r.isSeeking=!1,o){case"play":r.play();break;case"pause":r.pause();break;default:1<r._isPauseBeforeSeek||r.paused?r.pause():r.play()}r._isPauseBeforeSeek=0,r._onceSeekCanplay=null},this.once(X,this._onceSeekCanplay),this.state<6?(this.removeClass(ht.NO_START),this.currentTime=e,this.play()):this.currentTime=e)}},{key:"getInitDefinition",value:function(){var t=this,e=this.config,i=e.definition;!e.url&&i&&i.list&&0<i.list.length&&i.defaultDefinition&&i.list.map(function(e){e.definition===i.defaultDefinition&&(t.config.url=e.url,t.curDefinition=e)})}},{key:"changeDefinition",value:function(t,e){var i=this,n=this.config.definition;Array.isArray(null==n?void 0:n.list)&&n.list.forEach(function(e){(null==t?void 0:t.definition)===e.definition&&(i.curDefinition=e)}),null!=t&&t.bitrate&&"number"!=typeof t.bitrate&&(t.bitrate=parseInt(t.bitrate,10)||0),this.emit(ke,{from:e,to:t}),this.hasStart?(n=this.switchURL(t.url,u({seamless:!1!==n.seamless&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported},t)))&&n.then?n.then(function(){i.emit(Ce,{from:e,to:t})}):this.emit(Ce,{from:e,to:t}):this.config.url=t.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(te,this.reloadFunc)}},{key:"resetState",value:function(){var t=this,e=[ht.NOT_ALLOW_AUTOPLAY,ht.PLAYING,ht.NO_START,ht.PAUSED,ht.REPLAY,ht.ENTER,ht.ENDED,ht.ERROR,ht.LOADING];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,e.forEach(function(e){t.removeClass(e)}),this.addClass(ht.ENTER),this.emit(Ee)}},{key:"reset",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;this.resetState(),this.plugins&&(e.map(function(e){i.deregister(e)}),n)&&(t=dt(),Object.keys(this.config).keys(function(e){"undefined"===i.config[e]||"plugins"!==e&&"presets"!==e&&"el"!==e&&"id"!==e||(i.config[e]=t[e])}))}},{key:"destroy",value:function(){var t=this,e=this.innerContainer,i=this.root,n=this.media;if(i&&n){if(this.hasStart=!1,this._useAutoplay=!1,i.removeAttribute(Fe),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),A.clearAllTimers(this),this.emit(fe),ut.destroy(this),qe(this),y(l(s.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),e)for(var o=e.children,r=0;r<o.length;r++)e.removeChild(o[r]);!e&&n instanceof window.Node&&i.contains(n)&&i.removeChild(n),["topBar","leftBar","rightBar","innerContainer"].map(function(e){t[e]&&i.removeChild(t[e]),t[e]=null});n=i.className.split(" ");0<n.length?i.className=n.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(e){t[e]=!1})}}},{key:"replay",value:function(){var t=this;this.removeClass(ht.ENDED),this.currentTime=0,this.isSeeking=!1,Ye(this,"replay",function(){t.once(X,function(){var e=t.mediaPlay();e&&e.catch&&e.catch(function(e){console.log(e)})}),t.play(),t.emit(de),t.onPlay()})}},{key:"retry",value:function(){var i=this;this.removeClass(ht.ERROR),this.addClass(ht.LOADING),Ye(this,"retry",function(){var e=i.currentTime,t=i.config.url,t=A.isMSE(i.media)?{url:t}:i.preProcessUrl(t);i.src=t.url,i.config.isLive||(i.currentTime=e),i.once($,function(){i.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,t,i,n){e&&(n=n||ht.PARENT_FULLSCREEN,this._orgCss||(this._orgCss=A.filterStyleFromText(e)),A.addClass(e,i),t&&t!==e&&!this._orgPCss&&(this._orgPCss=A.filterStyleFromText(t),A.addClass(t,n),t.setAttribute(Fe,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,i,n){n=n||ht.PARENT_FULLSCREEN,this._orgCss&&(A.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),A.removeClass(e,i),t&&t!==e&&this._orgPCss&&(A.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",A.removeClass(t,n),t.removeAttribute(Fe))}},{key:"getFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,i=this.media,e=e||t;if(this._fullScreenOffset={top:A.scrollTop(),left:A.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get",A.getFullScreenEl()===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var n=0;n<je.length;n++){var o=je[n];if(e[o]){var r="webkitRequestFullscreen"===o?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[o]();return r&&r.then?r:Promise.resolve()}}return i.fullscreenEnabled||i.webkitSupportsFullscreen?(i.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||A.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var i=0;i<Ne.length;i++){var n=Ne[i];if(document[n]){var o=document[n]();return o&&o.then?o:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(e){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(ht.INNER_FULLSCREEN," ").concat(ht.CSS_FULLSCREEN):ht.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);t=this.config.fullscreen,t=void 0===t?{}:t;(!0===t.useCssFullscreen||"function"==typeof t.useCssFullscreen&&t.useCssFullscreen())&&(this.fullscreen=!0,this.emit(ye,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(me,!0)}},{key:"exitCssFullscreen",value:function(){var e,t=this._cssfullscreenEl?"".concat(ht.INNER_FULLSCREEN," ").concat(ht.CSS_FULLSCREEN):ht.CSS_FULLSCREEN;this.fullscreen?!0===(e=void 0===(e=this.config.fullscreen)?{}:e).useCssFullscreen||"function"==typeof e.useCssFullscreen&&e.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this.fullscreen=!1,this.emit(ye,!1)):this.removeClass(t):this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(me,!1)}},{key:"getRotateFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(ht.INNER_FULLSCREEN," ").concat(ht.ROTATE_FULLSCREEN):ht.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,ht.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(ye,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(ht.INNER_FULLSCREEN," ").concat(ht.ROTATE_FULLSCREEN):ht.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,ht.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(ye,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(se,u({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit("blur",u({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},i=this.innerStates;this.isActive=!0,this.removeClass(ht.INACTIVE),this.userTimer&&(A.clearTimeout(this,this.userTimer),this.userTimer=null),void 0!==t.isLock&&(i.isActiveLocked=t.isLock),!1===t.autoHide||!0===t.isLock||i.isActiveLocked?this.userTimer&&(A.clearTimeout(this,this.userTimer),this.userTimer=null):(t=t&&t.delay?t.delay:this.config.inactive,this.userTimer=A.setTimeout(this,function(){e.userTimer=null,e.blur()},t))}},{key:"onBlur",value:function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).ignorePaused,t=void 0!==e&&e;this.isActive&&!this.innerStates.isActiveLocked&&(e=this.config.closePauseVideoFocus,this.isActive=!1,(t||e||!this.paused&&!this.ended)&&this.addClass(ht.INACTIVE))}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(ht.ENTER),this.removeClass(ht.ERROR),this.removeClass(ht.LOADING),this.isCanplay=!0,this.waitTimer&&A.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(ht.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(ht.PAUSED),this.ended&&this.removeClass(ht.ENDED),this.config.closePlayVideoFocus||this.focus()}},{key:"onPause",value:function(){this.addClass(ht.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(A.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(ht.ENDED),this.setState(7)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(ht.NOT_ALLOW_AUTOPLAY),this.removeClass(ht.NO_START),this.removeClass(ht.ENTER),this.removeClass(ht.LOADING),this.addClass(ht.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(ht.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&A.clearTimeout(this,this.waitTimer),this.removeClass(ht.LOADING),this.removeClass(ht.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&A.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=A.setTimeout(this,function(){e.addClass(ht.LOADING),A.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var t=this;this.isError=!1,[ht.NO_START,ht.PAUSED,ht.ENDED,ht.ERROR,ht.REPLAY,ht.LOADING].forEach(function(e){t.removeClass(e)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(ht.LOADING))&&2<this.media.readyState&&(this.removeClass(ht.LOADING),A.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<6&&this.duration&&(this.setState(6),this.emit(ce)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===A.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,i){var n;this.media&&t&&e&&(n="String"===A.typeOf(e)?e:e.type||"",i.props&&"Array"!==A.typeOf(i.props)&&(i.props=[i.props]),this.emit(Se,u({eventType:n,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},i)))}},{key:"updateAcc",value:function(e){var t;this._accPlayed.t&&(t=(new Date).getTime()-this._accPlayed.t,this._accPlayed.acc+=t,this._accPlayed.t=0,"ended"!==e&&!this.ended||(this._accPlayed.loopAcc=this._accPlayed.acc))}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var i=e||this.media.currentTime||.2,n=t.length,o=0;o<n;o++)if(t.start(o)<=i&&t.end(o)>i)return!0;return!1}},{key:"resizePosition",value:function(){var e,t,i,n,o,r,s,a=this.videoPos,l=a.rotate,c=a.vy,u=a.vx,h=a.h,d=a.w;l<0&&!c&&!u||(o=!(o=this.videoPos._pi)&&this.media.videoHeight?this.media.videoWidth/this.media.videoHeight*100:o)&&(this.videoPos.pi=o,s={rotate:l},r=e=0,t=1,i=Math.abs(l/90),n=this.root,a=this.innerContainer,o=n.offsetWidth,a=l=(a||n).offsetHeight,n=o,i%2==0?(s.scale=t=0<h?100/h:0<d?100/d:1,e=0<c?(100-h)/2-c:0,s.y=2===i?0-e:e,r=0<u?(100-d)/2-u:0,s.x=2===i?0-r:r,this.media.style.width="".concat(n,"px"),this.media.style.height="".concat(a,"px")):i%2==1&&(r=-(o=l-(a=o))/2/(n=l)*100,s.x=3===i?r+c/2:r-c/2,e=o/2/a*100,s.y=3===i?e+u/2:e-u/2,s.scale=t,this.media.style.width="".concat(n,"px"),this.media.style.height="".concat(a,"px")),s=A.getTransformStyle(s,this.media.style.transform||this.media.style.webkitTransform),this.media.style.transform=s,this.media.style.webkitTransform=s)}},{key:"position",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};this.media&&t&&t.h&&((e=this.videoPos).h=100*t.h||0,e.w=100*t.w||0,e.vx=100*t.x||0,e.vy=100*t.y||0,this.resizePosition())}},{key:"setConfig",value:function(i){var n=this;i&&Object.keys(i).map(function(e){var t;"plugins"!==e&&(n.config[e]=i[e],(t=n.plugins[e.toLowerCase()])&&"Function"===A.typeOf(t.setConfig)&&t.setConfig(i[e]))})}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Ye(this,"playnext",function(){t.start(),t.emit(Te,e)})}},{key:"resize",value:function(){var e,t,i,n,o,r,s,a,l,c,u=this;this.media&&(r=this.root.getBoundingClientRect(),this.sizeInfo.width=r.width,this.sizeInfo.height=r.height,this.sizeInfo.left=r.left,this.sizeInfo.top=r.top,s=(n=this.media).videoWidth,a=n.videoHeight,e=(o=this.config).fitVideoSize,"fill"!==(t=o.videoFillMode)&&"cover"!==t&&"contain"!==t||this.setAttribute("data-xgfill",t),a&&s&&(this._videoHeight=a,this._videoWidth=s,c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,i=r.width,n=r.height-c,o=parseInt(s/a*1e3,10),r=parseInt(i/n*1e3,10),s=i,a=n,l={},"auto"===e&&o<r||"fixWidth"===e?(a=i/o*1e3,this.config.fluid?l.paddingTop="".concat(100*a/s,"%"):l.height="".concat(a+c,"px")):("auto"===e&&r<o||"fixHeight"===e)&&(l.width="".concat(s=o*n/1e3,"px")),this.fullscreen||this.cssfullscreen||Object.keys(l).forEach(function(e){u.root.style[e]=l[e]}),("fillHeight"===t&&r<o||"fillWidth"===t&&o<r)&&this.setAttribute("data-xgfill","cover"),c={videoScale:o,vWidth:s,vHeight:a,cWidth:s,cHeight:a+c},this.resizePosition(),this.emit(be,c)))}},{key:"updateObjectPosition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){L.logInfo("setState","state from:".concat(yt[this.state]," to:").concat(yt[e])),this._state=e}},{key:"preProcessUrl",value:function(e,t){var i=this.config.preProcessUrl;return!A.isBlob(e)&&i&&"function"==typeof i?i(e,t):{url:e}}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(!1===(this._hasStart=e)&&this.setState(pt),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state},set:function(e){e?this.setState(6):6<=this._state&&this.setState(gt)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var i=this,n=this.config.definition,o=null,r=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(e){var t;(null===(t=i.curDefinition)||void 0===t?void 0:t.definition)===e.definition&&(o=e),n.defaultDefinition===e.definition&&(r=e)}),!r&&0<e.length&&(r=e[0]),o?this.changeDefinition(o):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,0<e.total&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(t){0!==_t.langKeys.filter(function(e){return e===t}).length||"zh"===t?(this.config.lang=t,ut.setLang(t,this)):console.error("Sorry, set lang fail, because the language [".concat(t,"] is not supported now, list of all supported languages is [").concat(_t.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return this.__i18n.lang[e="zh"===e?"zh-cn":e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return H}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return(this.plugins.poster||this).config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return y(l(s.prototype),"readyState",this)}},{key:"error",get:function(){var e=y(l(s.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return y(l(s.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed,t=e.acc,e=e.t;return e?(new Date).getTime()-e+t:t}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){(e=A.convertDeg(e))%90==0&&e!==this.videoPos.rotate&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return xt},set:function(e){xt=e}},{key:"realTimeSpeed",get:function(){return Tt},set:function(e){Tt=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,t){return Ue.call.apply(Ue,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return Ve.call.apply(Ve,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return Ge.call.apply(Ge,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(3<n?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];return We.call.apply(We,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(3<n?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];return ze.call.apply(ze,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),ut.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return L.config.debug},set:function(e){L.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return ut.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){ut.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return F.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return F.probeConfigSupported(e)}},{key:"install",value:function(e,t){(s.plugins=!s.plugins?{}:s.plugins)[e]||(s.plugins[e]=t)}},{key:"use",value:function(e,t){(s.plugins=!s.plugins?{}:s.plugins)[e]=t}}]),s}();function Et(){return(new Date).getTime()}c(St,"defaultPreset",null),c(St,"XgVideoProxy",null);var Pt="waitingStart",Lt="seekStart",It=function(){h(r,st);var o=g(r);function r(){var e;m(this,r);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return c(d(e=o.call.apply(o,[this].concat(i))),"_onTimeupdate",function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(L.logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))}),c(d(e),"_onAutoplayStart",function(){L.logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")}),c(d(e),"_onReset",function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e.newPointTime=Et(),e.loadedCostTime=0,e.startCostTime=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e.fixedWaitingStart=0,e._isWaiting=!1,e._waitTimer&&A.clearTimeout(d(e),e._waitTimer),e._waittTimer&&A.clearTimeout(d(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0}),c(d(e),"_onSeeking",function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=Et(),e.emitLog(Lt,{start:Et()}))}),c(d(e),"_onSeeked",function(){e.suspendSeekingStatus("seeked")}),c(d(e),"_onWaitingLoadStart",function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=Et(),e.fixedWaitingStart=Et(),e._waitType=1,e.emitLog(Pt,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:1,endType:"loadstart"}))}),c(d(e),"_onWaiting",function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e.fixedWaitingStart=Et(),e._waitTimer=A.setTimeout(d(e),function(){e._isWaiting&&(e.waitingStart=Et(),A.clearTimeout(d(e),e._waitTimer),e._waitTimer=null,e._startWaitTimeout(),e.emitLog(Pt,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))},200))}),c(d(e),"_onError",function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")}),c(d(e),"_onPlaying",function(){e._isWaiting&&e.suspendWaitingStatus("playing")}),e}return a(r,[{key:"afterCreate",value:function(){var n=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=Et(),this.loadedCostTime=0,this.startCostTime=0,this.on(oe,function(){var e=n._state,t=e.autoplayStart,i=e.isFFSend;n.startCostTime=Et()-n.newPointTime,L.logInfo("[xgLogger]".concat(n.player.playerId," LOAD_START"),"autoplayStart:".concat(t," isFFSend:").concat(i," startCostTime:").concat(n.startCostTime," newPointTime").concat(n.newPointTime)),i||(e.isLs||n.emitLog("loadstart",{}),e.isLs=!0,e.isTimeUpdate=!1,e.isFFLoading=!0,n.pt=Et(),n.vt=0,n.fvt=0,n._initOnceEvents(),n._onWaitingLoadStart())}),this.on(te,function(){n.vt=Et(),n.fvt=n.vt-n.pt,n.loadedCostTime=n.vt-n.newPointTime;var e=n._state,t=e.isTimeUpdate,i=e.isFFSend,e=e.autoplayStart;L.logInfo("[xgLogger]".concat(n.player.playerId," LOADED_DATA"),"fvt:".concat(n.fvt," isTimeUpdate:").concat(n._state.isTimeUpdate," loadedCostTime:").concat(n.loadedCostTime)),(t||e)&&n._sendFF("loadedData"),i||n.emitLog("loadeddata",{}),n.suspendWaitingStatus("loadeddata")}),this.on(Y,this._onSeeking),this.on(X,this._onSeeked),this.on(fe,function(){n.endState("destroy")}),this.on(pe,function(){n.endState("urlChange"),L.logInfo("[xgLogger]".concat(n.player.playerId," URL_CHANGE")),n._state.isFFSend&&n._onReset()}),this.on([W,$],this._onPlaying),this.on(J,this._onWaiting),this.on(q,this._onError),this.on(Ee,function(){L.logInfo("[xgLogger]".concat(n.player.playerId," RESET")),n.endState("reset"),n._initOnceEvents(),n._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(ce,this._onAutoplayStart),this.off(Z,this._onTimeupdate),this.once(ce,this._onAutoplayStart),this.once(Z,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=Et();var t=this._state,i=t.isFFLoading,t=t.isFFSend;L.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(i," !isFFSend:").concat(!t)),0<this.vt&&i&&!t&&(L.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&A.clearTimeout(this,this._waittTimer),this._waittTimer=A.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),A.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){var t,i;this.seekingStart&&(i=(t=Et())-this.seekingStart,this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:i,endType:e}))}},{key:"suspendWaitingStatus",value:function(e){var t,i,n;this._waitTimer&&(A.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(A.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart&&(t=(n=Et())-this.waitingStart,i=n-this.fixedWaitingStart,n=this.config.waitTimeout,this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog("waitingEnd",{fixedCostTime:n<i?n:i,costTime:n<t?n:t,type:"loadeddata"===e?1:this._waitType,endType:2===this._waitType?"seek":e}))}},{key:"emitLog",value:function(e,t){var i=this.player;this.emit("xglog",u({t:Et(),host:A.getHostFromUrl(i.currentSrc),vtype:i.vtype,eventType:e,currentTime:this.player.currentTime,readyState:i.video.readyState,networkState:i.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),r}();function At(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Ot=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"registerIcons",value:function(){return{replay:At}}},{key:"afterCreate",value:function(){var i=this;st.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){i.player.replay()},{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(z,function(){if(i.playerConfig.loop||A.addClass(i.player.root,"replay"),!i.config.disable){i.show();var e=i.root.querySelector("path");if(e){var t=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof t&&-1<t.indexOf("none"))return null;e.setAttribute("transform",t)}}}),this.on(G,function(){i.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),A.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),t}(),Dt=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(){A.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(z,function(){e.isEndedShow&&A.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(Z,function(){e.onTimeUpdate()}),this.on(pe,function(){A.removeClass(e.root,"hide"),A.addClass(e.root,"xg-showplay"),e.once(Z,function(){e.onTimeUpdate()})})):this.on(G,function(){A.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?A.removeClass(this.root,"xg-showplay"):this.once(Z,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,e=e.hideCanplay,t=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(e?"xg-showplay":"",'" style="').concat(t,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),t}();function Rt(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Mt(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var jt={};function Nt(e){e?window.clearTimeout(e):Object.keys(jt).map(function(e){window.clearTimeout(jt[e].id),delete jt[e]})}var Ft=function(){h(n,st);var i=g(n);function n(e){var t;return m(this,n),c(d(t=i.call(this,e)),"onPlayerReset",function(){t.autoPlayStart=!1;var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),A.removeClass(t.root,e),t.show()}),c(d(t),"onAutoplayStart",function(){var e;t.autoPlayStart||(e="auto"===t.config.mode?"auto-hide":"hide",A.addClass(t.root,e),t.autoPlayStart=!0,t.onPlayPause("play"))}),t.autoPlayStart=!1,t}return a(n,[{key:"afterCreate",value:function(){var i=this,e=this.player,t=this.playerConfig;this.initIcons(),this.once(ae,function(){t&&(t.lang&&"en"===t.lang?A.addClass(e.root,"lang-is-en"):"jp"===t.lang&&A.addClass(e.root,"lang-is-jp"))}),this.on(ce,this.onAutoplayStart),t.autoplay||this.show(),this.on(ue,function(){var e="auto"===i.config.mode?"auto-hide":"hide";i.setAttr("data-state","play"),A.removeClass(i.root,e),i.show()}),this.on(G,function(){i.onPlayPause("play")}),this.on(K,function(){i.onPlayPause("pause")}),this.on(Ee,function(){i.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation();var t=i.player.paused;i.emitUserAction(e,"switch_play_pause",{props:"paused",from:t,to:!t})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:Rt,class:"xg-icon-play"},startPause:{icon:Mt,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(){A.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){A.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){A.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;this._animateId=function(e,t,i){var n=2<arguments.length&&void 0!==i?i:{start:null,end:null};return jt[e]&&window.clearTimeout(jt[e].id),jt[e]={},n.start&&n.start(),jt[e].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(jt[e].id),delete jt[e]},400),jt[e].id}("pauseplay",400,{start:function(){A.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){A.removeClass(t.root,"interact"),e||t.hide(),t._animateId=null}})}},{key:"endAnimate",value:function(){A.removeClass(this.root,"interact"),Nt(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<pt||(this.player.paused||6!==t.state?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,i=this.player;if(i&&!(i.state<6)&&this.autoPlayStart)return"show"===t.mode?(this.switchStatus(),void this.show()):"auto"!==t.mode?t.isShowPause&&i.paused&&!i.ended||t.isShowEnd&&i.ended?(this.switchStatus(),this.show(),void this.endAnimate()):t.disableAnimate?(this.switchStatus(),void this.hide()):void("play"===e?this.autoPlayStart?this.animate():this.hide():this.autoPlayStart&&!i.ended&&this.animate()):void this.switchStatus()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Nt(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(),Ht=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"render",value:function(){var e=this.config.innerHtml,t=A.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var i="",n=1;n<=12;n++)i+='<div class="xgplayer-enter-bar'.concat(n,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(i,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),t}();function Bt(e,t,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(e.i18nKeys[t],'">\n    ').concat(e.i18n[t],"\n    </div>")}catch(e){return'<div class="xg-tips hide"></div>'}}var Ut=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:10}}}]),t}();function Vt(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!Number.isNaN(t)&&t}var Gt=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Wt=Gt.length;function zt(e){if((e="string"==typeof e?document.querySelector(e):e)&&"object"===f(e)&&e.nodeType){var t=(d=e,window.getComputedStyle(d));if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<Wt;t++)e[Gt[t]]=0;return e}();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var n=i.isBorderBox="border-box"===t.boxSizing,o=0;o<Wt;o++){var r=Gt[o],s=t[r],s=parseFloat(s);i[r]=Number.isNaN(s)?0:s}var a=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,u=i.marginTop+i.marginBottom,h=i.borderLeftWidth+i.borderRightWidth,d=i.borderTopWidth+i.borderBottomWidth,e=n,n=Vt(t.width);!1!==n&&(i.width=n+(e?0:a+h));n=Vt(t.height);return!1!==n&&(i.height=n+(e?0:l+d)),i.innerWidth=i.width-(a+h),i.innerHeight=i.height-(l+d),i.outerWidth=i.width+c,i.outerHeight=i.height+u,i}var d}function Kt(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier===t)return n}}var qt={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Yt=function(){h(o,x);var n=g(o);function o(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return m(this,o),(t=n.call(this)).isEnabled=!0,t.isDragging=!1,t.isDown=!1,t.position={},t.downPoint={},t.dragPoint={x:0,y:0},t.startPos={x:0,y:0},t._root=e instanceof Element?e:document.querySelector(e),t._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),t._root&&t._handlerDom?(t._bindStartEvent(),t):p(t)}return a(o,[{key:"_bindStartEvent",value:function(){var t=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),qt[this._startKey].map(function(e){t["on".concat(e)]=t["on".concat(e)].bind(t)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;e&&((e=qt[this._startKey]).map(function(e){window.addEventListener(e,t["on".concat(e)])}),this._boundPointerEvents=e)}},{key:"_unbindPostStartEvents",value:function(){var t=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(e){window.removeEventListener(e,t["on".concat(e)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=Kt(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=Kt(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=Kt(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){this._root&&!this.isDown&&this.isEnabled&&(this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition(),t=zt(this._root),this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-t.height,this.startPos.maxX=window.innerWidth-t.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e))}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var i={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this.dragRealStart(e,t),i}},{key:"dragMove",value:function(e,t){var i,n;e=e||window.event,this.isDown&&(i=(n=this.startPos).x,n=n.y,t=(e=this._dragPointerMove(e,t)).x,e=e.y,t=this.checkContain("x",t,i),e=this.checkContain("y",e,n),this.position.x=i+t,this.position.y=n+e,this.dragPoint.x=t,this.dragPoint.y=e,this.emit("dragMove",this.position))}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)}},{key:"checkContain",value:function(e,t,i){return t+i<0?0-i:"x"===e&&t+i>this.startPos.maxX?this.startPos.maxX-i:"y"===e&&t+i>this.startPos.maxY?this.startPos.maxY-i:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),i=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(i)?0:i,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t,i=e.transform;0===i.indexOf("matrix")&&(t=i.split(","),e=0===i.indexOf("matrix3d")?12:4,i=parseInt(t[e],10),e=parseInt(t[1+e],10),this.position.x+=i,this.position.y+=e)}},{key:"_getPositionCoord",value:function(e,t){if(-1===e.indexOf("%"))return parseInt(e,10);var i=zt(this._root.parentNode);return i?parseFloat(e)/100*i[t]:0}}]),o}(),Xt=function(){h(n,st);var t=g(n);function n(e){var i;m(this,n),c(d(i=t.call(this,e)),"onCancelClick",function(e){i.exitMini(),i.isClose=!0}),c(d(i),"onCenterClick",function(e){var t=d(i).player;t.paused?t.play():t.pause()}),c(d(i),"onScroll",function(e){var t;!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50||(t=parseInt(A.getCss(i.player.root,"height")),t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?i.isMini||i.isClose||i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1))}),i.isMini=!1,i.isClose=!1;e=d(i).config;return i.pos={left:e.left<0?window.innerWidth-e.width-20:e.left,top:e.top<0?window.innerHeight-e.height-20:e.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return a(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(K,function(){e.setAttr("data-state","pause")}),this.on(G,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;this.config.disable||(this.config.isShowIcon&&t.controls.registerPlugin(Ut,{config:{onClick:function(){e.getMini()}}},Ut.pluginName),t=A.checkTouchSupport()?"touchend":"click",this.bind(".mini-cancel-btn",t,this.onCancelClick),this.bind(".play-icon",t,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Yt(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll))}},{key:"registerIcons",value:function(){return{play:{icon:Rt,class:"xg-icon-play"},pause:{icon:Mt,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e,t,i,n=this;this.isMini||(e=this.player,t=this.playerConfig,i=this.config.target||this.player.root,this.lastStyle={},A.addClass(e.root,"xgplayer-mini"),["width","height","top","left"].map(function(e){n.lastStyle[e]=i.style[e],i.style[e]="".concat(n.pos[e],"px")}),t.fluid&&(i.style["padding-top"]=""),this.emit(ve,!0),e.isMini=this.isMini=!0)}},{key:"exitMini",value:function(){var t=this;if(!this.isMini)return!1;var e=this.player,i=this.playerConfig,n=this.config.target||this.player.root;A.removeClass(e.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(e){n.style[e]=t.lastStyle[e]}),this.lastStyle=null,i.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]="".concat(100*i.height/i.width,"%")),this.emit(ve,!1),this.isMini=e.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=A.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      '.concat(Bt(this,"MINI_DRAG",this.playerConfig.isHideTips),'\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(),Zt={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Jt=["videoClick","videoDbClick"],$t=function(){h(r,Ze);var n=g(r);function r(){var o;m(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(o=n.call.apply(n,[this].concat(t))),"onMouseMove",function(e){var t=d(o),i=t.player,t=t.playerConfig;i.isActive||(i.focus({autoHide:!t.closeDelayBlur}),t.closeFocusVideoFocus||i.media.focus())}),c(d(o),"onMouseEnter",function(e){var t=d(o),i=t.playerConfig,t=t.player;i.closeFocusVideoFocus||t.media.focus(),i.closeDelayBlur?t.focus({autoHide:!1}):t.focus()}),c(d(o),"onMouseLeave",function(e){var t=o.playerConfig,i=t.closePlayerBlur,n=t.leavePlayerTime,t=t.closeDelayBlur;i||t||(n?o.player.focus({autoHide:!0,delay:n}):o.player.blur())}),c(d(o),"onVideoClick",function(e){var t=d(o),i=t.player,t=t.playerConfig;e.target&&t.closeVideoClick||e.target!==i.root&&e.target!==i.media&&e.target!==i.innerContainer&&e.target!==i.media.__canvas||(e.preventDefault(),t.closeVideoStopPropagation||e.stopPropagation(),o._clickCount++,o.clickTimer&&(clearTimeout(o.clickTimer),o.clickTimer=null),o.clickTimer=setTimeout(function(){o._clickCount&&(o._clickCount--,Ye(d(o),Jt[0],function(e,t){o.switchPlayPause(t.e)},{e:e,paused:i.paused}),clearTimeout(o.clickTimer),o.clickTimer=null)},300))}),c(d(o),"onVideoDblClick",function(e){var t=d(o),i=t.player,t=t.playerConfig;t.closeVideoDblclick||!e.target||e.target!==i.media&&e.target!==i.media.__canvas||(!t.closeVideoClick&&o._clickCount<2?o._clickCount=0:(o._clickCount=0,o.clickTimer&&(clearTimeout(o.clickTimer),o.clickTimer=null),e.preventDefault(),e.stopPropagation(),Ye(d(o),Jt[1],function(e,t){o.emitUserAction(t.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()},{e:e,fullscreen:i.fullscreen})))}),o}return a(r,[{key:"afterCreate",value:function(){var t=this;this._clickCount=0,Jt.map(function(e){t.__hooks[e]=null}),"mobile"===this.playerConfig.isMobileSimulateMode||"mobile"===F.device&&!F.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var t=this,e=this.player,i=e.video,n=e.root,e=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(Zt).map(function(e){n.addEventListener(e,t[Zt[e]],!1)}),e&&i&&i.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&0<t.duration&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var t=this,e=this.player,i=e.video,n=e.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),i.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(Zt).map(function(e){n.removeEventListener(e,t[Zt[e]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),r}(),Qt="pressend",ei="touchmove",ti="touchstart",ii="touchend",ni={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},oi={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ri(e){return e&&0<e.length?e[e.length-1]:null}var si=(a(ai,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,i=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger("press",e),t._pos.press=!0,t.__clearPress()},i.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,i=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",e);this.dbIntrvalId=setTimeout(function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger("click",e)},i.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var i=this.__handlers[e],n=-1,o=0;o<i.length;o++)if(i[o]===t){n=o;break}0<=n&&this.__handlers[e].splice(n,1)}}},{key:"trigger",value:function(t,i){this.__handlers[t]&&this.__handlers[t].map(function(e){try{e(i)}catch(e){console.error("trigger>>:".concat(t),e)}})}},{key:"destroy",value:function(){var t=this,i={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(i).forEach(function(e){t.root.removeEventListener(e,t[i[e]])})}}]),ai);function ai(e){var r=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};m(this,ai),c(this,"onTouchStart",function(e){var t=r._pos,i=r.root,n=ri(e.touches);t.x=n?parseInt(n.pageX,10):e.pageX,t.y=n?parseInt(n.pageX,10):e.pageX,t.start=!0,r.__setPress(e),i.addEventListener(r.events.end,r.onTouchEnd),i.addEventListener(r.events.cancel,r.onTouchCancel),i.addEventListener(r.events.move,r.onTouchMove),r.trigger(ti,e)}),c(this,"onTouchCancel",function(e){r.onTouchEnd(e)}),c(this,"onTouchEnd",function(e){var t=r._pos,i=r.root;r.__clearPress(),i.removeEventListener(r.events.cancel,r.onTouchCancel),i.removeEventListener(r.events.end,r.onTouchEnd),i.removeEventListener(r.events.move,r.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&r.trigger(Qt,e),r.trigger(ii,e),t.press||t.moving||r.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}),c(this,"onTouchMove",function(e){var t=r._pos,i=r.config,n=ri(e.touches),o=n?parseInt(n.pageX,10):e.pageX,n=n?parseInt(n.pageY,10):e.pageX,o=o-t.x,n=n-t.y;Math.abs(n)<i.miniStep&&Math.abs(o)<i.miniStep||(r.__clearPress(),t.press&&r.trigger(Qt,e),t.press=!1,t.moving=!0,r.trigger(ei,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(t).map(function(e){r.config[e]=t[e]}),this.root=e,this.events="mouse"===t.eventType?oi:ni,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}function li(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var ci="auto",ui=["videoClick","videoDbClick"],hi=function(){h(i,st);var t=g(i);function i(e){var u;return m(this,i),c(d(u=t.call(this,e)),"onTouchStart",function(e){var t=d(u),i=t.player,n=t.config,o=t.pos,t=t.playerConfig,e=u.getTouche(e);e&&!n.disableGesture&&0<u.duration&&!i.ended&&(o.isStart=!0,A.checkIsFunction(t.disableSwipeHandler)&&t.disableSwipeHandler(),u.find(".xg-dur").innerHTML=A.format(u.duration),t=u.root.getBoundingClientRect(),90===i.rotateDeg?(o.top=t.left,o.left=t.top,o.width=t.height,o.height=t.width):(o.top=t.top,o.left=t.left,o.width=t.width,o.height=t.height),t=parseInt(e.pageX-o.left,10),e=parseInt(e.pageY-o.top,10),o.x=90===i.rotateDeg?e:t,o.y=90===i.rotateDeg?t:e,o.scopeL=n.scopeL*o.width,o.scopeR=(1-n.scopeR)*o.width,o.scopeM1=o.width*(1-n.scopeM)/2,o.scopeM2=o.width-o.scopeM1)}),c(d(u),"onTouchMove",function(e){var t,i,n,o,r=u.getTouche(e),s=d(u),a=s.pos,l=s.config,c=s.player;r&&!l.disableGesture&&u.duration&&a.isStart&&(o=l.miniMoveStep,t=l.hideControlsActive,i=parseInt(r.pageX-a.left,10),n=parseInt(r.pageY-a.top,10),s=90===c.rotateDeg?n:i,r=90===c.rotateDeg?i:n,(Math.abs(s-a.x)>o||Math.abs(r-a.y)>o)&&(i=s-a.x,n=r-a.y,-1===(o=a.scope)&&(0===(o=u.checkScope(s,r,i,n,a))&&(t?c.blur():c.focus({autoHide:!1}),a.time||(a.time=parseInt(1e3*c.currentTime,10)+1e3*u.timeOffset)),a.scope=o),-1===o||0<o&&!l.gestureY||0===o&&!l.gestureX||(e.cancelable&&e.preventDefault(),u.executeMove(i,n,o,a.width,a.height),a.x=s,a.y=r)))}),c(d(u),"onTouchEnd",function(e){var t=d(u),i=t.player,n=t.pos,o=t.playerConfig;n.isStart&&(-1<n.scope&&e.cancelable&&e.preventDefault(),e=(t=u.config).disableGesture,t=t.gestureX,!e&&t?(u.endLastMove(n.scope),setTimeout(function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()},10)):n.time=0,n.scope=-1,u.resetPos(),A.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),u.changeAction(ci))}),c(d(u),"onRootTouchMove",function(e){!u.config.disableGesture&&u.config.gestureX&&u.checkIsRootTarget(e)&&(e.stopPropagation(),u.pos.isStart?u.onTouchMove(e):u.onTouchStart(e))}),c(d(u),"onRootTouchEnd",function(e){u.pos.isStart&&u.checkIsRootTarget(e)&&(e.stopPropagation(),u.onTouchEnd(e))}),u.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},u.timer=null,u}return a(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:li,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var i=this;ui.map(function(e){i.__hooks[e]=null});var e=this.playerConfig,t=this.config,n=this.player;!0===e.closeVideoDblclick&&(t.closedbClick=!0),this.resetPos(),A.isUndefined(e.disableGesture)||(t.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=A.createDom("xg-mask","",{},"xgmask"),n.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();e="mouse"===this.domEventType?"mouse":"touch";this.touch=new si(this.root,{eventType:e,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(e){e.preventDefault()}),n.root.addEventListener("touchmove",this.onRootTouchMove,!0),n.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Q,function(){var e=i.player,t=i.config;1e3*e.duration<t.moveDuration&&(t.moveDuration=1e3*e.duration)}),this.on([$,z],function(){var e=i.pos,t=e.time;!e.isStart&&0<t&&(i.pos.time=0)});var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};Object.keys(o).map(function(t){i.touch.on(t,function(e){i[o[t]](e)})}),t.disableActive||(n=n.plugins.progress)&&(n.addCallBack("dragmove",function(e){i.activeSeekNote(e.currentTime,e.forward)}),n.addCallBack("dragend",function(){i.changeAction(ci)}))}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;e&&e.usable&&(this.thumbnail=e.createThumbnail(null,"mobile-thumbnail"),(e=this.find(".time-preview")).insertBefore(this.thumbnail,e.children[0]))}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,e=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),e&&(this.find(".xg-bar").style.backgroundColor=e,this.find(".time-preview").style.color=e),this.config.disableTimeProgress&&A.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(e){t.pos[e]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);t=t.plugins.start;t&&t.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;e=e.touches&&0<e.touches.length?e.touches[e.touches.length-1]:e;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(e,t,i,n,o){var r=o.width,s=-1;if(e<0||r<e)return s;n=0===n?Math.abs(i):Math.abs(i/n);return 0<Math.abs(i)&&1.73<=n&&e>o.scopeM1&&e<o.scopeM2?s=0:(0===Math.abs(i)||n<=.57)&&(s=e<o.scopeL?1:e>o.scopeR?2:3),s}},{key:"executeMove",value:function(e,t,i,n,o){switch(i){case 0:this.updateTime(e/n*this.config.scopeM);break;case 1:this.updateBrightness(t/o);break;case 2:F.os.isIos||this.updateVolume(t/o)}}},{key:"endLastMove",value:function(e){var t=this,i=this.pos,n=this.player,o=this.config,i=(i.time-this.timeOffset)/1e3;0===e&&(n.seek(Number(i).toFixed(1)),o.hideControlsEnd?n.blur():n.focus(),this.timer=setTimeout(function(){t.pos.time=0},500)),this.changeAction(ci)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"clickHandler",value:function(e){var t=this.player,i=this.config,n=this.playerConfig;t.state<6?n.closeVideoClick||(this.sendUseAction(A.createEvent("click")),t.play()):!i.closedbClick||n.closeVideoClick?t.isActive?t.blur():t.focus():n.closeVideoClick||((t.isActive||i.focusVideoClick)&&(this.sendUseAction(A.createEvent("click")),this.switchPlayPause()),t.focus())}},{key:"dbClickHandler",value:function(e){var t=this.config,i=this.player;!t.closedbClick&&6<=i.state&&(this.sendUseAction(A.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,t=this.player;Ye(this,ui[0],function(e,t){i.clickHandler(t.e)},{e:e,paused:t.paused})}},{key:"onDbClick",value:function(e){var i=this,t=this.player;Ye(this,ui[1],function(e,t){i.dbClickHandler(t.e)},{e:e,paused:t.paused})}},{key:"onPress",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:n.playbackRate,to:i.pressRate}),n.playbackRate=i.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:n.playbackRate,to:t.rate}),n.playbackRate=t.rate,t.rate=1,this.changeAction(ci))}},{key:"updateTime",value:function(e){var t=this.player,i=this.config,n=this.player.duration;e=Number(e.toFixed(4));var o=parseInt(e*i.moveDuration,10)+this.timeOffset,o=(o+=this.pos.time)<0?0:1e3*n<o?1e3*n-200:o;t.getPlugin("time")&&t.getPlugin("time").updateTime(o/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(o/1e3/this.duration,!0),this.activeSeekNote(o/1e3,0<e),i.isTouchingSeek&&t.seek(Number((o-this.timeOffset)/1e3).toFixed(1)),this.pos.time=o}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,i=this.pos;e=parseInt(100*e,10),i.volume+=e,Math.abs(i.volume)<10||(e=10<(e=parseInt(10*t.volume,10)-parseInt(i.volume/10,10))?10:e<1?0:e,t.volume=e/10,i.volume=0)}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,i=this.config,n=this.xgMask,e=(e=t.light+.8*e)>i.maxDarkness?i.maxDarkness:e<0?0:e;n&&(n.style.backgroundColor="rgba(0,0,0,".concat(e,")")),t.light=e}},{key:"activeSeekNote",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.player,n=this.config,o=!(this.duration!==1/0&&0<this.duration);!e||"number"!=typeof e||o||n.disableActive||(e<0?e=0:e>i.duration&&(e=i.duration-.2),this.changeAction("seeking"),(i=i.plugins.start)&&i.focusHide(),this.find(".xg-dur").innerHTML=A.format(this.duration),this.find(".xg-cur").innerHTML=A.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?A.removeClass(this.find(".xg-seek-show"),"xg-back"):A.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e))}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<gt)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}();function di(e){var t=e.tagName;return"INPUT"===t||"TEXTAREA"===t||e.isContentEditable}var fi=function(){h(o,Ze);var n=g(o);function o(){var l;m(this,o);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(l=n.call.apply(n,[this].concat(t))),"onBodyKeyDown",function(e){var t,i,n,o,r,s,a;l.player&&(i=(t=e||window.event).keyCode,n=(s=d(l))._keyState,o=s.player,r=(a=l.config).disable,s=a.disableBodyTrigger,a=a.isIgnoreUserActive,r||s||!o.isUserActive&&!a||di(t.target)||!l.checkIsVisible()||t.metaKey||t.altKey||t.ctrlKey?n.isBodyKeyDown=!1:(e.repeat||n.isKeyDown||((t.target===document.body||l.config.isGlobalTrigger&&!di(t.target))&&l.checkCode(i,!0)&&(n.isBodyKeyDown=!0),document.addEventListener("keyup",l.onBodyKeyUp)),n.isBodyKeyDown&&l.handleKeyDown(t)))}),c(d(l),"onBodyKeyUp",function(e){l.player&&(document.removeEventListener("keyup",l.onBodyKeyUp),l.handleKeyUp(e))}),c(d(l),"onKeydown",function(e){if(l.player){var t=e||window.event,e=d(l)._keyState;if(!t.repeat){if(l.config.disable||l.config.disableRootTrigger||t.metaKey||t.altKey||t.ctrlKey)return;if(!l.player.isUserActive&&!l.config.isIgnoreUserActive)return;!t||37!==t.keyCode&&!l.checkCode(t.keyCode)||t.target!==l.player.root&&t.target!==l.player.video&&t.target!==l.player.controls.el||(e.isKeyDown=!0),l.player.root.addEventListener("keyup",l.onKeyup)}e.isKeyDown&&l.handleKeyDown(t)}}),c(d(l),"onKeyup",function(e){l.player&&(l.player.root.removeEventListener("keyup",l.onKeyup),l.handleKeyUp(e))}),l}return a(o,[{key:"mergekeyCodeMap",value:function(){var i=this,n=this.config.keyCodeMap;n&&Object.keys(n).map(function(t){i.keyCodeMap[t]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(e){n[t][e]&&(i.keyCodeMap[t][e]=n[t][e])}):i.keyCodeMap[t]=n[t]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,i=e.top,n=e.bottom,e=window.innerHeight;return!(i<0&&i<0-.9*t||0<n&&.9*t<n-e)}},{key:"checkCode",value:function(t,i){var n=this,o=!1;return Object.keys(this.keyCodeMap).map(function(e){n.keyCodeMap[e]&&t===n.keyCodeMap[e].keyCode&&!n.keyCodeMap[e].disable&&(o=!i||i&&!n.keyCodeMap[e].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var t,i,n=this.player;n.volume<=0||(t=parseFloat((n.volume-.1).toFixed(1)),i={volume:{from:n.volume,to:t}},this.emitUserAction(e,"change_volume",{props:i}),n.volume=0<=t?t:0)}},{key:"upVolume",value:function(e){var t,i,n=this.player;1<=n.volume||(t=parseFloat((n.volume+.1).toFixed(1)),i={volume:{from:n.volume,to:t}},this.emitUserAction(e,"change_volume",{props:i}),n.volume=t<=1?t:1)}},{key:"seek",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,o=t.duration,r=t.offsetDuration,t=t.timeSegments,n=-1<n?n:i,r=r||o,o=e.repeat&&4<=this.seekStep?parseInt(this.seekStep/2,10):this.seekStep;n+o<=r?n+=o:n=r;t=A.getCurrentTimeByOffset(n,t);this.emitUserAction(e,"seek",{props:{currentTime:{from:i,to:t}}}),this.player.currentTime=t}},{key:"seekBack",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,t=t.timeSegments,n=(-1<n?n:i)-(e.repeat?parseInt(this.seekStep/2,10):this.seekStep),t={currentTime:{from:i,to:n=A.getCurrentTimeByOffset(n=n<0?0:n,t)}};this.emitUserAction(e,"seek",{props:t}),this.player.currentTime=n}},{key:"changePlaybackRate",value:function(e){var t=this._keyState,i=this.config,n=this.player;0===t.playbackRate&&(t.playbackRate=n.playbackRate,n.playbackRate=i.playbackRate)}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,i=t.fullscreen,n=t.cssfullscreen;i&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:i,to:!i}),t.exitFullscreen()),n&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:n,to:!n}),t.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var t=this._keyState;if(e.repeat){t.isPress=!0;var i=Date.now();if(i-t.tt<200)return;t.tt=i}(i=e).preventDefault(),i.returnValue=!1,this.handleKeyCode(e.keyCode,e,t.isPress)}},{key:"handleKeyUp",value:function(e){var t=this._keyState;0<t.playbackRate&&(this.player.playbackRate=t.playbackRate,t.playbackRate=0),t.isKeyDown=!1,t.isPress=!1,t.tt=0}},{key:"handleKeyCode",value:function(e,t,i){for(var n=Object.keys(this.keyCodeMap),o=0;o<n.length;o++){var r=this.keyCodeMap[n[o]],s=r.action,a=r.keyCode,l=r.disable,c=r.pressAction,r=r.disablePress;if(a===e){l||i&&r||("function"==typeof(c=i&&c||s)?s(t,this.player,i):"string"==typeof c&&"function"==typeof this[c]&&this[c](t,this.player,i),this.emit(xe,u({key:n[o],target:t.target,isPress:i},this.keyCodeMap[n[o]])));break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!1}}}]),o}();function pi(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var gi=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"registerIcons",value:function(){return{loadingIcon:pi}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:it.ROOT}}}]),t}(),yi=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],mi=(a(_i,[{key:"updateDuration",value:function(e){var t=this;this.duration=e;var i=0,e=this.fragments;this.fragments=e.map(function(e){return e.start=parseInt(i,10),e.end=parseInt(i+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),i+=e.percent*t.duration,e})}},{key:"updateProgress",value:function(){var i,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"played",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},o=this.progressList,r=this.fragments;o.length<1||(i=t.newIndex,e=t.curIndex,t=t.millisecond,i!==e&&o.map(function(e,t){t<i?e[n].style.width="100%":i<t&&(e[n].style.width=0)}),r=r[i],r=0===t?0:(t-r.start)/r.duration,o[i][n].style.width=r<0?0:"".concat(100*r,"%"))}},{key:"updateFocus",value:function(e){var t;!this.fragConfig.fragAutoFocus||this.fragments.length<2||(e?0<=(e=this.findIndex(1e3*e.currentTime,this.focusIndex))&&e!==this.focusIndex&&(-1<this.focusIndex&&this.unHightLight(this.focusIndex),this.setHightLight(e),t={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]},this.focusIndex=e,this._callBack&&this._callBack(t)):-1<this.focusIndex&&(this.unHightLight(this.focusIndex),t={index:-1,preIndex:this.focusIndex,fragment:null},this._callBack&&this._callBack(t),this.focusIndex=-1))}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=1<arguments.length?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var i=this.playedIndex,t=this.cachedIndex;if("Undefined"!==A.typeOf(e.played)){var n=this.findIndex(1e3*e.played,i);if(n<0)return;this.updateProgress("played",{newIndex:n,curIndex:i,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=n}"Undefined"!==A.typeOf(e.cached)&&((n=this.findIndex(1e3*e.cached,t))<0||(this.updateProgress("cached",{newIndex:n,curIndex:t,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=n))}},{key:"findIndex",value:function(e,t){var i=this.fragments;if(!i||0===i.length)return-1;if(1===i.length)return 0;if(-1<t&&t<i.length&&e>i[t].start&&e<i[t].end)return t;if(e>i[i.length-1].start)return i.length-1;for(var n=0;n<i.length;n++)if(e>i[n].start&&e<=i[n].end){t=n;break}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(A.hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)A.removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return A.addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(t){var i=this;if(Object.keys(this.fragConfig).forEach(function(e){void 0!==t[e]&&(i.fragConfig[e]=t[e])}),t.fragments){if(this.fragments=0===t.fragments.length?[{percent:1}]:t.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;0<e.length;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var e,i,n,o=this,r=this.style.progressColor;return this.root||(this.root=A.createDom("xg-inners","",{},"progress-list")),this.fragments&&(e=this.fragConfig,i=e.fragClass,n=e.fragFocusClass,this.progressList=this.fragments.map(function(e){var t=A.createDom("xg-inner","",{style:(r?"background:".concat(r,"; flex: "):"flex: ").concat(e.percent)},"".concat(e.isFocus?n:""," xgplayer-progress-inner ").concat(i));return o.root.appendChild(t),yi.forEach(function(e){t.appendChild(A.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(o.style[e.styleKey],"; width:0;"):"width:0;"},e.className))}),{cached:t.children[0],played:t.children[1]}})),this.root}}]),_i),vi={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},ki=function(){h(i,st);var t=g(i);function i(e){var a;return m(this,i),c(d(a=t.call(this,e)),"onMoveOnly",function(e,t){var i=d(a),n=i.pos,o=i.config,r=i.player,i=t;if(e){A.event(e);t=A.getEventPos(e,r.zoom),t=90===r.rotateDeg?t.clientY:t.clientX;if(n.moving&&Math.abs(n.x-t)<o.miniMoveStep)return;n.moving=!0,n.x=t,i=a.computeTime(e,t)}a.triggerCallbacks("dragmove",i,e),a._updateInnerFocus(i)}),c(d(a),"onBodyClick",function(e){a.pos.isLocked&&(a.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())}),c(d(a),"_mouseDownHandler",function(e,t){a._state.time=t.currentTime,a.updateWidth(t.currentTime,t.seekTime,t.percent,0),a._updateInnerFocus(t)}),c(d(a),"_mouseUpHandler",function(e,t){d(a).pos.moving&&a.updateWidth(t.currentTime,t.seekTime,t.percent,2)}),c(d(a),"_mouseMoveHandler",function(e,t){var i=d(a),n=i._state,o=i.pos,r=i.config,i=i.player;n.time<t.currentTime?t.forward=!0:t.forward=!1,n.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,r.isPauseMoving&&i.pause(),a.triggerCallbacks("dragstart",t,e),a.emitUserAction("drag","dragstart",t)),a.updateWidth(t.currentTime,t.seekTime,t.percent,1),a.triggerCallbacks("dragmove",t,e),a._updateInnerFocus(t)}),c(d(a),"onMouseDown",function(e){var t=d(a),i=t._state,n=t.player,o=t.pos,r=t.config,s=t.playerConfig,t=A.getEventPos(e,n.zoom),t=90===n.rotateDeg?t.clientY:t.clientX;if(!(n.isMini||r.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){if(n.duration||n.isPlaying){e.stopPropagation(),a.focus(),A.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),A.checkIsFunction(r.onMoveStart)&&r.onMoveStart(),A.event(e),o.x=t,o.isDown=!0,o.moving=!1,i.prePlayTime=n.currentTime,n.focus({autoHide:!1}),a.isProgressMoving=!0,A.addClass(a.progressBtn,"active");t=a.computeTime(e,t);return t.prePlayTime=i.prePlayTime,a._mouseDownHandlerHook(e,t),"touchstart"===e.type?(a.root.addEventListener("touchmove",a.onMouseMove),a.root.addEventListener("touchend",a.onMouseUp)):(a.unbind("mousemove",a.onMoveOnly),document.addEventListener("mousemove",a.onMouseMove,!1),document.addEventListener("mouseup",a.onMouseUp,!1)),!0}n.play()}}),c(d(a),"onMouseUp",function(e){var t=d(a),i=t.player,n=t.config,o=t.pos,r=t.playerConfig,t=t._state;e.stopPropagation(),e.preventDefault(),A.checkIsFunction(r.enableSwipeHandler)&&r.enableSwipeHandler(),A.checkIsFunction(n.onMoveEnd)&&n.onMoveEnd(),A.event(e),A.removeClass(a.progressBtn,"active");n=a.computeTime(e,o.x);n.prePlayTime=t.prePlayTime,o.moving?(a.triggerCallbacks("dragend",n,e),a.emitUserAction("drag","dragend",n)):(a.triggerCallbacks("click",n,e),a.emitUserAction("click","click",n)),a._mouseUpHandlerHook(e,n),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,o.isLocked=!0,t.prePlayTime=0,t.time=0,"touchend"===e.type?(a.root.removeEventListener("touchmove",a.onMouseMove),a.root.removeEventListener("touchend",a.onMouseUp),a.blur()):(document.removeEventListener("mousemove",a.onMouseMove,!1),document.removeEventListener("mouseup",a.onMouseUp,!1),o.isEnter?"mobile"!==r.isMobileSimulateMode&&a.bind("mousemove",a.onMoveOnly):a.onMouseLeave(e)),A.setTimeout(d(a),function(){a.resetSeekState()},10),i.focus()}),c(d(a),"onMouseMove",function(e){var t=d(a),i=t._state,n=t.pos,o=t.player,r=t.config;A.checkTouchSupport()&&e.preventDefault(),A.event(e);t=A.getEventPos(e,o.zoom),o=90===o.rotateDeg?t.clientY:t.clientX,t=Math.abs(n.x-o);n.moving&&t<r.miniMoveStep||!n.moving&&t<r.miniStartStep||(n.x=o,(o=a.computeTime(e,o)).prePlayTime=i.prePlayTime,a._mouseMoveHandlerHook(e,o))}),c(d(a),"onMouseOut",function(e){a.triggerCallbacks("mouseout",null,e)}),c(d(a),"onMouseOver",function(e){a.triggerCallbacks("mouseover",null,e)}),c(d(a),"onMouseEnter",function(e){var t=d(a),i=t.player,t=t.pos;t.isDown||t.isEnter||i.isMini||!i.config.allowSeekAfterEnded&&i.ended||(t.isEnter=!0,a.bind("mousemove",a.onMoveOnly),a.bind("mouseleave",a.onMouseLeave),A.event(e),t=A.getEventPos(e,i.zoom),t=90===i.rotateDeg?t.clientY:t.clientX,t=a.computeTime(e,t),a.triggerCallbacks("mouseenter",t,e),a.focus())}),c(d(a),"onMouseLeave",function(e){a.triggerCallbacks("mouseleave",null,e),a.unlock(),a._updateInnerFocus(null)}),c(d(a),"onVideoResize",function(){var e=a.pos,t=e.x,i=e.isDown;e.isEnter&&!i&&(t=a.computeTime(null,t),a.onMoveOnly(null,t))}),a.useable=!1,a.isProgressMoving=!1,a.__dragCallBacks=[],a._state={now:-1,direc:0,time:0,prePlayTime:-1},a._disableBlur=!1,a}return a(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,e=e.currentTime;return 0<=t?t:e+this.timeOffset}},{key:"changeState",value:function(){this.useable=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=u(u({fragments:e=!e||0===e.length?[{percent:1}]:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),{},{actionCallback:function(e){t.emitUserAction("fragment_focus","fragment_focus",e)}});this.innerList?this.innerList.reset(e):(this.innerList=new mi(e),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(e){t[e]=t.innerList[e].bind(t.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e,t,i,n=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer"),e=(i=this.config).fragFocusClass,t=i.fragAutoFocus,i=i.fragClass,this._initInner(this.config.fragments,{fragFocusClass:e,fragAutoFocus:t,fragClass:i,style:this.playerConfig.commonStyle||{}}),"mobile"===F.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Q,function(){n.onMouseLeave()}),this.on(Z,function(){n.onTimeupdate()}),this.on(X,function(){n.onTimeupdate(),n.onCacheUpdate()}),this.on(ne,function(){n.onCacheUpdate()}),this.on(z,function(){n.onCacheUpdate(!0),n.onTimeupdate(!0),n._state.now=0}),this.on(re,function(){n.onReset()}),this.on(be,function(){n.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle())}},{key:"setConfig",value:function(t){var i=this,n=null;Object.keys(t).forEach(function(e){i.config[e]=t[e],"fragments"===e&&(n=t[e])}),n&&this._initInner(n,t)}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,i=this.progressBtn;t&&("string"==typeof t?i.style.boxShadow=t:"object"===f(t)&&Object.keys(t).map(function(e){i.style[e]=t[e]}))}},{key:"triggerCallbacks",value:function(e,i,n){0<this.__dragCallBacks.length&&this.__dragCallBacks.map(function(t){if(t&&t.handler&&t.type===e)try{t.handler(i,n)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(t," error"),e)}})}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(i,n){var e=this.__dragCallBacks,o=-1;e.map(function(e,t){e&&e.type===i&&e.handler===n&&(o=t)}),-1<o&&e.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;t.isEnter=!1,e.isMini||(this.unbind("mousemove",this.onMoveOnly),t.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,e=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",A.stopPropagation),t.center&&t.center.addEventListener("touchend",A.stopPropagation))),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==e.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),A.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),A.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,i,n){var o=this.config,r=this.player;o.isCloseClickSeek&&0===n||(t=t=t>=r.duration?r.duration-o.endedDiff:Number(t).toFixed(1),this.updatePercent(i),this.updateTime(e),(1!==n||o.isDragingSeek&&"audio"!==r.config.mediaType)&&(this._state.now=t,this._state.direc=t>r.currentTime?0:1,r.seek(t)))}},{key:"computeTime",value:function(e,t){var i,n=this.player,o=this.root.getBoundingClientRect(),r=o.width,s=o.height,a=o.top,o=o.left,a=90===n.rotateDeg?(i=s,a):(i=r,o),r=t-a,o=(o=(r=i<r?i:r<0?0:r)/i)<0?0:1<o?1:o,t=parseInt(o*this.offsetDuration*1e3,10)/1e3;return{percent:o,currentTime:t,seekTime:A.getCurrentTimeByOffset(t,n.timeSegments),offset:r,width:i,left:a,e:e}}},{key:"updateTime",value:function(e){var t=this.player,i=this.duration;i<e?e=i:e<0&&(e=0);t=t.plugins.time;t&&t.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){var i;this.isProgressMoving=!0,this.config.disable||(this.progressBtn.style.left="".concat(100*(e=1<e?1:e<0?0:e),"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration),(i=this.player.plugins.miniprogress)&&i.update({played:e*this.offsetDuration},this.offsetDuration))}},{key:"onTimeupdate",value:function(e){var t=this.player,i=this._state,n=this.offsetDuration;if(!t.isSeeking&&!this.isProgressMoving){if(-1<i.now){t=parseInt(1e3*i.now,10)-parseInt(1e3*t.currentTime,10);if(0===i.direc&&300<t||1===i.direc&&-300<t)return void(i.now=-1);i.now=-1}i=this.currentTime,i=A.adjustTimeByDuration(i,n,e);this.innerList.update({played:i},n),this.progressBtn.style.left="".concat(i/n*100,"%");e=this.player.plugins.miniprogress;e&&e.update({played:i},n)}}},{key:"onCacheUpdate",value:function(e){var t=this.player,i=this.duration;t&&(t=t.bufferedPoint.end,t=A.adjustTimeByDuration(t,i,e),this.innerList.update({cached:t},i),(e=this.player.plugins.miniprogress)&&e.update({cached:t},i))}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var i=this.domEventType;"touch"!==i&&"compatible"!==i||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",A.stopPropagation),t.center&&t.center.removeEventListener("touchend",A.stopPropagation))),"mouse"!==i&&"compatible"!==i||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:vi.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return vi}}]),i}(),Ci=function(){h(r,st);var o=g(r);function r(){var t;m(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return c(d(t=o.call.apply(o,[this].concat(i))),"_onMouseenter",function(e){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),c(d(t),"_onMouseLeave",function(e){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return a(r,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),r}(),bi=function(){h(i,Ci);var e=g(i);function i(){return m(this,i),e.apply(this,arguments)}return a(i,[{key:"afterCreate",value:function(){var e=this;y(l(i.prototype),"afterCreate",this).call(this);var t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([K,q,re],function(){e.animate(t.paused)}),this.on(G,function(){e.animate(t.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:Rt,class:"xg-icon-play"},pause:{icon:Mt,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t,i;this.player&&(t=this.i18nKeys,i=this.find(".xg-tips"),e?(this.setAttr("data-state","pause"),i&&this.changeLangTextKey(i,t.PLAY_TIPS)):(this.setAttr("data-state","play"),i&&this.changeLangTextKey(i,t.PAUSE_TIPS)))}},{key:"destroy",value:function(){y(l(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(Bt(this,"PLAY_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:0,disable:!1}}}]),i}();function _i(e){m(this,_i),this.fragments=e.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=e.actionCallback,this.fragConfig={fragFocusClass:e.fragFocusClass||"inner-focus-point",fragAutoFocus:!!e.fragAutoFocus,fragClass:e.fragClass||""},this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}function wi(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var Ti=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.onClick=function(e){e.preventDefault(),e.stopPropagation(),t.config.onClick(e)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:wi,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){A.addClass(this.root,"show")}},{key:"hide",value:function(){A.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:it.ROOT_TOP,index:0}}}]),t}();function xi(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Si(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Ei=function(){h(r,Ci);var o=g(r);function r(){var t;m(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return c(d(t=o.call.apply(o,[this].concat(i))),"_onOrientationChange",function(e){t.player.fullscreen&&t.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return a(r,[{key:"afterCreate",value:function(){var i=this;y(l(r.prototype),"afterCreate",this).call(this);var e=this.config,t=this.playerConfig;e.disable||(e.target&&(this.playerConfig.fullscreenTarget=this.config.target),e=A.getFullScreenEl(),t.fullscreenTarget===e&&this.player.getFullscreen().catch(function(e){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(e){var t=i.player.fullscreen;i.emitUserAction(e,"switch_fullscreen",{prop:"fullscreen",from:t,to:!t})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(ye,function(e){var t=i.find(".xg-tips");t&&i.changeLangTextKey(t,e?i.i18nKeys.EXITFULLSCREEN_TIPS:i.i18nKeys.FULLSCREEN_TIPS),i.animate(e)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Ti,options:{config:{onClick:function(e){i.handleFullscreen(e)}}}})),"mobile"===F.device&&window.addEventListener("orientationchange",this._onOrientationChange))}},{key:"registerIcons",value:function(){return{fullscreen:{icon:xi,class:"xg-get-fullscreen"},exitFullscreen:{icon:Si,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){y(l(r.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===F.device?"touchend":"click",this.handleFullscreen),"mobile"===F.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,e=this.config;!0===e.useCssFullscreen||"function"==typeof e.useCssFullscreen&&e.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):e.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):e.switchCallback&&"function"==typeof e.switchCallback?e.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen().catch(function(e){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){y(l(r.prototype),"show",this).call(this)}},{key:"hide",value:function(){y(l(r.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(Bt(this,"FULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),r}(),Pi=function(){h(i,st);var t=g(i);function i(e){return m(this,i),(e=t.call(this,e)).isActiving=!1,e}return a(i,[{key:"duration",get:function(){var e=this.player,t=e.offsetDuration,e=e.duration;return this.playerConfig.customDuration||t||e}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,e=e.currentTime;return 0<=t?t:e}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([Q,X,Z],function(){e.onTimeUpdate()}),this.on(z,function(){e.onTimeUpdate(!0)}),this.on(re,function(){e.onReset()}))}},{key:"show",value:function(){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="block"),void(this.centerDurDom&&(this.centerDurDom.style.display="block"));this.root.style.display="block"}},{key:"hide",value:function(){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="none"),void(this.centerDurDom&&(this.centerDurDom.style.display="none"));this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var t=this.player,i=this.config,n=this.duration;i.disable||this.isActiving||!t.hasStart||(t=this.currentTime+this.timeOffset,t=A.adjustTimeByDuration(t,n,e),"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(A.format(t)),n!==1/0&&0<n&&(this.centerDurDom.innerHTML=A.format(n))):(this.timeDom.innerHTML=this.minWidthTime(A.format(t)),n!==1/0&&0<n&&(this.durationDom.innerHTML=A.format(n))))}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(A.format(0)),this.centerDurDom.innerHTML=A.format(0)):(this.timeDom.innerHTML=this.minWidthTime(A.format(0)),this.durationDom.innerHTML=A.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;e.controls&&e.controls.center&&(e=e.controls.center,this.centerCurDom=A.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=A.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),0<e.children.length?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom))}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(A.hide(this.durationDom),A.hide(this.timeDom),A.hide(this.find(".time-separator")),A.show(this.find(".time-live-tag"))):A.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(A.hide(this.durationDom),A.hide(this.timeDom),A.hide(this.find(".time-separator")),A.show(this.find(".time-live-tag"))):(A.hide(this.find(".time-live-tag")),A.show(this.find(".time-separator")),A.show(this.durationDom),A.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=this.minWidthTime(A.format(e)):this.centerCurDom.innerHTML=this.minWidthTime(A.format(e)))}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(e){return'<span class="time-min-width">'.concat(e,"</span>")}).join(":")}},{key:"resetActive",value:function(){function e(){t.isActiving=!1}var t=this,i=this.player;this.off(X,e),i.isSeeking?this.once(X,e):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(),Li=function(){h(o,Ze);var n=g(o);function o(){var r;m(this,o);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(r=n.call.apply(n,[this].concat(t))),"_onDurationChange",function(){r.updateSegments();var e=r.player,t=e.currentTime,i=e.timeSegments;r._checkIfEnabled(i)&&(e=A.getIndexByTime(t,i),t=A.getOffsetCurrentTime(t,i,e),r.player.offsetCurrentTime=t,r.changeIndex(e,i))}),c(d(r),"_onLoadedData",function(){var e,t=r.player.timeSegments;r._checkIfEnabled(t)&&(e=A.getOffsetCurrentTime(0,t),r.player.offsetCurrentTime=e,r.changeIndex(0,t),0<r.curPos.start&&(r.player.currentTime=r.curPos.start))}),c(d(r),"_onTimeupdate",function(){var e,t,i=r.player,n=i.currentTime,o=i.timeSegments;r._checkIfEnabled(o)&&(e=o.length,r.lastCurrentTime=n,(t=A.getIndexByTime(n,o))!==r.curIndex&&r.changeIndex(t,o),i=A.getOffsetCurrentTime(n,o,t),r.player.offsetCurrentTime=i,r.curPos&&(i=(o=r.curPos).start,o=o.end,n<i?r.player.currentTime=i:o<n&&e-1<=t&&r.player.pause()))}),c(d(r),"_onSeeking",function(){var e=r.player,t=e.currentTime,i=e.timeSegments;r._checkIfEnabled(i)&&(t<i[0].start?r.player.currentTime=i[0].start:t>i[i.length-1].end?r.player.currentTime=i[i.length-1].end:0<=(e=A.getIndexByTime(t,i))&&(0<=(i=r.getSeekTime(t,r.lastCurrentTime,e,i))&&(r.player.currentTime=i)))}),c(d(r),"_onPlay",function(){var e=r.player,t=e.currentTime,e=e.timeSegments;r._checkIfEnabled(e)&&t>=e[e.length-1].end&&(r.player.currentTime=e[0].start)}),r}return a(o,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(Q,this._onDurationChange),this.on(te,this._onLoadedData),this.on(Z,this._onTimeupdate),this.on(Y,this._onSeeking),this.on(G,this._onPlay)}},{key:"setConfig",value:function(t){var e,i=this;t&&((e=Object.keys(t)).length<1||(e.forEach(function(e){i.config[e]=t[e]}),this.updateSegments()))}},{key:"updateSegments",value:function(){var e=this.config,t=e.disable,i=e.segments,e=this.player;t||!i||0===i.length?(e.timeSegments=[],e.offsetDuration=0,e.offsetCurrentTime=-1):(i=this.formatTimeSegments(i,e.duration),e.timeSegments=i,e.offsetDuration=0<i.length?i[i.length-1].duration:0)}},{key:"formatTimeSegments",value:function(e,o){var r=[];return e?(e.sort(function(e,t){return e.start-t.start}),e.forEach(function(e,t){var i,n={};n.start=e.start<0?0:e.start,n.end=0<o&&e.end>o?o:e.end,0<o&&n.start>o||(r.push(n),i=n.end-n.start,0===t?(n.offset=e.start,n.cTime=0,n.segDuration=i,n.duration=i):(t=r[t-1],n.offset=t.offset+(n.start-t.end),n.cTime=t.duration+t.cTime,n.segDuration=i,n.duration=t.duration+i))}),r):[]}},{key:"getSeekTime",value:function(e,t,i,n){var o=-1,r=n[i],s=r.start,r=r.end;if(s<=e&&e<=r)return o;o=e-t;return o<0&&e<s?0<=i-1?n[i-1].end+o+(s<t?t-s:0):0:-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,t){0<=(this.curIndex=e)&&0<t.length?this.curPos=t[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),o}();function Ii(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Ai(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Oi(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Di=function(){h(r,st);var n=g(r);function r(){var o;m(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(o=n.call.apply(n,[this].concat(t))),"onBarMousedown",function(e){var t=d(o).player,i=o.find(".xgplayer-bar");A.event(e);var n=i.getBoundingClientRect(),i=A.getEventPos(e,t.zoom),t=n.height-(i.clientY-n.top);if(i.h=t,i.barH=n.height,o.pos=i,!(t<-2))return o.updateVolumePos(t,e),document.addEventListener("mouseup",o.onBarMouseUp),!(o._d.isStart=!0)}),c(d(o),"onBarMouseMove",function(e){var t,i,n=d(o)._d;n.isStart&&(t=(i=d(o)).pos,i=i.player,e.preventDefault(),e.stopPropagation(),A.event(e),i=A.getEventPos(e,i.zoom),n.isMoving=!0,(i=t.h-i.clientY+t.clientY)>t.barH||o.updateVolumePos(i,e))}),c(d(o),"onBarMouseUp",function(e){A.event(e),document.removeEventListener("mouseup",o.onBarMouseUp);e=d(o)._d;e.isStart=!1,e.isMoving=!1}),c(d(o),"onMouseenter",function(e){o._d.isActive=!0,o.focus(),o.emit("icon_mouseenter",{pluginName:o.pluginName})}),c(d(o),"onMouseleave",function(e){o._d.isActive=!1,o.unFocus(100,!1,e),o.emit("icon_mouseleave",{pluginName:o.pluginName})}),c(d(o),"onVolumeChange",function(e){var t,i;o.player&&(t=(i=o.player).muted,i=i.volume,o._d.isMoving||(o.find(".xgplayer-drag").style.height=t||0===i?"4px":"".concat(100*i,"%"),o.config.showValueLabel&&o.updateVolumeValue()),o.animate(t,i))}),o}return a(r,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:Ai,class:"xg-volume-small"},volumeLarge:{icon:Ii,class:"xg-volume"},volumeMuted:{icon:Oi,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e,t,i=this;this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.config.disable||(this.initIcons(),e=(t=this.playerConfig).commonStyle,t=t.volume,e.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=e.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(e){i.changeMuted(e)},{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==F.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(ee,this.onVolumeChange),this.once(te,this.onVolumeChange),"Number"!==A.typeOf(t)&&(this.player.volume=this.config.default),this.onVolumeChange())}},{key:"updateVolumePos",value:function(e,t){var i=this.player,n=this.find(".xgplayer-drag"),o=this.find(".xgplayer-bar");o&&n&&(o=parseInt(e/o.getBoundingClientRect().height*1e3,10),n.style.height="".concat(e,"px"),e=Math.max(Math.min(o/1e3,1),0),e={volume:{from:i.volume,to:e}},i.muted&&(e.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:i.muted,volume:i.volume,props:e}),i.volume=Math.max(Math.min(o/1e3,1),0),i.muted&&(i.muted=!1),this.config.showValueLabel&&this.updateVolumeValue())}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,i=e.muted,e=this.find(".xgplayer-value-label"),t=Math.max(Math.min(t,1),0);e.innerText=i?0:Math.ceil(100*t)}},{key:"focus",value:function(){this.player.focus({autoHide:!1}),this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),A.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0,o=this._d,r=this.player;o.isActive||(this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=A.setTimeout(this,function(){o.isActive||(i?r.blur():r.focus(),A.removeClass(e.root,"slide-show"),o.isStart&&e.onBarMouseUp(n)),e._timerId=null},t))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this._d.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),0<t.volume&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(A.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===F.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),r}();function Ri(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var Mi=function(){h(i,Ci);var t=g(i);function i(e){return m(this,i),(e=t.call(this,e)).rotateDeg=e.config.rotateDeg||0,e}return a(i,[{key:"afterCreate",value:function(){var e,t=this;this.config.disable||(y(l(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(be,function(){t.rotateDeg&&t.config.innerRotate&&A.setTimeout(t,function(){t.updateRotateDeg(t.rotateDeg,t.config.innerRotate)},100)}),e=this.player.root,this.rootWidth=e.style.width||e.offsetWidth||e.clientWidth,this.rootHeight=e.style.height||e.offsetHeight||e.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){y(l(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var i,n,o,r,s,a,l,c,u,h,d,f;e=e||0,t?this.player.videoRotateDeg=e:(i=this.player,c=this.rootWidth,u=this.rootHeight,n=i.root,l=i.innerContainer,o=i.media,r=n.offsetWidth,s=(l&&t?l:n).offsetHeight,a=c,l=u,u=c=0,.75!==e&&.25!==e||(a="".concat(s,"px"),l="".concat(r,"px"),c=-(s-r)/2,u=-(r-s)/2),e="translate(".concat(c,"px,").concat(u,"px) rotate(").concat(e,"turn)"),h={transformOrigin:"center center",transform:e,webKitTransform:e,height:l,width:a},d=t?o:n,f=t?i.getPlugin("poster"):null,Object.keys(h).map(function(e){d.style[e]=h[e],f&&f.root&&(f.root.style[e]=h[e])}))}},{key:"rotate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=this.player;this.rotateDeg||(this.rotateDeg=0),this.rotateDeg=(this.rotateDeg+1+.25*(e?1:-1)*i)%1,this.updateRotateDeg(this.rotateDeg,t),n.emit("rotate",360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:Ri}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(Bt(this,"ROTATE_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}();function ji(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Ni(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var Fi="picture-in-picture",Hi="fullscreen",Bi=function(){h(r,Ci);var o=g(r);function r(){var t;m(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return c(d(t=o.call.apply(o,[this].concat(i))),"switchPIP",function(e){return!!t.isPIPAvailable()&&(e.stopPropagation&&e.stopPropagation(),void(t.isPip?(t.exitPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):4===t.player.media.readyState&&(t.requestPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))))}),t}return a(r,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(y(l(r.prototype),"afterCreate",this).call(this),this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(he,function(){e.config.showIcon&&(A.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:ji,class:"xg-get-pip"},pipIconExit:{icon:Ni,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var i=this,n=this.player;this.leavePIPCallback=function(){var e=n.paused;A.setTimeout(i,function(){e||n.mediaPlay()},0),e||n.mediaPlay(),i.setAttr("data-state","normal"),n.emit(_e,!1)},this.enterPIPCallback=function(e){n.emit(_e,!0),i.pipWindow=e.pictureInPictureWindow,i.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(e){var t=n.media.webkitPresentationMode;i.pMode===Hi&&t!==Hi&&n.onFullscreenChange(null,!1),(i.pMode=t)===Fi?i.enterPIPCallback(e):"inline"===t&&i.leavePIPCallback(e)},n.media&&(n.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),n.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(n.media)&&n.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.media.poster="String"===A.typeOf(i)?i:i.poster),r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(r.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===Fi}},{key:"isPIPAvailable",value:function(){var e=this.player.media;return("Boolean"!==A.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===A.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===A.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){y(l(r.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),r.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      '.concat(Bt(this,"PIP",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),r}();function Ui(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Vi=function(){h(n,st);var t=g(n);function n(e){var i;return m(this,n),c(d(i=t.call(this,e)),"playNext",function(e){var t=d(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),t.emit(Te,i.idx+1)):(i.nextHandler(),t.emit(Te))}),i.idx=-1,i}return a(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Ui}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===F.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(Bt(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),"\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(),Gi={exports:{}};Gi.exports=function t(i,e,n){var o=window,r="application/octet-stream",s=n||r,a=i,i=!e&&!n&&a,l=document.createElement("a"),n=function(e){return String(e)},c=o.Blob||o.MozBlob||o.WebKitBlob||n,u=e||"download",c=c.call?c.bind(o):Blob;if("true"===String(this)&&(s=(a=[a,s])[0],a=a[1]),i&&i.length<2048&&(u=i.split("/").pop().split("?")[0],l.href=i,-1!==l.href.indexOf(i))){var h=new XMLHttpRequest;return h.open("GET",i,!0),h.responseType="blob",h.onload=function(e){t(e.target.response,u,r)},setTimeout(function(){h.send()},0),h}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(a)){if(!(2096103.424<a.length&&c!==n))return navigator.msSaveBlob?navigator.msSaveBlob(g(a),u):y(a);s=(a=g(a)).type||r}else if(/([\x80-\xff])/.test(a)){for(var d=0,f=new Uint8Array(a.length),p=f.length;d<p;++d)f[d]=a.charCodeAt(d);a=new c([f],{type:s})}function g(e){for(var t=e.split(/[:;,]/),e=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),n=i.length,o=0,r=new Uint8Array(n);o<n;++o)r[o]=i.charCodeAt(o);return new c([r],{type:e})}function y(e,t){if("download"in l)return l.href=e,l.setAttribute("download",u),l.className="download-js-link",l.innerHTML="downloading...",l.style.display="none",document.body.appendChild(l),setTimeout(function(){l.click(),document.body.removeChild(l),!0===t&&setTimeout(function(){o.URL.revokeObjectURL(l.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,r)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var i=document.createElement("iframe");document.body.appendChild(i),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,r)),i.src=e,setTimeout(function(){document.body.removeChild(i)},333)}if(i=a instanceof c?a:new c([a],{type:s}),navigator.msSaveBlob)return navigator.msSaveBlob(i,u);if(o.URL)y(o.URL.createObjectURL(i),!0);else{if("string"==typeof i||i.constructor===n)try{return y("data:"+s+";base64,"+o.btoa(i))}catch(e){return y("data:"+s+","+encodeURIComponent(i))}(s=new FileReader).onload=function(e){y(this.result)},s.readAsDataURL(i)}return!0};var Wi=Gi.exports;function zi(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Ki=function(){h(n,Ci);var t=g(n);function n(e){var i;return m(this,n),c(d(i=t.call(this,e)),"download",function(e){var t;i.isLock||(i.emitUserAction(e,"download"),t=i.playerConfig.url,e="","String"===A.typeOf(t)?e=t:"Array"===A.typeOf(t)&&0<t.length&&(e=t[0].src),e=i.getAbsoluteURL(e),Wi(e),i.isLock=!0,i.timer=window.setTimeout(function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null},300))}),i.timer=null,i.isLock=!1,i}return a(n,[{key:"afterCreate",value:function(){y(l(n.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:zi}}},{key:"getAbsoluteURL",value:function(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("div")).innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href),e}},{key:"destroy",value:function(){y(l(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   '.concat(Bt(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(),qi=function(){h(i,Ci);var e=g(i);function i(){return m(this,i),e.apply(this,arguments)}return a(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){y(l(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(be,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var i=document.createElement("a");i.href=e,i.download=t;t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(t)}},{key:"createCanvas",value:function(e,t){var i=document.createElement("canvas"),n=i.getContext("2d");this.canvasCtx=n,(this.canvas=i).width=e||this.config.width,i.height=t||this.config.height,n.imageSmoothingEnabled=!0,n.imageSmoothingEnabled&&(n.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(e){t.emit(we,e),t.saveScreenShot(e,t.config.name+t.config.format)})}},{key:"shot",value:function(d,f){var p=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},g=this.config,y=this.player,m=e.quality||g.quality,v=e.type||g.type;return new Promise(function(e,t){var i,n,o,r,s,a,l,c,u,h=null;y.media.canvas?h=y.media.canvas:(p.canvas?(p.canvas.width=d||g.width,p.canvas.height=f||g.height):p.createCanvas(d,f),h=p.canvas,i=p.canvasCtx,a=y.media.videoWidth/y.media.videoHeight,l=h.width/h.height,c=y.media.videoWidth,u=y.media.videoHeight,l<a?(r=h.width,s=h.width/a,n=0,o=Math.round((h.height-s)/2)):a==l?(r=h.width,s=h.height,o=n=0):a<l&&(r=h.height*a,s=h.height,n=Math.round((h.width-r)/2),o=0),i.drawImage(y.media,0,0,c,u,n,o,r,s)),e(h.toDataURL(v,m).replace(v,"image/octet-stream").replace(/^data:image\/[^;]+/,"data:application/octet-stream"))})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){y(l(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(be,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>"),"\n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(),Yi=(a($i,[{key:"renderItemList",value:function(e){var n=this,t=this.config,i=this.root;e?t.data=e:e=t.data,t.style&&Object.keys(t.style).map(function(e){i.style[e]=t[e]}),0<e.length&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map(function(e,t){var i=e.selected?"option-item selected":"option-item";e["data-index"]=t,n.root.appendChild(A.createDom("li","<span>".concat(e.showText,"</span>"),e,i))})}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&A.hasClass(t,"selected"))return!1;var i="function"==typeof this.config.onItemClick?this.config.onItemClick:null,n=this.root.querySelector(".selected");A.addClass(t,"selected"),n&&A.removeClass(n,"selected"),i(e,{from:n?this.getAttrObj(n,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){if(!t||!e)return{};var i={};e.map(function(e){i[e]=t.getAttribute(e)});e=t.getAttribute("data-index");return e&&(i.index=Number(e)),i}},{key:"show",value:function(){A.removeClass(this.root,"hide"),A.addClass(this.root,"active")}},{key:"hide",value:function(){A.removeClass(this.root,"active"),A.addClass(this.root,"hide")}},{key:"setStyle",value:function(t){var i=this;Object.keys(t).forEach(function(e){i.root.style[e]=t[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(e){e.destroy&&e.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),$i),Xi="side",Zi="middle",Ji="click";function $i(e){m(this,$i),this.config=e.config,this.parent=e.root,this.root=A.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),e.root.appendChild(this.root);e=this.config.maxHeight;e&&this.setStyle({maxHeight:e}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();e="mobile"===F.device?"touchend":"click";this._delegates=st.delegate.call(this,this.root,"li",e,this.onItemClick)}var Qi="mobile"===F.device,en=function(){h(n,st);var i=g(n);function n(e){var t;return m(this,n),c(d(t=i.call(this,e)),"onEnter",function(e){e.stopPropagation(),t.emit("icon_mouseenter",{pluginName:t.pluginName}),t.switchActiveState(e)}),c(d(t),"switchActiveState",function(e){e.stopPropagation(),t.config.toggleMode===Ji?t.toggle(!t.isActive):t.toggle(!0)}),c(d(t),"onLeave",function(e){e.stopPropagation(),t.emit("icon_mouseleave",{pluginName:t.pluginName}),t.config.listType!==Xi&&t.isActive&&t.toggle(!1)}),c(d(t),"onListEnter",function(e){t.enterType=2}),c(d(t),"onListLeave",function(e){t.enterType=0,t.isActive&&t.toggle(!1)}),t.isIcons=!1,t.isActive=!1,t.curValue=null,t.curIndex=0,t}return a(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),Qi&&t.listType!==Zi&&(t.listType=Xi),t.hidePortrait&&A.addClass(this.root,"portrait"),this.on([be,ye],function(){e._resizeList()}),this.once($,function(){t.list&&0<t.list.length&&(e.renderItemList(t.list),e.show())}),Qi&&this.on(se,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Qi?(t.toggleMode=Ji,this.activeEvent="touchend"):this.activeEvent=t.toggleMode===Ji?"click":"mouseenter",t.toggleMode===Ji?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var t=this,i=this.icons,e=Object.keys(i),n=!1;0<e.length&&(e.forEach(function(e){t.appendChild(".xgplayer-icon",i[e]),n=n||i[e]}),this.isIcons=n),n||(this.appendChild(".xgplayer-icon",A.createDom("span","",{},"icon-text")),A.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||A.addClass(this.root,"show")}},{key:"hide",value:function(){A.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,i){if(void 0===e)return"";var n=this.config.list;i=i||this.player.lang,t=!t||A.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=n[e]);try{return"object"===f(e[t])?e[t][i]||e[t].en:e[t]}catch(e){return console.warn(e),""}}},{key:"toggle",value:function(e){var t,i;e!==this.isActive&&(t=this.player.controls,i=this.config.listType,e?(i===Xi?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):(i===Xi?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e)}},{key:"onItemClick",value:function(e,t){e.stopPropagation();var i=this.config,e=i.listType,i=i.list;this.curIndex=t.to.index,this.curItem=i[this.curIndex],this.changeCurrentText(),(this.config.isItemClickHide||Qi||e===Xi)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){var e;this.isIcons||(e=(e=this.config.list)[this.curIndex<e.length?this.curIndex:0])&&(this.find(".icon-text").innerHTML=this.getTextByLang(e,"iconText"))}},{key:"renderItemList",value:function(e,t){var i=this,n=this.config,o=this.optionsList,r=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=n.list[t]),o)return o.renderItemList(e),void this.changeCurrentText();e={config:{data:e||[],className:(o=n.listType,e=n.position,o===Xi?e===it.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""),onItemClick:function(e,t){i.onItemClick(e,t)}},root:n.listType===Xi?r.innerContainer||r.root:this.root};this.config.isShowIcon&&(r=this.player.root.getBoundingClientRect().height,(r=n.listType===Zi?r-50:r)&&(e.config.maxHeight="".concat(r,"px")),this.optionsList=new Yi(e),this.changeCurrentText(),this.show()),this._resizeList()}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect().height,e=this.config.listType===Zi?e-50:e;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(e,"px")})}},{key:"destroy",value:function(){this.config.toggleMode===Ji?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:"hover"}}}]),n}(),tn=function(){h(s,en);var t=g(s);function s(e){return m(this,s),(e=t.call(this,e)).curTime=0,e.isPaused=!0,e}return a(s,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&0<t.length&&(e.config.list=t.map(function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e}))}},{key:"afterCreate",value:function(){var t=this;y(l(s.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(e){t.changeDefinitionList(e)}),this.on(ke,function(e){t.renderItemList(t.config.list,e.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||A.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var t,e=this.config,i=e.list,n=e.defaultDefinition;0<i.length&&(t=null,i.map(function(e){e.definition===n&&(t=e)}),t=t||i[0],this.changeDefinition(t))}},{key:"renderItemList",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.list||[],t=1<arguments.length?arguments[1]:void 0,o=t&&t.definition?t.definition:this.config.defaultDefinition;t&&e.forEach(function(e){e.selected=!1});var r=0,e=e.map(function(e,t){var i=u(u({},e),{},{showText:n.getTextByLang(e)||e.definition,selected:!1});return(e.selected||e.definition&&e.definition==o)&&(i.selected=!0,r=t),i});y(l(s.prototype),"renderItemList",this).call(this,e,r)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var i=this.player.definitionList;y(l(s.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var n=0;n<i.length;n++)t.to&&i[n].definition===t.to.definition&&(t.to.url=i[n].url),t.from&&i[n].definition===t.from.definition&&(t.from.url=i[n].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return u(u({},en.defaultConfig),{},{position:it.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),s}(),nn=function(){h(s,en);var t=g(s);function s(e){return m(this,s),(e=t.call(this,e)).curRate=1,e}return a(s,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,t=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(t)&&(e.config.list=t.map(function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e}))}},{key:"afterCreate",value:function(){var e=this;y(l(s.prototype),"afterCreate",this).call(this),this.on(ie,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&y(l(s.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){y(l(s.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,n=Number(i.getAttribute("rate"));if(!n||n===this.curValue)return!1;i={playbackRate:{from:this.player.playbackRate,to:n}};this.emitUserAction(e,"change_rate",{props:i}),this.curValue=n,this.player.playbackRate=n}},{key:"renderItemList",value:function(){var n=this,o=this.player.playbackRate||1;this.curValue=o;var r=-1,e=this.config.list.map(function(e,t){var i={rate:e.rate};return i.rate===o&&(i.selected=!0,r=t),i.showText=n.getTextByLang(e),i});y(l(s.prototype),"renderItemList",this).call(this,e,r)}},{key:"changeCurrentText",value:function(){var e,t;this.isIcons||(t="",t=!(e=(e=this.config.list)[this.curIndex<e.length?this.curIndex:0])||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(e,"iconText"),this.find(".icon-text").innerHTML=t)}},{key:"destroy",value:function(){y(l(s.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return u(u({},en.defaultConfig),{},{position:it.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),s}();function on(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function rn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var sn=function(){h(i,Ci);var e=g(i);function i(){return m(this,i),e.apply(this,arguments)}return a(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var t=this;y(l(i.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(me,function(e){t.animate(e)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys,i=this.find(".xg-tips");i&&this.changeLangTextKey(i,e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:on,class:"xg-get-cssfull"},exitCssFullscreen:{icon:rn,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){y(l(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    </div>\n    ".concat(Bt(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:it.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(),an=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(q,function(e){t.onError(e)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=this.player,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).errorType,i=e.errorNote?this.i18n[e.errorNote]:"";if(!i)switch(t){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),t}(),ln=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))}),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var i=this;Object.keys(t).map(function(e){i.root.style[e]=t[e]})}},{key:"show",value:function(e){var t,i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e&&(this.customOnClick=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},t=this.config.interval,this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),A.addClass(this.root,"show"),"arrow"===n.mode&&A.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style),("boolean"==typeof n.autoHide?n:this.config).autoHide&&(t=n.interval||t,this.intervalId=setTimeout(function(){i.hide()},t)))}},{key:"hide",value:function(){A.removeClass(this.root,"show"),A.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(ht.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),t}(),cn={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function un(t){Object.keys(cn).map(function(e){void 0===t[e]&&(t[e]=cn[e])})}var hn={_updateDotDom:function(e,t){var i,n;t&&(i=this.calcuPosition(e.time,e.duration),(n=e.style||{}).left="".concat(i.left,"%"),n.width="".concat(i.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),i.isMini?A.addClass(t,"mini"):A.removeClass(t,"mini"),Object.keys(n).map(function(e){t.style[e]=n[e]}))},initDots:function(){var t=this;this._ispots.map(function(e){t.createDot(e,!1)}),this.ispotsInit=!0},createDot:function(e){var t,i,n,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=this.player.plugins.progress;r&&(o&&(un(e),this._ispots.push(e)),this.ispotsInit||!o)&&(i=this.calcuPosition(e.time,e.duration),(t=e.style||{}).left="".concat(i.left,"%"),t.width="".concat(i.width,"%"),o="xgspot_".concat(e.id," xgplayer-spot"),i.isMini&&(o+=" mini"),i=e.template?'<div class="xgplayer-spot-pop">'.concat(e.template,"</div>"):"",n=A.createDom("xg-spot",i,{"data-text":e.text,"data-time":e.time,"data-id":e.id},o),Object.keys(t).map(function(e){n.style[e]=t[e]}),r.outer&&r.outer.appendChild(n),this.positionDot(n,e.id))},findDot:function(i){if(this.player.plugins.progress){var e=this._ispots.filter(function(e,t){return e.id===i});return 0<e.length?e[0]:null}},updateDot:function(t){var i,e,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=this.player.plugins.progress;o&&((i=this.findDot(t.id))&&Object.keys(t).map(function(e){i[e]=t[e]}),this.ispotsInit&&(e=o.find('xg-spot[data-id="'.concat(t.id,'"]')))&&(this._updateDotDom(t,e),n&&this.showDot(t.id)))},deleteDot:function(e){var t=this._ispots,i=this.player.plugins.progress;if(i){for(var n=[],o=0;o<t.length;o++)t[o].id===e&&n.push(o);for(var r,s=n.length-1;0<=s;s--)t.splice(n[s],1),this.ispotsInit&&(r=i.find('xg-spot[data-id="'.concat(e,'"]')))&&r.parentElement.removeChild(r)}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this.ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),i=t.length-1;0<=i;i--)e.outer.removeChild(t[i]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.player.plugins.progress;if(t)if(this.ispotsInit){this._ispots=[];var n=t.root.getElementsByTagName("xg-spot"),o=n.length;if(o>e.length)for(var r=o-1;r>e.length-1;r--)t.outer.removeChild(n[r]);e.forEach(function(e,t){t<o?(n[t].setAttribute("data-id","".concat(e.id)),i._ispots.push(e),i.updateDot(e)):i.createDot(e)})}else this._ispots=e},positionDots:function(){var i=this,e=this._ispots,t=this.playerSize,n=this.player.sizeInfo,o=this.player.plugins.progress;o&&n.width!==t.width&&(t.width=n.width,t.left=n.left,e.forEach(function(e){var t=o.find('xg-spot[data-id="'.concat(e.id,'"]'));t&&i.positionDot(t,e.id)}))},positionDot:function(e,t){var i,n,o,r,s=A.findDom(e,".xgplayer-spot-pop");s&&(i=this.playerSize,r=e.getBoundingClientRect(),n=s.getBoundingClientRect(),o=r.left-i.left,e=i.width-o-r.width/2,o<n.width/2||i.width<n.width?(o=n.width/2-o,s.style.left="".concat(o,"px")):e<n.width/2?(r=e-n.width/2+r.width/2,s.style.left="".concat(r,"px")):s.style.left="50%")},updateDuration:function(){var i=this,n=this.player.plugins.progress;n&&this._ispots.forEach(function(e){var t=n.find('xg-spot[data-id="'.concat(e.id,'"]'));i._updateDotDom(e,t)})},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}},dn={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},fn=function(){h(n,st);var t=g(n);function n(e){var i;return m(this,n),c(d(i=t.call(this,e)),"onMousemove",function(e){i.config.disable||(A.hasClass(e.target,"xg-spot-content")&&i.config.isHideThumbnailHover?i.player.plugins.progress.onMouseLeave(e):(i._state.f||A.hasClass(e.target,"xg-spot-content"))&&(A.event(e),e.stopPropagation()))}),c(d(i),"onMousedown",function(e){i.config.disable||(i._state.f||A.hasClass(e.target,"xg-spot-content"))&&(A.event(e),e.stopPropagation())}),c(d(i),"onMouseup",function(e){var t;!i.isDrag||(t=i.player.plugins.progress)&&t.pos&&(t.onMouseUp(e),t.pos.isEnter||t.onMouseLeave(e))}),c(d(i),"onDotMouseLeave",function(e){i.config.disable||(i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null,(e=i.player.plugins.progress)&&e.enableBlur(),i.show())}),c(d(i),"onProgressMouseOver",function(e,t){i.config.disable||!A.hasClass(t.target,"xgplayer-spot")||i._curDot||(i._curDot=t.target,i.focusDot(t.target),0<i._curDot.children.length&&i.hide(),(t=i.player.plugins.progress)&&t.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave))}),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i.timeStr="",i._state={now:0,f:!1},i}return a(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var i=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(e,t){t.seekTime&&i.player.seek(t.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(e){i.setTimeContent(e)}),function(t){var e=t.config,i=t.player;Object.keys(hn).map(function(e){t[e]=hn[e].bind(t)});e=i.config.progressDot||e.ispots||[];t._ispots=e.map(function(e){return un(e),e}),t.ispotsInit=!1,t.playerSize={left:i.sizeInfo.left,width:i.sizeInfo.width},t.on(Q,function(){t.ispotsInit?t.updateDuration():t.initDots()}),t.on(be,function(){t.positionDots()})}(this),this.on(Q,function(){i.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(t){var i=this;t&&Object.keys(t).map(function(e){i.config[e]=t[e]})}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t,i=this,n=this.player.plugins.progress;n&&(Object.keys(dn).map(function(e){i[dn[e]]=i[dn[e]].bind(i),n.addCallBack(e,i[dn[e]])}),"mobile"!==F.device)&&(this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup),t=this.hook("previewClick",function(){}),this.handlerPreviewClick=function(e){e.stopPropagation(),t(parseInt(1e3*i._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick))}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&A.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&A.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(t,i){this.config.disable||A.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(e){t[e]=i.target.getAttribute("data-".concat(e))}),t.time&&(t.time=Number(t.time)),this.handlerSpotClick(i,t))}},{key:"updateLinePos",value:function(e,t){var i,n=this.root,o=this.previewLine,r=this.player,s=this.config,a="flex"===r.controls.mode,r=n.getBoundingClientRect().width;!r&&this._hasThumnail||((s=e-(r=this._hasThumnail&&r<s.width?s.width:r)/2)<0&&!a?(s=0,i=e-r/2):t-r<s&&!a?(i=s-(t-r),s=t-r):i=0,void 0!==i&&(o.style.transform="translateX(".concat(i.toFixed(2),"px)")),n.style.transform="translateX(".concat(s.toFixed(2),"px) translateZ(0)"))}},{key:"updateTimeText",value:function(e){var t=this.timeText,i=this.timePoint;t.innerHTML=e,this.thumbnail||(i.innerHTML=e)}},{key:"updatePosition",value:function(e,t,i,n){var o=this.root,r=this.config,s=this._state;o&&(s.now=i,this.transformTimeHook(i),i=this.timeStr,n&&n.target&&A.hasClass(n.target,"xgplayer-spot")?(this.showTips(n.target.getAttribute("data-text"),!1,i),this.focusDot(n.target),s.f=!0,r.isFocusDots&&s.f&&(s.now=parseInt(n.target.getAttribute("data-time"),10))):r.defaultText?(s.f=!1,this.showTips(r.defaultText,!0,i)):(s.f=!1,this.hideTips("")),this.updateTimeText(i),this.updateThumbnails(s.now),this.updateLinePos(e,t))}},{key:"setTimeContent",value:function(e){this.timeStr="".concat(A.format(e))}},{key:"updateThumbnails",value:function(e){var t=this.player,i=this.videoPreview,n=this.config,t=t.plugins.thumbnail;t&&t.usable&&(this.thumbnail&&t.update(this.thumbnail,e,n.width,n.height),i=i&&i.getBoundingClientRect(),this.videothumbnail&&t.update(this.videothumbnail,e,i.width,i.height))}},{key:"registerThumbnail",value:function(){var e,t,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"mobile"!==F.device&&(e=this.player,t=this.config,(i=e.getPlugin("thumbnail"))&&i.setConfig(n),i&&i.usable&&t.isShowThumbnail?(A.removeClass(this.root,"short-line no-thumbnail"),"short"===t.mode&&A.addClass(this.root,"short-line"),this._hasThumnail=!0,n=this.find(".xg-spot-thumbnail"),this.thumbnail=i.createThumbnail(n,"progress-thumbnail"),t.isShowCoverPreview&&(this.videoPreview=A.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)):A.addClass(this.root,"short-line no-thumbnail"))}},{key:"calcuPosition",value:function(e,t){var i=this.player.plugins.progress,n=this.player,i=i.root.getBoundingClientRect().width,i=n.duration/i*6;return e+t>n.duration&&(t=n.duration-e),n.duration,n.duration,{left:e/n.duration*100,width:t/n.duration*100,isMini:t<i}}},{key:"showDot",value:function(e){var t,i=this.findDot(e);i&&(t=this.root.getBoundingClientRect().width,e=i.time/this.player.duration*t,this.updatePosition(e,t,i.time))}},{key:"focusDot",value:function(e,t){e&&(t=t||e.getAttribute("data-id"),A.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){var t;e||(t=this._activeDotId,e=this.getDotDom(t)),e&&(A.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";A.addClass(this.root,"no-timepoint"),e&&(A.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(A.addClass(this.root,"product"),this.tipText.textContent=e):(A.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(i," ").concat(e)))}},{key:"hideTips",value:function(){A.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",A.removeClass(this.find(".xg-spot-content"),"show-text"),A.removeClass(this.root,"product")}},{key:"hide",value:function(){A.addClass(this.root,"hide")}},{key:"show",value:function(){A.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var t=this,i=this.player.plugins.progress;i&&Object.keys(dn).map(function(e){i.removeCallBack(e,t[dn[e]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===F.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info hide '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),n}(),pn=function(){h(i,st);var t=g(i);function i(e){return m(this,i),(e=t.call(this,e)).ratio=1,e.interval=null,e._preloadMark={},e}return a(i,[{key:"afterCreate",value:function(){var i=this;this.usable&&this.initThumbnail(),this.on([Q],function(){var e=i.config,t=e.pic_num,e=e.interval;i.usable&&(i.interval=0<e?e:Math.round(1e3*i.player.duration/t)/1e3)})}},{key:"setConfig",value:function(t){var e,i=this;t&&((e=Object.keys(t)).length<1||(e.forEach(function(e){i.config[e]=t[e]}),this.usable&&this.initThumbnail()))}},{key:"usable",get:function(){var e=this.config,t=e.urls,e=e.pic_num;return t&&0<t.length&&0<e}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,i=e.height,n=e.pic_num,e=e.interval;this.ratio=t/i*100,this.interval=e||Math.round(this.player.duration/n),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return 0<=e&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t,i,n,o=this;this._preloadMark[e]||(t=this.config.urls,i=t.length,n=[],0<e&&n.push(e-1),n.push(e),0<e&&e<i-1&&n.push(e+1),n.map(function(e){!o._preloadMark[e]&&0<=e&&e<i&&(o._preloadMark[e]=1,A.preloadImg(t[e],function(){o._preloadMark[e]=2}))}))}},{key:"getPosition",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.config,o=n.pic_num,r=n.row,s=n.col,a=n.width,l=n.height;this.interval=Math.round(this.player.duration/o);var c=Math.ceil(e/this.interval),n=(c=o<c?o:c)<r*s?0:Math.ceil(c/(r*s))-1,e=c-s*r*n,o=0<e?Math.ceil(e/s)-1:0,c=0<e?e-o*s-1:0,r=0,e=0;t&&i?t/i<a/l?r=(e=i)*(a/l):e=(r=t)/(a/l):i?t||(r=(e=i||l)*(a/l)):e=(r=t||a)/(a/l);l=this.getUrlByIndex(n);return{urlIndex:n,rowIndex:o,colIndex:c,url:l,height:e,width:r,style:{backgroundImage:"url(".concat(l,")"),backgroundSize:"".concat(r*s,"px auto"),backgroundPosition:"-".concat(c*r,"px -").concat(o*e,"px"),width:"".concat(r,"px"),height:"".concat(e,"px")}}}},{key:"update",value:function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",s=this.config,a=s.pic_num,s=s.urls;a<=0||!s||0===s.length||(i=this.getPosition(e,n,o),this.preload(i.urlIndex),Object.keys(i.style).map(function(e){t.style[e]=i.style[e]}),Object.keys(r).map(function(e){t.style[e]=r[e]}))}},{key:"changeConfig",value:function(){this.setConfig(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"createThumbnail",value:function(e,t){t=A.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(t),t}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(),gn=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=1<arguments.length?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),t}(),yn="realtime",mn="firstframe";var vn=null,kn=function(){h(r,st);var o=g(r);function r(){var n;m(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(n=o.call.apply(o,[this].concat(t))),"onLoadedData",function(e){n.player&&(n._frameCount=n.config.startFrameCount,n.renderOnTimeupdate(e),n.off(Z,n.renderOnTimeupdate),n.on(Z,n.renderOnTimeupdate))}),c(d(n),"renderOnTimeupdate",function(e){0<n._frameCount?(n.renderOnce(),n._frameCount--):(n._isLoaded=!0,n.off(Z,n.renderOnTimeupdate),!n.player.paused&&n._checkIfCanStart()&&n.start())}),c(d(n),"start",function(){var e=n.player.media,t=function(){try{return parseInt(window.performance.now(),10)}catch(e){return(new Date).getTime()}}(),i=n.checkVideoIsSupport(e);i&&n.canvasCtx&&(n.stop(),e.videoWidth&&e.videoHeight&&(n.videoPI=0<e.videoHeight?parseInt(e.videoWidth/e.videoHeight*100,10):0,(n.config.mode===yn||t-n.preTime>=n.interval)&&(e&&e.videoWidth&&n.update(i,n.videoPI),n.preTime=t)),n.frameId=A.requestAnimationFrame(n.start))}),c(d(n),"stop",function(){n.frameId&&(A.cancelAnimationFrame(n.frameId),n.frameId=null)}),n}return a(r,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),r.isSupport||(this.config.disable=!0);var t=this.config,i=t.disable,n=t.mode,t=t.frameRate;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/t,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(he,function(){e.player&&(e.init(),e.player.paused||e.start())}),"poster"!==n&&(n!==mn&&(this.on(re,function(){e.stop()}),this.on(G,function(){e._checkIfCanStart()&&e.start()}),this.on(K,function(){e.stop()})),this.on(te,this.onLoadedData),this.on(oe,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=r.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(t.index,'"><canvas>\n        </canvas><xgmask></xgmask></div>')),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(e){L.logError("plugin:DynamicBg",e)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var t=e&&e instanceof window.HTMLVideoElement?e:e.canvas||e.flyVideo||null;if(t&&("safari"!==F.browser||!A.isMSE(t)))return t;e=t?t.tagName.toLowerCase():"";return"canvas"===e||"img"===e?t:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;e&&(e="String"===A.typeOf(e)?e:"String"===A.typeOf(e.poster)?e.poster:null,this.updateImg(e))}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==mn&&"poster"!==e}},{key:"renderOnce",value:function(){var e,t=this.player.media;t.videoWidth&&t.videoHeight&&(this.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10),(e=this.checkVideoIsSupport(t))&&t.videoWidth&&this.update(e,this.videoPI))}},{key:"updateImg",value:function(e){var t,i,n,o,r=this;e&&(t=this.canvas.getBoundingClientRect(),i=t.width,n=t.height,(o=new window.Image).onload=function(){var e;!r.canvas||r.frameId||r.isStart||(r.canvas.height=n,r.canvas.width=i,e=parseInt(i/n*100,10),r.update(o,e),o=null)},o.src=e)}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var i,n,o,r=this._pos,s=this.config,a=this.canvas.getBoundingClientRect(),l=a.width,c=a.height;l===r.width&&c===r.height&&r.pi===t||(i=parseInt(l/c*100,10),r.pi=t,r.width=this.canvas.width=l,n=r.height=this.canvas.height=c,o=l,i<t?o=parseInt(c*t/100,10):t<i&&(n=parseInt(100*l/t,10)),r.rwidth=o*s.multiple,r.rheight=n*s.multiple,r.x=(l-r.rwidth)/2,r.y=(c-r.rheight)/2),this.canvasFilter&&(this.canvasCtx.filter=s.filter),this.canvasCtx.drawImage(e,r.x,r.y,r.rwidth,r.rheight)}catch(e){L.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof vn?vn:vn=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===F.browser||"firefox"===F.browser)}}]),r}(),Cn=e,bn=function(){h(r,Ze);var o=g(r);function r(){var i;m(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(d(i=o.call.apply(o,[this].concat(t))),"_recordUserActions",function(e){var t=i._getTime(),e=Object.assign({},e,{msg:e.msg||e.action});i._stats.info.push(u(u({type:"userAction"},t),{},{payload:e}))}),c(d(i),"_onReset",function(){i.reset()}),c(d(i),"_recordInfo",function(e){i.info(e)}),c(d(i),"_downloadStats",function(){var e=i.getStats(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),e=window.URL.createObjectURL(t),t=document.createElement("a");t.style.display="none",t.href=e,t.download="player.txt",t.disabled=!1,t.click()}),i}return a(r,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Se,this._recordUserActions),this.on(Cn.STATS_INFO,this._recordInfo),this.on(Cn.STATS_DOWNLOAD,this._downloadStats),this.on(Cn.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(u(u({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){e&&e.startMs?(e=u({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e),this._info(e)):console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(c(e={},"info",[]),c(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.media,t=[],i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});var n={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=n,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map(function(e){var t=e.payload.data,i="";try{t instanceof Error?i=t.msg:void 0!==t&&(i=JSON.stringify(t))}catch(e){console.log("err",e)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(i," ")})}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats.info.forEach(function(e){e.payload.profile&&t.traceEvents.push(e.payload)}),t}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),r}(),_n=function(){h(l,st);var n=g(l);function l(){var a;m(this,l);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(a=n.call.apply(n,[this].concat(t))),"onGapJump",function(){var e,t,i,n,o=d(a),r=o.player,s=o.config;if(r.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(r.media.seeking){if(!a.seekingEventReceived)return}else a.seekingEventReceived=!1;r.media.paused&&0!==r.media.currentTime&&a.hasPlayed||(i=r.media.buffered,n=s.smallGapLimit||.5,t=s.gapDetectionThreshold||.3,e=r.media.currentTime,null!==(o=a._getIndex(i,e,t))&&0!==o&&(console.log("GapJump  bufferRange ",i.start(o),i.end(o)),(t=i.start(o)+.1)>r.media.duration||(n=(i=t-e)<=n,i<l.BROWSER_GAP_TOLERANCE||n&&(!1!==s.useGapJump&&(r.media.currentTime=a.isSafari?t+.1:t),a.player&&a.player.emit("detectGap"),console.log("gapJump gapIndex",o," isGapSamll:",n," currentTime:",r.media.currentTime," jumpSize:",e-r.media.currentTime),.08!==t&&r&&r.emit("log",{type:"oneevent",end_type:"gap",vid:r.config.vid,ext:{video_postion:Math.floor(1e3*t)}})))))}}),a}return a(l,[{key:"afterCreate",value:function(){var e=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(J,this.onGapJump),this.on(G,function(){e.hasPlayed=!0}),this.on(Y,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,t,i){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=this._getBuffered(e),o=null,r=0;r<n.length;r++)if(n[r].start>t&&(0===r||n[r-1].end-t<=i)){o=r;break}return o}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),l}();_n.BROWSER_GAP_TOLERANCE=.001;var wn=function(){h(r,st);var o=g(r);function r(){var i;m(this,r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c(d(i=o.call.apply(o,[this].concat(t))),"onWaiting",function(){var e=d(i).config;i.jumpCnt>e.jumpCntMax||i.timer||!1===e.useWaitingTimeoutJump||(i.timer=setTimeout(i.onJump,1e3*e.waitingTime))}),c(d(i),"onJump",function(){var e=d(i),t=e.player,e=e.config;clearTimeout(i.timer),i.timer=null,i.jumpCnt>e.jumpCntMax||!1===e.useWaitingTimeoutJump||t.media.paused&&0!==t.media.currentTime&&i.hasPlayed||(i.jumpSize=e.jumpSize*(i.jumpCnt+1),i.jumpCnt===e.jumpSize&&i.jumpSize<6&&(i.jumpSize=6),(e=t.currentTime+i.jumpSize)>t.media.duration||(console.log("waitintTimeout, currentTime:",t.currentTime,", jumpTo:",e),i.jumpCnt++,t.currentTime=e))}),i}return a(r,[{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.useWaitingTimeoutJump,t=t.jumpSize;!1!==i&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=t,this.on(J,this.onWaiting),this.on([W,$],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(G,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),r}(),Tn="cdn",xn=["cdn"],Sn=function(){h(o,st);var n=g(o);function o(){var u;m(this,o);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return c(d(u=n.call.apply(n,[this].concat(t))),"getSpeed",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Tn;if(!u.speedListCache||!u.speedListCache[e])return 0;if(u.speedListCache[e].length<=0)return 0;var t=0;return u.speedListCache[e].map(function(e){t+=e}),Math.floor(t/u.speedListCache[e].length)}),c(d(u),"startTimer",function(){A.isMSE(u.player.video)||(u.initSpeedList(),u.cnt=0,u.timer=setTimeout(u.testSpeed,u.config.testTimeStep))}),c(d(u),"initSpeedList",function(){u.speedListCache={},xn.forEach(function(e){u.speedListCache[e]=[]})}),c(d(u),"_onRealSpeedChange",function(e){e.speed&&u.appendList(e.speed,e.type||Tn)}),c(d(u),"testSpeed",function(){if(clearTimeout(u.timer),u.timer=null,u.player&&u.config.openSpeed){var e=u.config,t=e.url,i=e.loadSize,n=e.testCnt,o=e.testTimeStep,t=t+(t.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(u.cnt>=n)){u.cnt++;try{var r,s=(new Date).getTime(),a=new XMLHttpRequest;(u.xhr=a).open("GET",t);var l={},c=Math.floor(10*Math.random());l.Range="bytes="+c+"-"+(i+c),l&&Object.keys(l).forEach(function(e){a.setRequestHeader(e,l[e])}),a.onreadystatechange=function(){var e;4===a.readyState&&(u.xhr=null,r=(new Date).getTime(),e=a.getResponseHeader("Content-Length")/1024*8,e=Math.round(1e3*e/(r-s)),u.appendList(e),u.timer=setTimeout(u.testSpeed,o))},a.send()}catch(e){console.error(e)}}}}),c(d(u),"appendList",function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Tn;u.speedListCache&&u.speedListCache[i]&&(t=u.config.saveSpeedMax,u.speedListCache[i].length>=t&&u.speedListCache[i].shift(),u.speedListCache[i].push(e),(t=d(u).player)&&(i===Tn?t.realTimeSpeed=e:t[u.getSpeedName("realTime",i)]=e),u.updateSpeed(i))}),c(d(u),"updateSpeed",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Tn,t=u.getSpeed(e),i=d(u).player;i&&(e===Tn?i.avgSpeed&&t===i.avgSpeed||(i.avgSpeed=t,i.emit(ge,{speed:t,realTimeSpeed:i.realTimeSpeed})):i[e=u.getSpeedName("avg",e)]&&t===i[e]||(i[e]=t,i.emit(ge,{speed:t,realTimeSpeed:i.realTimeSpeed})))}),u}return a(o,[{key:"afterCreate",value:function(){var e=this.config,t=e.openSpeed,e=e.addSpeedTypeList;0<(null==e?void 0:e.length)&&xn.push.apply(xn,v(e)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,t&&this.on([te,de],this.startTimer)}},{key:"getSpeedName",value:function(e,t){return e+"Speed"+t.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(!(this.config.openSpeed=e)&&this.timer)return clearTimeout(this.timer),void(this.timer=null);this.config.openSpeed&&(this.timer||(this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)))}},{key:"destroy",value:function(){var t=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([te,de],this.startTimer),xn.forEach(function(e){t.speedListCache&&t.speedListCache[e]&&(t.speedListCache[e]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),o}(),En=function(){h(t,st);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.config;this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],i.disabled||t.media.getVideoPlaybackQuality&&(this.on(G,function(){e._startTick()}),this.on(K,function(){e._stopTick()}),this.on(z,function(){e._stopTick()}),this.on(re,function(){e._stopTick()}))}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,t,i,n){var o=this.player.media,r=document.hidden,s=o.paused;if("boolean"==typeof r&&!r&&!s){for(var a=o.currentTime,l=o.buffered,c=!1,u=[],h=0;h<l.length;h++){var d=l.start(h),f=l.end(h);if(u.push({start:d,end:f}),d<=a&&a<=f-1){c=!0;break}}4===o.readyState&&c&&(this._currentStuckCount>this.config.stuckCount?(this.emit(Ae,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:u,currentTime:o.currentTime,curDecodedFrames:e,totalVideoFrames:t,droppedVideoFrames:i,checkInterval:n})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e,t,i,n,o;this.player.media&&(e=(o=this.player.media.getVideoPlaybackQuality()).totalVideoFrames,t=o.droppedVideoFrames,i=performance.now(),e&&this._lastCheckPoint&&(n=e-this._lastDecodedFrames,o=i-this._lastCheckPoint,this._checkStuck(n,e,t,o)),this._lastDecodedFrames=e,this._lastCheckPoint=i)}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),t}();_t.use({LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:""},mse:{code:2,msg:""},parse:{code:3,msg:""},format:{code:4,msg:""},decoder:{code:5,msg:""},runtime:{code:6,msg:""},timeout:{code:7,msg:""},other:{code:8,msg:""}},HAVE_NOTHING:"/",HAVE_METADATA:"/",HAVE_CURRENT_DATA:"/",HAVE_FUTURE_DATA:"",HAVE_ENOUGH_DATA:"",NETWORK_EMPTY:"/",NETWORK_IDLE:"/",NETWORK_LOADING:"",NETWORK_NO_SOURCE:"/",MEDIA_ERR_ABORTED:"",MEDIA_ERR_NETWORK:"",MEDIA_ERR_DECODE:"",MEDIA_ERR_SRC_NOT_SUPPORTED:"/",REPLAY:"",ERROR:"",PLAY_TIPS:"",PAUSE_TIPS:"",PLAYNEXT_TIPS:"",DOWNLOAD_TIPS:"",ROTATE_TIPS:"",RELOAD_TIPS:"",FULLSCREEN_TIPS:"",EXITFULLSCREEN_TIPS:"",CSSFULLSCREEN_TIPS:"",EXITCSSFULLSCREEN_TIPS:"",TEXTTRACK:"",PIP:"",SCREENSHOT:"",LIVE:"",OFF:"",OPEN:"",MINI_DRAG:"",MINISCREEN:"",REFRESH_TIPS:"",REFRESH:"",FORWARD:"",LIVE_TIP:""}});Gi=a(function e(t,i){var n,o;m(this,e);var r=i&&"mobile"===i.isMobileSimulateMode,s=i.isLive,i=[].concat(s?[]:[Li,ki,gn,fn,Pi],[bi,Ei,Mi,Vi,tn,nn,Ki,qi,Di,Bi]),s=[Ot,Dt,Ft,gi,Ht,an,ln,pn,Xt];this.plugins=[bn,It].concat(v(i),s,[_n,wn]);r=r?"mobile":F.device;switch(r){case"pc":(n=this.plugins).push.apply(n,[fi,$t,sn,Sn,En]);break;case"mobile":(o=this.plugins).push.apply(o,[hi]);break;default:(o=this.plugins).push.apply(o,[fi,$t,sn])}!F.os.isIpad&&"pc"!==r||this.plugins.push(kn),F.os.isIpad&&this.plugins.push($t),this.ignores=[],this.i18n=[]}),e=function(){h(t,St);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return a(t)}();return c(e,"defaultPreset",Gi),c(e,"Util",A),c(e,"Sniffer",F),c(e,"Errors",V),c(e,"Events",S),c(e,"Plugin",st),c(e,"BasePlugin",Ze),c(e,"I18N",_t),c(e,"STATE_CLASS",ht),e});
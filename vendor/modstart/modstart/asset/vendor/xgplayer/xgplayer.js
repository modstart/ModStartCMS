!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es.array.find.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.promise.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.number.is-nan.js"),require("core-js/modules/es.number.constructor.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.match.js"),require("core-js/modules/es.regexp.constructor.js"),require("core-js/modules/es.regexp.sticky.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.string.trim.js"),require("core-js/modules/es.regexp.test.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/es.number.to-fixed.js"),require("core-js/modules/es.string.repeat.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.typed-array.uint8-array.js"),require("core-js/modules/esnext.typed-array.at.js"),require("core-js/modules/es.typed-array.copy-within.js"),require("core-js/modules/es.typed-array.every.js"),require("core-js/modules/es.typed-array.fill.js"),require("core-js/modules/es.typed-array.filter.js"),require("core-js/modules/es.typed-array.find.js"),require("core-js/modules/es.typed-array.find-index.js"),require("core-js/modules/esnext.typed-array.find-last.js"),require("core-js/modules/esnext.typed-array.find-last-index.js"),require("core-js/modules/es.typed-array.for-each.js"),require("core-js/modules/es.typed-array.includes.js"),require("core-js/modules/es.typed-array.index-of.js"),require("core-js/modules/es.typed-array.iterator.js"),require("core-js/modules/es.typed-array.join.js"),require("core-js/modules/es.typed-array.last-index-of.js"),require("core-js/modules/es.typed-array.map.js"),require("core-js/modules/es.typed-array.reduce.js"),require("core-js/modules/es.typed-array.reduce-right.js"),require("core-js/modules/es.typed-array.reverse.js"),require("core-js/modules/es.typed-array.set.js"),require("core-js/modules/es.typed-array.slice.js"),require("core-js/modules/es.typed-array.some.js"),require("core-js/modules/es.typed-array.sort.js"),require("core-js/modules/es.typed-array.subarray.js"),require("core-js/modules/es.typed-array.to-locale-string.js"),require("core-js/modules/es.typed-array.to-string.js"),require("core-js/modules/web.url.js"),require("core-js/modules/web.url-search-params.js"),require("core-js/modules/es.json.stringify.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es.array.find.js","core-js/modules/es.object.to-string.js","core-js/modules/es.array.concat.js","core-js/modules/web.dom-collections.for-each.js","core-js/modules/es.object.keys.js","core-js/modules/es.array.slice.js","core-js/modules/es.array.join.js","core-js/modules/es.array.splice.js","core-js/modules/es.promise.js","core-js/modules/es.function.name.js","core-js/modules/es.number.is-nan.js","core-js/modules/es.number.constructor.js","core-js/modules/es.array.map.js","core-js/modules/es.array.iterator.js","core-js/modules/web.dom-collections.iterator.js","core-js/modules/es.array.filter.js","core-js/modules/es.object.assign.js","core-js/modules/es.symbol.js","core-js/modules/es.regexp.exec.js","core-js/modules/es.string.match.js","core-js/modules/es.regexp.constructor.js","core-js/modules/es.regexp.sticky.js","core-js/modules/es.regexp.to-string.js","core-js/modules/es.string.split.js","core-js/modules/es.string.replace.js","core-js/modules/es.string.trim.js","core-js/modules/es.regexp.test.js","core-js/modules/es.array.sort.js","core-js/modules/es.string.iterator.js","core-js/modules/es.number.to-fixed.js","core-js/modules/es.string.repeat.js","core-js/modules/es.array.find-index.js","core-js/modules/es.typed-array.uint8-array.js","core-js/modules/esnext.typed-array.at.js","core-js/modules/es.typed-array.copy-within.js","core-js/modules/es.typed-array.every.js","core-js/modules/es.typed-array.fill.js","core-js/modules/es.typed-array.filter.js","core-js/modules/es.typed-array.find.js","core-js/modules/es.typed-array.find-index.js","core-js/modules/esnext.typed-array.find-last.js","core-js/modules/esnext.typed-array.find-last-index.js","core-js/modules/es.typed-array.for-each.js","core-js/modules/es.typed-array.includes.js","core-js/modules/es.typed-array.index-of.js","core-js/modules/es.typed-array.iterator.js","core-js/modules/es.typed-array.join.js","core-js/modules/es.typed-array.last-index-of.js","core-js/modules/es.typed-array.map.js","core-js/modules/es.typed-array.reduce.js","core-js/modules/es.typed-array.reduce-right.js","core-js/modules/es.typed-array.reverse.js","core-js/modules/es.typed-array.set.js","core-js/modules/es.typed-array.slice.js","core-js/modules/es.typed-array.some.js","core-js/modules/es.typed-array.sort.js","core-js/modules/es.typed-array.subarray.js","core-js/modules/es.typed-array.to-locale-string.js","core-js/modules/es.typed-array.to-string.js","core-js/modules/web.url.js","core-js/modules/web.url-search-params.js","core-js/modules/es.json.stringify.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Player=t()}(this,function(){"use strict";function j(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)),n}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?j(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function e(e,t,i){return t&&N(e.prototype,t),i&&N(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,i){return(t=U(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function i(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=a(i);return H(this,n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function c(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){var t;if(e)return"string"==typeof e?B(e,void 0):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,void 0):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function U(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}var V,f,W={exports:{}};function G(){}function z(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function K(e,t,i,n,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");i=new z(i,n||e,o),n=f?f+t:t;return e._events[n]?e._events[n].fn?e._events[n]=[e._events[n],i]:e._events[n].push(i):(e._events[n]=i,e._eventsCount++),e}function q(e,t){0==--e._eventsCount?e._events=new G:delete e._events[t]}function n(){this._events=new G,this._eventsCount=0}Y=W,V=Object.prototype.hasOwnProperty,f="~",Object.create&&(G.prototype=Object.create(null),(new G).__proto__||(f=!1)),n.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)V.call(e,t)&&i.push(f?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},n.prototype.listeners=function(e){var e=f?f+e:e,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var i=0,n=t.length,o=new Array(n);i<n;i++)o[i]=t[i].fn;return o},n.prototype.listenerCount=function(e){e=f?f+e:e,e=this._events[e];return e?e.fn?1:e.length:0},n.prototype.emit=function(e,t,i,n,o,s){var r=f?f+e:e;if(!this._events[r])return!1;var a,l=this._events[r],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,o),!0;case 6:return l.fn.call(l.context,t,i,n,o,s),!0}for(d=1,a=new Array(c-1);d<c;d++)a[d-1]=arguments[d];l.fn.apply(l.context,a)}else for(var u,h=l.length,d=0;d<h;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),c){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,t);break;case 3:l[d].fn.call(l[d].context,t,i);break;case 4:l[d].fn.call(l[d].context,t,i,n);break;default:if(!a)for(u=1,a=new Array(c-1);u<c;u++)a[u-1]=arguments[u];l[d].fn.apply(l[d].context,a)}return!0},n.prototype.on=function(e,t,i){return K(this,e,t,i,!1)},n.prototype.once=function(e,t,i){return K(this,e,t,i,!0)},n.prototype.removeListener=function(e,t,i,n){e=f?f+e:e;if(this._events[e])if(t){var o=this._events[e];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||q(this,e);else{for(var s=0,r=[],a=o.length;s<a;s++)(o[s].fn!==t||n&&!o[s].once||i&&o[s].context!==i)&&r.push(o[s]);r.length?this._events[e]=1===r.length?r[0]:r:q(this,e)}}else q(this,e);return this},n.prototype.removeAllListeners=function(e){return e?(e=f?f+e:e,this._events[e]&&q(this,e)):(this._events=new G,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=f,Y.exports=n.EventEmitter=n;var Y=W.exports,W="undefined"!=typeof window&&window.location&&-1<window.location.href.indexOf("xgplayerdebugger=1"),X={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Z="%c[xgplayer]",d={config:{debug:W?3:0},logInfo:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];3<=this.config.debug&&(t=console).log.apply(t,[Z,X.info,e].concat(n))},logWarn:function(e){for(var t,i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];1<=this.config.debug&&(t=console).warn.apply(t,[Z,X.warn,e].concat(n))},logError:function(e){var t;if(!(this.config.debug<1)){for(var i=2<=this.config.debug?"trace":"error",n=arguments.length,o=new Array(1<n?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(t=console)[i].apply(t,[Z,X.error,e].concat(o))}}},J=(e($,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),$),v={};function $(e){m(this,$),this.bufferedList=e}function Q(e){var t=g(e);return null!==e&&("object"===t||"function"===t)}function ee(n,s,e){var r,a,i,l,c,u,h=0,d=!1,f=!1,t=!0,o=!s&&0!==s&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof n)throw new TypeError("Expected a function");function p(e){var t=r,i=a;return r=a=void 0,h=e,l=n.apply(i,t)}function g(e,t){return o?(window.cancelAnimationFrame(c),window.requestAnimationFrame(e)):setTimeout(e,t)}function y(e){var t=e-u;return void 0===u||s<=t||t<0||f&&i<=e-h}function m(){var e,t=Date.now();if(y(t))return v(t);c=g(m,(e=t-h,t=s-(t-u),f?Math.min(t,i-e):t))}function v(e){return c=void 0,t&&r?p(e):(r=a=void 0,l)}function k(){for(var e=Date.now(),t=y(e),i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];if(r=n,a=this,u=e,t){if(void 0===c)return h=e=u,c=g(m,s),d?p(e):l;if(f)return c=g(m,s),p(u)}return void 0===c&&(c=g(m,s)),l}return s=+s||0,Q(e)&&(d=!!e.leading,i=(f="maxWait"in e)?Math.max(+e.maxWait||0,s):i,t="trailing"in e?!!e.trailing:t),k.cancel=function(){var e;void 0!==c&&(e=c,o?window.cancelAnimationFrame(e):clearTimeout(e)),r=u=a=c=void(h=0)},k.flush=function(){return void 0===c?l:v(Date.now())},k.pending=function(){return void 0!==c},k}v.createDom=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=document.createElement(i);return o.className=t,o.innerHTML=e,Object.keys(n).forEach(function(e){var t=e,e=n[e];("video"!==i&&"audio"!==i&&"live-video"!==i||e)&&o.setAttribute(t,e)}),o},v.createDomFromHtml=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";try{(o=document.createElement("div")).innerHTML=e;var n=o.children,o=null;return 0<n.length?(n=n[0],i&&v.addClass(n,i),t&&Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n):null}catch(e){return d.logError("util.createDomFromHtml",e),null}},v.hasClass=function(t,i){if(!t||!i)return!1;try{return Array.prototype.some.call(t.classList,function(e){return e===i})}catch(e){t=t.className&&"object"===g(t.className)?t.getAttribute("class"):t.className;return t&&!!t.match(new RegExp("(\\s|^)"+i+"(\\s|$)"))}},v.addClass=function(t,i){if(t&&i)try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)})}catch(e){v.hasClass(t,i)||(t.className&&"object"===g(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+i):t.className+=" "+i)}},v.removeClass=function(t,i){if(t&&i)try{i.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.remove(e)})}catch(e){v.hasClass(t,i)&&i.split(/\s+/g).forEach(function(e){e=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===g(t.className)?t.setAttribute("class",t.getAttribute("class").replace(e," ")):t.className=t.className.replace(e," ")})}},v.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach(function(e){v.hasClass(t,e)?v.removeClass(t,e):v.addClass(t,e)})},v.classNames=function(){for(var i=arguments,n=[],e=0;e<arguments.length;e++)!function(t){"String"===v.typeOf(i[t])?n.push(i[t]):"Object"===v.typeOf(i[t])&&Object.keys(i[t]).map(function(e){i[t][e]&&n.push(e)})}(e);return n.join(" ")},v.findDom=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,n=1<arguments.length?arguments[1]:void 0;try{t=i.querySelector(n)}catch(e){d.logError("util.findDom",e),0===n.indexOf("#")&&(t=i.getElementById(n.slice(1)))}return t},v.getCss=function(e,t){return(e.currentStyle||document.defaultView.getComputedStyle(e,!1))[t]},v.padStart=function(e,t,i){for(var n=String(i),i=t>>0,o=Math.ceil(i/n.length),s=[],t=String(e);o--;)s.push(n);return s.join("").substring(0,i-t.length)+t},v.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=v.padStart(Math.floor(e/3600),2,0),i=v.padStart(Math.floor((e-3600*t)/60),2,0),e=v.padStart(Math.floor(e-3600*t-60*i),2,0);return("00"===t?[i,e]:[t,i,e]).join(":")},v.event=function(e){var t;e.touches&&(t=e.touches[0]||e.changedTouches[0],e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop),e._target=e.target||e.srcElement},v.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},v.deepCopy=function(t,i){if("Object"===v.typeOf(i)&&"Object"===v.typeOf(t))return Object.keys(i).forEach(function(e){"Object"!==v.typeOf(i[e])||i[e]instanceof Node?"Array"===v.typeOf(i[e])?t[e]="Array"===v.typeOf(t[e])?t[e].concat(i[e]):i[e]:t[e]=i[e]:void 0===t[e]||void 0===t[e]?t[e]=i[e]:v.deepCopy(t[e],i[e])}),t},v.deepMerge=function(i,n){return Object.keys(n).map(function(e){var t;"Array"===v.typeOf(n[e])&&"Array"===v.typeOf(i[e])?"Array"===v.typeOf(i[e])&&(t=i[e]).push.apply(t,c(n[e])):v.typeOf(i[e])!==v.typeOf(n[e])||null===i[e]||"Object"!==v.typeOf(i[e])||n[e]instanceof window.Node?null!==n[e]&&(i[e]=n[e]):v.deepMerge(i[e],n[e])}),i},v.getBgImage=function(e){var t,e=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;return e&&"none"!==e?((t=document.createElement("a")).href=e.replace(/url\("|"\)/g,""),t.href):""},v.copyDom=function(e){var t;return e&&1===e.nodeType?(t=document.createElement(e.tagName),Array.prototype.forEach.call(e.attributes,function(e){t.setAttribute(e.name,e.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t):""},v.setInterval=function(e,t,i,n){e._interval[t]||(e._interval[t]=window.setInterval(i.bind(e),n))},v.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},v.setTimeout=function(e,t,i){e._timers||(e._timers=[]);var n=setTimeout(function(){t(),v.clearTimeout(e,n)},i);return e._timers.push(n),n},v.clearTimeout=function(e,t){var i=e._timers;if("Array"===v.typeOf(i)){for(var n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1),clearTimeout(t);break}}else clearTimeout(t)},v.clearAllTimers=function(e){var t=e._timers;"Array"===v.typeOf(t)&&(t.map(function(e){clearTimeout(e)}),e._timerIds=[])},v.createImgBtn=function(e,t,i,n){var o,s,r,a=v.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),i&&n&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(e){return!(-1<i.indexOf(e)&&-1<n.indexOf(e)&&(o=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=parseFloat(n.slice(0,n.indexOf(e)).trim()),r=e,1))}),a.style.width="".concat(o).concat(r),a.style.height="".concat(s).concat(r),a.style.backgroundSize="".concat(o).concat(r," ").concat(s).concat(r),a.style.margin="start"===e?"-".concat(s/2).concat(r," auto auto -").concat(o/2).concat(r):"auto 5px auto 5px"),a},v.Hex2RGBA=function(e,t){var i,n=[];return/^\#[0-9A-F]{3}$/i.test(e)&&(i="#",e.replace(/[0-9A-F]/gi,function(e){i+=e+e}),e=i),/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},v.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},v.checkIsFunction=function(e){return e&&"function"==typeof e},v.checkIsObject=function(e){return null!==e&&"object"===g(e)},v.hide=function(e){e.style.display="none"},v.show=function(e,t){e.style.display=t||"block"},v.isUndefined=function(e){if(null==e)return!0},v.isNotNull=function(e){return!(null==e)},v.setStyleFromCsstext=function(t,i){i&&("String"===v.typeOf(i)?i.replace(/\s+/g,"").split(";").map(function(e){e&&1<(e=e.split(":")).length&&(t.style[e[0]]=e[1])}):Object.keys(i).map(function(e){t.style[e]=i[e]}))},v.filterStyleFromText=function(t){var i,n,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],e=t.style.cssText;return e?(e=e.replace(/\s+/g,"").split(";"),i={},n={},e.map(function(e){e&&1<(e=e.split(":")).length&&(function(e,t){for(var i=0,n=t.length;i<n;i++)if(-1<e.indexOf(t[i]))return 1}(e[0],o)?i[e[0]]=e[1]:n[e[0]]=e[1])}),t.setAttribute("style",""),Object.keys(n).map(function(e){t.style[e]=n[e]}),i):{}},v.getStyleFromCsstext=function(e){var t,e=e.style.cssText;return e?(e=e.replace(/\s+/g,"").split(";"),t={},e.map(function(e){e&&1<(e=e.split(":")).length&&(t[e[0]]=e[1])}),t):{}},v.preloadImg=function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};e&&((t=new window.Image).onload=function(e){t=null,i&&i(e)},t.onerror=function(e){t=null,n&&n(e)},t.src=e)},v.stopPropagation=function(e){e&&e.stopPropagation()},v.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},v.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},v.checkTouchSupport=function(){return"ontouchstart"in window},v.getBuffered2=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,i=[],n=0;n<e.length;n++)i.push({start:e.start(n)<.5?0:e.start(n),end:e.end(n)});i.sort(function(e,t){return e.start-t.start||t.end-e.end});var o=[];if(t)for(var s=0;s<i.length;s++){var r,a=o.length;a&&(r=o[a-1].end,i[s].start-r<t)?i[s].end>r&&(o[a-1].end=i[s].end):o.push(i[s])}else o=i;return new J(o)},v.getEventPos=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return{x:(e=e.touches&&0<e.touches.length?e.touches[0]:e).x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},v.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},v.getHostFromUrl=function(e){var t;return"String"!==v.typeOf(e)?"":(t="",3<(e=e.split("/")).length&&e[2]?e[2]:t)},v.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},v.isMSE=function(e){return!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},v.isBlob=function(e){return/^blob/.test(e)},v.generateSessionId=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=(new Date).getTime();try{t=parseInt(t)}catch(e){t=0}return i+=t,window.performance&&"function"==typeof window.performance.now&&(i+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)})},v.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},v.adjustTimeByDuration=function(e,t,i){return t&&e&&(t<e||i&&e<t)?t:e},v.createPositionBar=function(e,t){e=v.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(e),e},v.getTransformStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,scale:1,rotate:0},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")};return Object.keys(n).forEach(function(e){var t=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),e="".concat(e,"(").concat(n[e],")");t.test(i)?(t.lastIndex=-1,i=i.replace(t,e)):i+="".concat(e," ")}),i},v.convertDeg=function(e){return Math.abs(e)<=1?360*e:e%360},v.getIndexByTime=function(e,t){var i=t.length,n=-1;if(!(i<1))if(e<=t[0].end||i<2)n=0;else if(e>t[i-1].end)n=i-1;else for(var o=1;o<i;o++)if(e>t[o-1].end&&e<=t[o].end){n=o;break}return n},v.getOffsetCurrentTime=function(e,t){var i,n,o,s,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;return(r=0<=r&&r<t.length?r:v.getIndexByTime(e,t))<0?-1:(i=t.length,n=(t=t[r]).start,o=t.end,s=t.cTime,t=t.offset,e<n?s:n<=e&&e<=o?e-t:o<e&&i-1<=r?o:-1)},v.getCurrentTimeByOffset=function(e,t){var i=-1;if(!t||t.length<0)return e;for(var n,o=0;o<t.length;o++)if(e<=t[o].duration){i=o;break}return-1!==i?(n=t[i].start,i-1<0?n+e:n+(e-t[i-1].duration)):e};var te=/(Android)\s([\d.]+)/,ie=/(Version)\/([\d.]+)/,ne=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],p={get device(){return p.os.isPc?"pc":"mobile"},get browser(){var t,i;return"undefined"==typeof navigator?"":(t=navigator.userAgent.toLowerCase(),i={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/},[].concat(Object.keys(i).filter(function(e){return i[e].test(t)}))[0])},get os(){var e,t,i,n,o,s,r,a;return"undefined"==typeof navigator?{}:(t=/(?:Windows Phone)/.test(e=navigator.userAgent),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),r=!((s=/(?:iPhone)/.test(e)&&!a)||n||i||a),{isTablet:a,isPhone:s,isIpad:a=/(?:iPad|PlayBook)/.test(e),isIos:s||a,isAndroid:n,isPc:r,isSymbian:i,isWindowsPhone:t,isFireFox:o})},get osVersion(){var e,t;return"undefined"!=typeof navigator&&(e="",e=(e=/(?:iPhone)|(?:iPad|PlayBook)/.test(t=navigator.userAgent)?ie:te)?e.exec(t):[])&&3<=e.length&&0<(t=e[2].split(".")).length?parseInt(t[0]):0},get isWeixin(){return"undefined"!=typeof navigator&&!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var t,i={isSupport:!1,mime:""};return"undefined"==typeof document?i:this.supportResult||("function"==typeof(t=document.createElement("video")).canPlayType&&ne.map(function(e){"probably"===t.canPlayType('video/mp4; codecs="'.concat(e,'"'))&&(i.isSupport=!0,i.mime+="||".concat(e))}),this.supportResult=i,t=null,i)},isMSESupport:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if("undefined"==typeof MediaSource||!MediaSource)return!1;try{return MediaSource.isTypeSupported(t)}catch(e){return this._logger.error(t,e),!1}},isHevcSupported:function(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var i=e.video||{},e=e.audio||{};try{var n=MediaSource.isTypeSupported(i.contentType),o=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:n&&o,smooth:!1,powerEfficient:!1})}catch(e){return Promise.resolve(t)}}},oe="3.0.10",se={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},re={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},ae=e(function e(t){var i,n,o,s,r,a,l,c,u,h,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null},f=(m(this,e),t&&t.i18n?t.i18n.ERROR_TYPES:null);if(t.media)return i=d.mediaError||t.media.error||{},n=t.duration,o=t.currentTime,s=t.ended,r=t.src,a=t.currentSrc,l=(c=t.media).readyState,c=c.networkState,u=d.errorCode||i.code,h={playerVersion:oe,currentTime:o,duration:n,ended:s,readyState:l,networkState:c,src:r||a,errorType:d.errorType,errorCode:u=re[u]?re[u]:u,message:d.errorMessage||i.message,mediaError:i,originError:d.originError?d.originError.stack:"",host:v.getHostFromUrl(r||a)},d.ext&&Object.keys(d.ext).map(function(e){h[e]=d.ext[e]}),h;if(1<arguments.length){for(var p={playerVersion:oe,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)p[g[y]]=arguments[y];return p.ex=f?(f[t]||{}).msg:"",p}}),o="play",le="playing",ce="ended",ue="pause",he="error",de="seeking",y="seeked",s="timeupdate",fe="waiting",k="canplay",pe="durationchange",ge="volumechange",C="loadeddata",ye="ratechange",me="progress",ve="loadstart",ke="emptied",Ce="focus",be="ready",_e="urlNull",we="autoplay_started",Te="autoplay_was_prevented",xe="complete",Se="replay",Ee="destroy",Pe="urlchange",Le="download_speed_change",b="fullscreen_change",Ie="cssFullscreen_change",Ae="mini_state_change",Oe="definition_change",De="after_definition_change",Re="video_resize",Me="pip_change",je="screenShot",Ne="playnext",Fe="shortcut",He="user_action",Be="reset",Ue="source_error",Ve="source_success",We=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],W={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Ge="fps_stuck",ze=Object.freeze(Object.defineProperty({__proto__:null,PLAY:o,PLAYING:le,ENDED:ce,PAUSE:ue,ERROR:he,SEEKING:de,SEEKED:y,TIME_UPDATE:s,WAITING:fe,CANPLAY:k,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:pe,VOLUME_CHANGE:ge,LOADED_DATA:C,LOADED_METADATA:"loadedmetadata",RATE_CHANGE:ye,PROGRESS:me,LOAD_START:ve,EMPTIED:ke,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:Ce,PLAYER_BLUR:"blur",READY:be,URL_NULL:_e,AUTOPLAY_STARTED:we,AUTOPLAY_PREVENTED:Te,COMPLETE:xe,REPLAY:Se,DESTROY:Ee,URL_CHANGE:Pe,DOWNLOAD_SPEED_CHANGE:Le,FULLSCREEN_CHANGE:b,CSS_FULLSCREEN_CHANGE:Ie,MINI_STATE_CHANGE:Ae,DEFINITION_CHANGE:Oe,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:De,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:Re,PIP_CHANGE:Me,ROTATE:"rotate",SCREEN_SHOT:je,PLAYNEXT:Ne,SHORTCUT:Fe,XGLOG:"xglog",USER_ACTION:He,RESET:Be,SOURCE_ERROR:Ue,SOURCE_SUCCESS:Ve,SWITCH_SUBTITLE:"switch_subtitle",VIDEO_EVENTS:We,STATS_EVENTS:W,FPS_STUCK:Ge},Symbol.toStringTag,{value:"Module"}));function Ke(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}t(w,Y),qe=i(w),e(w,[{key:"setEventsMiddleware",value:function(t){var i=this;Object.keys(t).map(function(e){i.mediaEventMiddleware[e]=t[e]})}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map(function(e){delete t.mediaEventMiddleware[e]})}},{key:"attachVideoEvents",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=We.map(function(e){var n,o,t="on".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));return"function"==typeof i[t]&&i.on(e,i[t]),r({},e,(n=e,o=i,function(e,t){var i={player:o,eventName:n,originalEvent:e,detail:e.detail||{},timeStamp:e.timeStamp,currentTime:o.currentTime,duration:o.duration,paused:o.paused,ended:o.ended,isInternalOp:!!o._internalOp[e.type],muted:o.muted,volume:o.volume,host:v.getHostFromUrl(o.currentSrc),vtype:o.vtype};if(o.removeInnerOP(e.type),"timeupdate"===n&&(o._currentTime=o.media&&o.media.currentTime),"ratechange"===n){e=o.media?o.media.playbackRate:0;if(e&&o._rate===e)return;o._rate=o.media&&o.media.playbackRate}if("durationchange"===n&&(o._duration=o.media.duration),"volumechange"===n&&(i.isMutedChange=o._lastMuted!==o.muted,o._lastMuted=o.muted),"error"===n&&(i.error=t||o.video.error),o.mediaEventMiddleware[n]){e=Ke.bind(o,n,i);try{o.mediaEventMiddleware[n].call(o,i,e)}catch(e){throw Ke.call(o,n,i),e}}else Ke.call(o,n,i)}))})),this._evHandlers.forEach(function(e){var t=Object.keys(e)[0];n.addEventListener(t,e[t],!1)})}},{key:"detachVideoEvents",value:function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach(function(e){var t=Object.keys(e)[0];n.removeEventListener(t,e[t],!1)}),this._evHandlers.forEach(function(e){var e=Object.keys(e)[0],t="on".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));"function"==typeof i[t]&&i.off(e,i[t])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var i=this,n=(e.removeAttribute("src"),e.load(),t.forEach(function(e,t){i.media.appendChild(v.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||""),"data-index":t+1}))}),e.children);if(n){this._videoSourceCount=n.length,this._videoSourceIndex=n.length,this._vLoadeddata=function(e){i.emit(Ve,{src:e.target.currentSrc,host:v.getHostFromUrl(e.target.currentSrc)})};for(var o=null,s=0;s<this._evHandlers.length;s++)if("error"===Object.keys(this._evHandlers[s])[0]){o=this._evHandlers[s];break}this._sourceError||(this._sourceError=function(e){var t=parseInt(e.target.getAttribute("data-index"),10),t=(i._videoSourceIndex--,(0===i._videoSourceIndex||t>=i._videoSourceCount)&&(t={code:4,message:"sources_load_error"},o?o.error(e,t):i.errorHandler("error",t)),se[4]);i.emit(Ue,new ae(i,{errorType:t,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:e.target.src}))});for(var r=0;r<n.length;r++)n[r].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var i=0;i<t.length;i++)t[i].removeEventListener("error",this._sourceError);for(;0<t.length;)e.removeChild(t[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.media&&(this.media.error||i)&&(t=(i=this.media.error||i).code?se[i.code]:"other",i.message,this.media.currentSrc||(i={code:6,message:"empty_src"}),this.emit(e,new ae(this,{errorType:t,errorCode:i.code,errorMessage:i.message||"",mediaError:i})))}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e=e||this.media.buffered;var i=this.media.currentTime;if(e)for(var n=0,o=e.length;n<o&&(t[0]=e.start(n),t[1]=e.end(n),!(t[0]<=i&&i<=t[1]));n++);return t[0]-i<=0&&i-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?v.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(this.media){var t=this.media.buffered;if(t&&0!==t.length)for(var i=0;i<t.length;i++)if((t.start(i)<=this.currentTime||t.start(i)<.1)&&t.end(i)>=this.currentTime)return{start:t.start(i),end:t.end(i)}}return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){return this.media.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]:""}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(Pe,e),this.emit(fe),this._currentTime=0,this._duration=0,v.isMSE(this.media)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===v.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];(i=l(a(w.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];(i=l(a(w.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];(i=l(a(w.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,n=arguments.length,o=new Array(2<n?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];(i=l(a(w.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){l(a(w.prototype),"removeAllListeners",this).call(this)}}]);var qe,_=w,Ye=(e(Qe,[{key:"openDB",value:function(t){var i=this,n=this,e=this.myDB.version||1,e=n.indexedDB.open(n.myDB.name,e);e.onerror=function(e){},e.onsuccess=function(e){i.myDB.db=e.target.result,t.call(n)},e.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(i=n.add(t[o])).onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),o=0;o<t.length;o++)(i=n.put(t[o])).onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,i){var n=this,e=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);e.onerror=function(){i.call(n,null)},e.onsuccess=function(e){e=e.target.result;i.call(n,e)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),Qe),Xe=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Ze=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Je=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],$e="data-xgplayerid";function Qe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};m(this,Qe),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}function w(e){m(this,w),(t=qe.call(this,e))._hasStart=!1,t._currentTime=0,t._duration=0,t._internalOp={},t._lastMuted=!1,t.vtype="MP4",t._rate=-1,t.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video","data-index":-1},e.videoConfig,e.videoAttributes);var t,i=e["x5-video-player-type"]||e.x5VideoPlayerType;return p.isWeixin&&p.os.isAndroid&&i&&(t.mediaConfig["x5-video-player-type"]=i,delete t.mediaConfig.playsinline,delete t.mediaConfig["webkit-playsinline"],delete t.mediaConfig["x5-playsinline"]),e.loop&&(t.mediaConfig.loop="loop"),e.autoplayMuted&&!Object.prototype.hasOwnProperty.call(t.mediaConfig,"muted")&&(t.mediaConfig.muted=!0),t.media=v.createDom(t.mediaConfig.mediaType,"",t.mediaConfig,""),e.defaultPlaybackRate&&(t.media.defaultPlaybackRate=t.media.playbackRate=e.defaultPlaybackRate),"Number"===v.typeOf(e.volume)&&(t.volume=e.volume),e.autoplayMuted&&(t.media.muted=!0,t._lastMuted=!0),e.autoplay&&(t.media.autoplay=!0),t._interval={},t.mediaEventMiddleware={},t.attachVideoEvents(),t}function et(n,e,o){for(var t=arguments.length,i=new Array(3<t?t-3:0),s=3;s<t;s++)i[s-3]=arguments[s];e=e.call.apply(e,[n].concat(i));o&&"function"==typeof o&&(e&&e.then?e.then(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.call.apply(o,[n].concat(t))}):o.call.apply(o,[n].concat(i)))}function tt(s,r){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),this.__hooks[s]||(this.__hooks[s]=null),function(){var e,t=arguments,i=this;if(a.pre)try{(e=a.pre).call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(s,":pre error] >> ").concat(e.message),e}if(this.__hooks&&this.__hooks[s])try{var n,o=(n=this.__hooks[s]).call.apply(n,[this,this].concat(Array.prototype.slice.call(arguments)));o?o.then?o.then(function(e){!1!==e&&et.apply(void 0,[i,r,a.next].concat(c(t)))}).catch(function(e){throw e}):et.apply(void 0,[this,r,a.next].concat(Array.prototype.slice.call(arguments))):void 0===o&&et.apply(void 0,[this,r,a.next].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(s,"] >> ").concat(e.message),e}else et.apply(void 0,[this,r,a.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function it(e,t){var i=this.__hooks;if(i)return i.hasOwnProperty(e)?(i&&(i[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function nt(e,t){var i=this.__hooks;i&&delete i[e]}function ot(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var e=this.plugins[e.toLowerCase()],t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.useHooks&&e.useHooks.apply(e,i)}}function st(e){if(this.plugins&&this.plugins[e.toLowerCase()]){e=this.plugins[e.toLowerCase()];if(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.removeHooks&&e.removeHooks.apply(e,i)}}}function rt(t,e){e=1<arguments.length&&void 0!==e?e:[];t.__hooks={},e&&e.map(function(e){t.__hooks[e]=null}),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map(function(e){if(t.__hooks[e])return e})}})}function at(e){e.__hooks=null}function T(t,i,n){for(var e=arguments.length,o=new Array(3<e?e-3:0),s=3;s<e;s++)o[s-3]=arguments[s];if(!t.__hooks||!t.__hooks[i])return n.call.apply(n,[t,t].concat(o));var r=(r=t.__hooks[i]).call.apply(r,[t,t].concat(o));if(r&&r.then)r.then(function(e){return!1===e?null:n.call.apply(n,[t,t].concat(o))}).catch(function(e){console.warn("[runHooks]".concat(i," reject"),e.message)});else if(!1!==r)return n.call.apply(n,[t,t].concat(o))}function lt(e,t){d.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}e(ut,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=(e.pluginName?e:this.constructor).pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||this.lang}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=v.checkTouchSupport()?"touch":"mouse";return e=!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType?e:this.playerConfig.domEventType}},{key:"on",value:function(e,t){var i=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach(function(e){i.__events[e]=t,i.player.on(e,t)}):lt(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(t,i){var n=this;t&&i&&this.player?"string"==typeof t?(this.__onceEvents[t]=i,this.player.once(t,i)):Array.isArray(t)&&t.forEach(function(e){n.__onceEvents[e]=i,n.player.once(t,i)}):lt(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(t,i){var n=this;t&&i&&this.player?"string"==typeof t?(delete this.__events[t],this.player.off(t,i)):Array.isArray(t)&&t.forEach(function(e){delete n.__events[t],n.player.off(e,i)}):lt(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(t){Object.keys(i[t]).forEach(function(e){i[t][e]&&i.off(e,i[t][e]),e&&delete i[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var i=arguments.length,n=new Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(t=this.player).emit.apply(t,[e].concat(n))}}},{key:"emitUserAction",value:function(e,t){var i;this.player&&(i=u(u({},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),{},{pluginName:this.pluginName}),this.player.emitUserAction(e,t,i))}},{key:"hook",value:function(e,t){return tt.call.apply(tt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return it.call.apply(it,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return nt.call.apply(nt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return i&&(t.pluginName=i),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var t=this,e=this.player,i=this.pluginName;this.offAll(),v.clearAllTimers(this),v.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(e){t[e]=null}),e.unRegisterPlugin(i),at(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.defineProperty(e,i,t[i])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]);var ct=ut;function ut(e){m(this,ut),v.checkIsFunction(this.beforeCreate)&&this.beforeCreate(e),rt(this),this.__args=e,this.__events={},this.__onceEvents={},this.config=e.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(e)}"undefined"==typeof Element||Element.prototype.matches||((Mt=Element.prototype).matches=Mt.matchesSelector||Mt.mozMatchesSelector||Mt.msMatchesSelector||Mt.oMatchesSelector||Mt.webkitMatchesSelector);function ht(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}function dt(e,t,i,n,o){var s=function(t,i,e,n){return function(e){e.delegateTarget=ht(e.target,i),e.delegateTarget&&n.call(t,e)}}.apply(this,arguments);return e.addEventListener(i,s,o),{destroy:function(){e.removeEventListener(i,s,o)}}}function ft(e,t,i,n,o){return"function"==typeof e.addEventListener?dt.apply(null,arguments):"function"==typeof i?dt.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,function(e){return dt(e,t,i,n,o)}))}var pt={CONTROLS:"controls",ROOT:"root"},x={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function gt(e){return e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function yt(t,e,i,n,o){var i=2<arguments.length&&void 0!==i?i:"",s=3<arguments.length&&void 0!==n?n:{},n=4<arguments.length&&void 0!==o?o:"",r=null;if(t instanceof window.Element)return v.addClass(t,i),Object.keys(s).map(function(e){t.setAttribute(e,s[e])}),t;if(gt(t)||gt(t.url))return s.src=gt(t)?t:t.url||"",r=v.createDom(t.tag||"img","",s,"xg-img ".concat(i));if("function"==typeof t)try{return(r=t())instanceof window.Element?(v.addClass(r,i),Object.keys(s).map(function(e){r.setAttribute(e,s[e])}),r):(d.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(n,"] is a function mast return an Element Object")),null)}catch(e){return d.logError("Plugin named [".concat(n,"]:createIcon"),e),null}return"string"==typeof t?v.createDomFromHtml(t,s,i):(d.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(n,"] is invalid")),null)}function mt(c,u){var h=u.config.icons||u.playerConfig.icons;Object.keys(c).map(function(e){var t,i,n,o,s=c[e],r=s&&s.class?s.class:"",a=s&&s.attr?s.attr:{},l=null;h&&h[e]&&(n=h[e],o=r,r="object"===g(n)&&n.class&&"string"==typeof n.class?"".concat(o," ").concat(n.class):o,t=h[e],i=a,"object"===g(t)&&t.attr&&"object"===g(t.attr)&&Object.keys(t.attr).map(function(e){i[e]=t.attr[e]}),a=i,l=yt(h[e],e,r,a,u.pluginName)),!l&&s&&(l=yt(s.icon||s,a,r,{},u.pluginName)),u.icons[e]=l})}t(E,ct),vt=i(E),e(E,[{key:"__init",value:function(e){if(l(a(E.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,mt(this.registerIcons()||{},this),this.langText={};var n=this.registerLanguageTexts()||{},o=this,s=(Object.keys(n).map(function(i){Object.defineProperty(o.langText,i,{get:function(){var e=o.lang,t=o.i18n;return t[i]||n[i]&&n[i][e]||""}})}),"");try{s=this.render()}catch(e){throw d.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(s)(i=E.insert(s,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=v.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;s=this.config.attr||{},e=this.config.style||{};this.setAttr(s),this.setStyle(e),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var s,r=this;this.root&&(this._children=[],s=this.children())&&"object"===g(s)&&0<Object.keys(s).length&&Object.keys(s).map(function(e){var t,i,n=s[e],o={root:r.root};"function"==typeof n?(t=r.config[e]||{},i=n):"object"===g(n)&&"function"==typeof n.plugin&&(t=n.options?v.deepCopy(r.config[e]||{},n.options):r.config[e]||{},i=n.plugin),void 0!==(o.config=t).index&&(o.index=t.index),t.root&&(o.root=t.root),r.registerPlugin(i,o,e)})}},{key:"updateLang",value:function(i){i=i||this.lang;var e=this.root,n=this.i18n,o=this.langText;e&&function e(t,i){for(var n=0;n<t.children.length;n++)0<t.children[n].children.length?e(t.children[n],i):i(t.children[n])}(e,function(e){var t=e.getAttribute&&e.getAttribute("lang-key");t&&(t=n[t.toUpperCase()]||o[t])&&(e.innerHTML="function"==typeof t?t(i):t)})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=this.i18n||{},n=this.langText,i=(e.setAttribute&&e.setAttribute("lang-key",t),i[t]||n[t]||"");i&&(e.innerHTML=i)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e=(t.root=t.root||this.root,l(a(E.prototype),"registerPlugin",this).call(this,e,t,i));return this._children.push(e),e}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var n=this;arguments.length<3&&"function"==typeof t?Array.isArray(e)?e.forEach(function(e){n.bindEL(e,t)}):this.bindEL(e,t):(e=E.delegate.call(this,this.root,e,t,i),this.__delegates=this.__delegates.concat(e))}},{key:"unbind",value:function(e,t){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach(function(e){i.unbindEL(e,t)}):this.unbindEL(e,t);else for(var n="".concat(e,"_").concat(t),o=0;o<this.__delegates.length;o++)if(this.__delegates[o].key===n){this.__delegates[o].destroy(),this.__delegates.splice(o,1);break}}},{key:"setStyle",value:function(t,e){var i=this;if(this.root)return"String"===v.typeOf(t)?this.root.style[t]=e:void("Object"===v.typeOf(t)&&Object.keys(t).map(function(e){i.root.style[e]=t[e]}))}},{key:"setAttr",value:function(t,e){var i=this;if(this.root)return"String"===v.typeOf(t)?this.root.setAttribute(t,e):void("Object"===v.typeOf(t)&&Object.keys(t).map(function(e){i.root.setAttribute(e,t[e])}))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t)&&t()}},{key:"bindEL",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,i)}},{key:"unbindEL",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,i)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&e instanceof window.Element)return this.root.appendChild(e);if(!(t&&t instanceof window.Element))return null;try{return("string"==typeof e?this.find(e):e).appendChild(t)}catch(e){return d.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var t=this,i=this.player;this.__delegates.map(function(e){e.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(e){i.unRegisterPlugin(e.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),l(a(E.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(e){t[e]=null})}}],[{key:"insert",value:function(e,t){var i=t.children.length,n=Number(2<arguments.length&&void 0!==arguments[2]?arguments[2]:0),o=e instanceof window.Node;if(i){for(var s=0,r=null,a="";s<i;s++){var r=t.children[s],l=Number(r.getAttribute("data-index"));if(n<=l){a="beforebegin";break}l<n&&(a="afterend")}return o?"afterend"===a?t.appendChild(e):t.insertBefore(e,r):r.insertAdjacentHTML(a,e),"afterend"===a?t.children[t.children.length-1]:t.children[s]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(i,n,e,o){var t,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],r=[];return i instanceof window.Node&&"function"==typeof o&&(Array.isArray(e)?e.forEach(function(e){var t=ft(i,n,e,o,s);t.key="".concat(n,"_").concat(e),r.push(t)}):((t=ft(i,n,e,o,s)).key="".concat(n,"_").concat(e),r.push(t))),r}},{key:"ROOT_TYPES",get:function(){return pt}},{key:"POSITIONS",get:function(){return x}}]);var vt,S=E,kt=(e(bt,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var i=e.getAttribute($e),n=this.__handlers,o=-1,s=0;s<n.length;s++)n[s]&&e===n[s].target&&(o=s);-1<o?this.__handlers[o].handler=t:this.__handlers.push({target:e,handler:t,playerId:i})}}},{key:"unObserver",value:function(i){var n=-1;this.__handlers.map(function(e,t){i===e.target&&(n=t)});try{this.observer&&this.observer.unobserve(i)}catch(e){}this.observer&&this.observer.unobserve(i),-1<n&&this.__handlers.splice(n,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,i=0;i<t.length;i++)if(t[i]&&e===t[i].target){try{t[i].handler(e)}catch(e){console.error(e)}return!0}return!1}}]),bt),Ct=null;function bt(){var n=this;if(m(this,bt),r(this,"__trigger",function(e){var t=(new Date).getTime();n.timeStamp=t;for(var i=0;i<e.length;i++)n.__runHandler(e[i].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(e,t){var i=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Q(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),ee(e,100,{leading:i,trailing:n,maxWait:100})}(this.__trigger,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}function E(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return m(this,E),(e=vt.call(this,e)).__delegates=[],e}var P={pluginGroup:{},init:function(e){var t,i,n=e._pluginInfoId;n||(n=(new Date).getTime(),e._pluginInfoId=n),e.config.closeResizeObserver||(t=e.root,i=function(){e.resize()},(Ct=Ct||new kt).addObserver(t,i)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[n]={_player:e,_originalOptions:e.config||{},_plugins:{}}},checkPlayerRoot:function(e){if(this.pluginGroup)for(var t=Object.keys(this.pluginGroup),i=0;i<t.length;i++){var n=this.pluginGroup[t[i]]._player;if(n.root===e)return n}return null},formatPluginInfo:function(e,t){var i=null,n=null,n=e.plugin&&"function"==typeof e.plugin?(i=e.plugin,e.options):(i=e,{});return t&&(n.config=t||{}),{PLUFGIN:i,options:n}},checkPluginIfExits:function(e,t){for(var i=0;i<t.length;i++)if(e.toLowerCase()===t[i].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var i=Object.keys(t),n=null,o=0;o<i.length;o++)if(e.toLowerCase()===i[o].toLowerCase()){n=t[i[o]];break}return"Object"===v.typeOf(n)?{root:n.root,position:n.position}:{}},lazyRegister:function(i,e){var n=this,o=e.timeout||1500;return Promise.race([e.loader().then(function(e){var t=e&&e.__esModule?e.default:e;n.register(i,t,e.options)}),new Promise(function(e,t){setTimeout(function(){t(new Error("timeout"))},o)})])},register:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var n=e._pluginInfoId;if(n&&this.pluginGroup[n]){this.pluginGroup[n]._plugins||(this.pluginGroup[n]._plugins={});var o=this.pluginGroup[n]._plugins,s=this.pluginGroup[n]._originalOptions,r=(i.player=this.pluginGroup[n]._player,i.pluginName||t.pluginName);if(!r)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){i.config||(i.config={});for(var a=Object.keys(s),l=0;l<a.length;l++)if(r.toLowerCase()===a[l].toLowerCase()){var c=s[a[l]];"Object"===v.typeOf(c)?i.config=Object.assign({},i.config,s[a[l]]):"Boolean"===v.typeOf(c)&&(i.config.disable=!c);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach(function(e){void 0===i.config[e]&&(i.config[e]=t.defaultConfig[e])}),i.root?"string"==typeof i.root&&(i.root=e[i.root]):i.root=e.root,i.index=i.config.index||0;try{o[r.toLowerCase()]&&(this.unRegister(n,r.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(r,"] exist, destroy the old instance")));var u=new t(i);return o[r.toLowerCase()]=u,o[r.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(r,"]"))}}},unRegister:function(t,i){t._pluginInfoId&&(t=t._pluginInfoId),i=i.toLowerCase();try{var e=this.pluginGroup[t]._plugins[i];e&&(e.pluginName&&e.__destroy(),delete this.pluginGroup[t]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(t,"] error"),e)}},deletePlugin:function(e,t){e=e._pluginInfoId;e&&this.pluginGroup[e]&&this.pluginGroup[e]._plugins&&delete this.pluginGroup[e]._plugins[t]},getPlugins:function(e){e=e._pluginInfoId;return e&&this.pluginGroup[e]?this.pluginGroup[e]._plugins:{}},findPlugin:function(e,t){e=e._pluginInfoId;return e&&this.pluginGroup[e]?(t=t.toLowerCase(),this.pluginGroup[e]._plugins[t]):null},beforeInit:function(o){var s=this;function r(e){return e&&e.then?e:new Promise(function(e){e()})}return new Promise(function(t){if(s.pluginGroup)return(o._loadingPlugins&&o._loadingPlugins.length?Promise.all(o._loadingPlugins):Promise.resolve()).then(function(){var i,n,e=o._pluginInfoId;s.pluginGroup[e]?(i=s.pluginGroup[e]._plugins,n=[],Object.keys(i).forEach(function(e){if(i[e]&&i[e].beforePlayerInit)try{var t=i[e].beforePlayerInit();n.push(r(t))}catch(e){throw n.push(r(null)),e}}),Promise.all([].concat(n)).then(function(){t()}).catch(function(e){console.error(e),t()})):t()})})},afterInit:function(e){var t,e=e._pluginInfoId;e&&this.pluginGroup[e]&&(t=this.pluginGroup[e]._plugins,Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()}))},setLang:function(e,t){var i,t=t._pluginInfoId;t&&this.pluginGroup[t]&&(i=this.pluginGroup[t]._plugins,Object.keys(i).forEach(function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))},reRender:function(t){var i,n,o=this,s=t._pluginInfoId;s&&this.pluginGroup[s]&&(i=[],n=this.pluginGroup[s]._plugins,Object.keys(n).forEach(function(e){"controls"!==e&&n[e]&&(i.push({plugin:n[e].func,options:n[e].__args}),o.unRegister(s,e))}),i.forEach(function(e){o.register(t,e.plugin,e.options)}))},onPluginsReady:function(e){var t,e=e._pluginInfoId;e&&this.pluginGroup[e]&&(t=this.pluginGroup[e]._plugins||{},Object.keys(t).forEach(function(e){t[e].onPluginsReady&&"function"==typeof t[e].onPluginsReady&&t[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup[e]){if(t)for(var i=Object.keys(this.pluginGroup),n=0;n<i.length;n++){var o=this.pluginGroup[i[n]];o&&o._player&&(this.pluginGroup[i[n]]._player.isUserActive=!1)}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var i=this.pluginGroup[e[t]];if(i&&i._player&&i._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var i=e.root;Ct.unObserver(i,void 0);for(var i=this.pluginGroup[t]._plugins,n=0,o=Object.keys(i);n<o.length;n++){var s=o[n];this.unRegister(t,s)}i=e.isUseActive;delete this.pluginGroup[t],delete e._pluginInfoId,i&&0<(e=Object.keys(this.pluginGroup)).length&&this.setCurrentUserActive(e[e.length-1],!0)}}},L={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function _t(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:e="zh-cn"===(e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase())?"zh":e,controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}};var e}var wt,Tt=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],xt=(t(St,S),wt=i(St),e(St,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==p.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var t,i=this,e=this.config,n=e.disable,o=e.height,e=e.mode;n||("flex"===e&&this.player.addClass(L.FLEX_CONTROLS),t={height:"".concat(o,"px")},Object.keys(t).map(function(e){i.root.style[e]=t[e]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ae,function(e){e?v.addClass(i.root,"mini-controls"):v.removeClass(i.root,"mini-controls")}),n=this.playerConfig.isMobileSimulateMode,"mobile"!==p.device&&"mobile"!==n&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave)))}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&v.addClass(this.root,L.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){v.removeClass(this.root,L.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;if(this.root){var n=e.defaultConfig||{};if(!t.root){switch(t.position||(t.config&&t.config.position?t.config:n).position){case x.CONTROLS_LEFT:t.root=this.left;break;case x.CONTROLS_RIGHT:t.root=this.right;break;case x.CONTROLS_CENTER:t.root=this.center;break;case x.CONTROLS:t.root=this.root;break;default:t.root=this.left}return l(a(St.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==p.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,i=e.autoHide,n=e.initShow;if(!e.disable)return e=v.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},r({},L.CONTROLS_AUTOHIDE,i),{"xgplayer-controls-initshow":n||!i}),'<xg-controls class="'.concat(e,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),St),I={lang:{},langKeys:[],textKeys:[]};function St(){var n;m(this,St);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(n=wt.call.apply(wt,[this].concat(t))),"onMouseEnter",function(e){var t=h(n),i=t.player;t.playerConfig.closeControlsBlur&&i.focus({autoHide:!1})}),r(h(n),"onMouseLeave",function(e){h(n).player.focus()}),n}function Et(o,s){Object.keys(s).forEach(function(e){var t,i=v.typeOf(s[e]),n=v.typeOf(o[e]);"Array"===i?("Array"!==n&&(o[e]=[]),(t=o[e]).push.apply(t,c(s[e]))):"Object"===i?("Object"!==n&&(o[e]={}),Et(o[e],s[e])):o[e]=s[e]})}function Pt(){Object.keys(I.lang.en).map(function(e){I.textKeys[e]=e})}function Lt(e,t){var i=e.LANG;(t=t||I).lang&&(e=e.TEXT||{},t.lang[i="zh"===i?"zh-cn":i]?Et(t.lang[i],e):(t.langKeys.push(i),t.lang[i]=e),Pt())}Lt({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var It,At={get textKeys(){return I.textKeys},get langKeys(){return I.langKeys},get lang(){var t={};return I.langKeys.map(function(e){t[e]=I.lang[e]}),I.lang["zh-cn"]&&(t.zh=I.lang["zh-cn"]||{}),t},extend:function(t,i){var n,e=[];(i=i||I).lang&&(e="Array"!==v.typeOf(t)?Object.keys(t).map(function(e){return{LANG:"zh"===e?"zh-cn":e,TEXT:t[e]}}):t,n=i.lang,e.map(function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),n[e.LANG]?Et(n[e.LANG]||{},e.TEXT||{}):Lt(e,i)}),Pt())},use:Lt,init:function(e){var t,e={lang:{},langKeys:[],textKeys:{},pId:e};return Et(e.lang,I.lang),(t=e.langKeys).push.apply(t,c(I.langKeys)),Et(e.textKeys,I.textKeys),e}},Ot=["play","pause","replay","retry"],Dt=0,Rt=0,Mt=(t(A,_),It=i(A),e(A,[{key:"_initDOM",value:function(){var t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit(he,new ae("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=e}var i,e=P.checkPlayerRoot(this.root),e=(e&&(d.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),e.destroy()),this.root.setAttribute($e,this.playerId),P.init(this),this._initBaseDoms(),this.constructor.XgVideoProxy),n=(e&&this.mediaConfig.mediaType===e.mediaType&&(n=this.innerContainer||this.root,this.detachVideoEvents(this.media),e=new e(n,this.config,this.mediaConfig),this.attachVideoEvents(e),this.media=e),this.media.setAttribute($e,this.playerId),this.config.controls&&(n=this.config.controls.root||null,e=P.register(this,xt,{root:n}),this.controls=e),"mobile"===this.config.isMobileSimulateMode?"mobile":p.device),e=(this.addClass("".concat(L.DEFAULT," ").concat(L.INACTIVE," xgplayer-").concat(n," ").concat(this.config.controls?"":L.NO_CONTROLS)),this.config.autoplay?this.addClass(L.ENTER):this.addClass(L.NO_START),this.config.fluid?(n=(e=this.config).width,e=e.height,"number"==typeof n&&"number"==typeof e||(n=600,e=337.5),i={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*e/n,"%")},Object.keys(i).forEach(function(e){t.root.style[e]=i[e]})):["width","height"].forEach(function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))}),this.root.getBoundingClientRect()),n=e.width,o=e.height,s=e.left,e=e.top;return this.sizeInfo.width=n,this.sizeInfo.height=o,this.sizeInfo.left=s,this.sizeInfo.top=e,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=v.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var t=this;["focus","blur"].forEach(function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])}),Xe.forEach(function(e){document&&document.addEventListener(e,t.onFullscreenChange)}),p.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(C,this.resize),this.playFunc=function(){t.config.closeFocusVideoFocus||t.media.focus()},this.once(o,this.playFunc)}},{key:"_unbindEvents",value:function(){var t=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Xe.forEach(function(e){document.removeEventListener(e,t.onFullscreenChange)}),this.playFunc&&this.off(o,this.playFunc),this.off(k,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;!this.media||(!e||""===e||"Array"===v.typeOf(e)&&0===e.length)&&(e="",this.emit(_e),d.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart)||(this._detachSourceEvents(this.media),"Array"===v.typeOf(e)&&0<e.length?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e,"Number"===v.typeOf(this.config.volume)&&(this.volume=this.config.volume),e=this.innerContainer||this.root,this.media instanceof window.Element&&!e.contains(this.media)&&e.insertBefore(this.media,e.firstChild),e=this.media.readyState,d.logInfo("_startInit readyState",e),this.config.autoplay&&(v.isMSE(this.media)||this.load(),p.os.isIpad||p.os.isPhone)&&this.mediaPlay(),2<=e?this.canPlayFunc():this.once(k,this.canPlayFunc),(!this.hasStart||this.state<4)&&P.afterInit(this),this.hasStart=!0,this.setState(4),v.setTimeout(this,function(){t.emit(xe)},0))}},{key:"_registerPlugins",value:function(){var n=this,o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=(this._loadingPlugins=[],this.config.ignores||[]),t=this.config.plugins||[],i=this.config.i18n||[],s=(o&&At.extend(i,this.__i18n),e.join("||").toLowerCase().split("||")),r=this.plugins;t.forEach(function(e){try{var t,i=(e.plugin||e).pluginName;if(i&&-1<s.indexOf(i.toLowerCase()))return null;if(o||!r[i.toLowerCase()]){if(!e.lazy||!e.loader)return n.registerPlugin(e);t=P.lazyRegister(n,e),e.forceBeforeInit&&(t.then(function(){n._loadingPlugins.splice(n._loadingPlugins.indexOf(t),1)}).catch(function(e){d.logError("_registerPlugins:loadingPlugin",e),n._loadingPlugins.splice(n._loadingPlugins.indexOf(t),1)}),n._loadingPlugins.push(t))}}catch(e){d.logError("_registerPlugins:",e)}})}},{key:"_registerPresets",value:function(){var r=this;this.config.presets.forEach(function(e){var t,i,n,o,s;t=r,e=(e=e).preset&&e.options?new e.preset(e.options,t.config):new e({},t.config),i=void 0===(i=e.plugins)?[]:i,n=void 0===(n=e.ignores)?[]:n,o=e.icons,s=void 0===o?{}:o,o=e.i18n,e=void 0===o?[]:o,t.config.plugins||(t.config.plugins=[]),t.config.ignores||(t.config.ignores=[]),(o=t.config.plugins).push.apply(o,c(i)),(o=t.config.ignores).push.apply(o,c(n)),Object.keys(s).map(function(e){t.config.icons[e]||(t.config.icons[e]=s[e])}),i=t.config.i18n||[],e.push.apply(e,c(i)),t.config.i18n=e})}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case x.ROOT_RIGHT:this.rightBar||(this.rightBar=v.createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case x.ROOT_LEFT:this.leftBar||(this.leftBar=v.createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case x.ROOT_TOP:this.topBar||(this.topBar=v.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&v.addClass(this.topBar,L.TOP_BAR_AUTOHIDE)),t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var e=P.formatPluginInfo(e,t),t=e.PLUFGIN,e=e.options,i=this.config.plugins,i=(P.checkPluginIfExits(t.pluginName,i)||i.push(t),P.getRootByConfig(t.pluginName,this.config)),i=(i.root&&(e.root=i.root),i.position&&(e.position=i.position),e.position||e.config&&e.config.position||t.defaultConfig&&t.defaultConfig.position);return!e.root&&"string"==typeof i&&-1<i.indexOf("controls")?this.controls&&this.controls.registerPlugin(t,e,t.pluginName):(e.root||(e.root=this._getRootByPosition(i)),P.register(this,t,e))}},{key:"deregister",value:function(e){"string"==typeof e?P.unRegister(this,e):e instanceof ct&&P.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof ct&&(t=e.pluginName),t)for(var i=this.config.plugins.length-1;-1<i;i--)if(this.config.plugins[i].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(i,1);break}}},{key:"plugins",get:function(){return P.getPlugins(this)}},{key:"getPlugin",value:function(e){e=P.findPlugin(this,e);return e&&e.pluginName?e:null}},{key:"addClass",value:function(e){!this.root||v.hasClass(this.root,e)||v.addClass(this.root,e)}},{key:"removeClass",value:function(e){this.root&&v.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return v.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(t){var i=this;if(!(3<this.state))return t||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(3),this._registerPlugins(!1),P.beforeInit(this).then(function(){var e;if(i.config)return t=t||i.url||i.config.url,e=i.preProcessUrl(t),i._startInit(e.url)}).catch(function(e){throw e.fileName="player",e.lineNumber="236",d.logError("start:beforeInit:",e),e})}},{key:"switchURL",value:function(e,t){var o=this,s=e,r=("Object"===v.typeOf(e)&&(s=e.url),s=this.preProcessUrl(s).url,this.currentTime),a=this.paused&&!this.isError;return this.src=s,new Promise(function(e,t){function i(){o.currentTime=r,a&&o.pause(),o.off("error",n),e(!0)}var n=function(e){o.off("timeupdate",i),o.off("canplay",i),t(e)};o.once("error",n),s?(p.os.isAndroid?o.once("timeupdate",i):o.once("canplay",i),o.play()):o.errorHandler("error",{code:6,message:"empty_src"})})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e,t=this;if(this.hasStart||!(this.state<4))return this.state<6&&(this.removeClass(L.NO_START),!this.isCanplay)&&this.addClass(L.ENTER),void 0!==(e=l(a(A.prototype),"play",this).call(this))&&e&&e.then?e.then(function(){t.removeClass(L.NOT_ALLOW_AUTOPLAY),t.addClass(L.PLAYING),t.state<6&&(d.logInfo(">>>>playPromise.then"),t.setState(6),t.emit(we))}).catch(function(e){d.logWarn(">>>>playPromise.catch",e.name),t.media&&t.media.error?(t.onError(),t.removeClass(L.ENTER)):"NotAllowedError"===e.name&&(t._errorTimer=v.setTimeout(t,function(){t._errorTimer=null,t.emit(Te),t.addClass(L.NOT_ALLOW_AUTOPLAY),t.removeClass(L.ENTER),t.pause(),t.setState(5)},0))}):(d.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(L.NOT_ALLOW_AUTOPLAY),this.removeClass(L.NO_START),this.removeClass(L.ENTER),this.addClass(L.PLAYING),this.emit(we))),e;this.removeClass(L.NO_START),this.addClass(L.ENTER),this.start(),this._useAutoplay=!0}},{key:"mediaPause",value:function(){l(a(A.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){l(a(A.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(L.PAUSED),T(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;T(this,"pause",function(){l(a(A.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,t){var i,n,o,s=this;this.media&&!Number.isNaN(Number(e))&&this.hasStart&&(i=(n=this.config).isSeekedPlay,n=n.seekedStatus,o=t||(i?"play":n),e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this._isPauseBeforeSeek||(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(y,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(s.removeClass(L.ENTER),s.isSeeking=!1,o){case"play":s.play();break;case"pause":s.pause();break;default:1<s._isPauseBeforeSeek||s.paused?s.pause():s.play()}s._isPauseBeforeSeek=0,s._onceSeekCanplay=null},this.once(y,this._onceSeekCanplay),this.state<6?(this.removeClass(L.NO_START),this.currentTime=e,this.play()):this.currentTime=e)}},{key:"getInitDefinition",value:function(){var t=this,e=this.config,i=e.definition;!e.url&&i&&i.list&&0<i.list.length&&i.defaultDefinition&&i.list.map(function(e){e.definition===i.defaultDefinition&&(t.config.url=e.url,t.curDefinition=e)})}},{key:"changeDefinition",value:function(t,e){var i=this,n=this.config.definition;Array.isArray(null==n?void 0:n.list)&&n.list.forEach(function(e){(null==t?void 0:t.definition)===e.definition&&(i.curDefinition=e)}),null!=t&&t.bitrate&&"number"!=typeof t.bitrate&&(t.bitrate=parseInt(t.bitrate,10)||0),this.emit(Oe,{from:e,to:t}),this.hasStart?(n=this.switchURL(t.url,u({seamless:!1!==n.seamless&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported},t)))&&n.then?n.then(function(){i.emit(De,{from:e,to:t})}):this.emit(De,{from:e,to:t}):this.config.url=t.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(C,this.reloadFunc)}},{key:"resetState",value:function(){var t=this,e=[L.NOT_ALLOW_AUTOPLAY,L.PLAYING,L.NO_START,L.PAUSED,L.REPLAY,L.ENTER,L.ENDED,L.ERROR,L.LOADING];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,e.forEach(function(e){t.removeClass(e)}),this.addClass(L.ENTER),this.emit(Be)}},{key:"reset",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length?arguments[1]:void 0;this.resetState(),this.plugins&&(e.map(function(e){i.deregister(e)}),n)&&(t=_t(),Object.keys(this.config).keys(function(e){"undefined"===i.config[e]||"plugins"!==e&&"presets"!==e&&"el"!==e&&"id"!==e||(i.config[e]=t[e])}))}},{key:"destroy",value:function(){var t=this,e=this.innerContainer,i=this.root,n=this.media;if(i&&n){if(this.hasStart=!1,this._useAutoplay=!1,i.removeAttribute($e),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),v.clearAllTimers(this),this.emit(Ee),P.destroy(this),at(this),l(a(A.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),e)for(var o=e.children,s=0;s<o.length;s++)e.removeChild(o[s]);!e&&n instanceof window.Node&&i.contains(n)&&i.removeChild(n),["topBar","leftBar","rightBar","innerContainer"].map(function(e){t[e]&&i.removeChild(t[e]),t[e]=null});n=i.className.split(" ");0<n.length?i.className=n.filter(function(e){return e.indexOf("xgplayer")<0}).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(e){t[e]=!1})}}},{key:"replay",value:function(){var t=this;this.removeClass(L.ENDED),this.currentTime=0,this.isSeeking=!1,T(this,"replay",function(){t.once(y,function(){var e=t.mediaPlay();e&&e.catch&&e.catch(function(e){console.log(e)})}),t.play(),t.emit(Se),t.onPlay()})}},{key:"retry",value:function(){var i=this;this.removeClass(L.ERROR),this.addClass(L.LOADING),T(this,"retry",function(){var e=i.currentTime,t=i.config.url,t=v.isMSE(i.media)?{url:t}:i.preProcessUrl(t);i.src=t.url,i.config.isLive||(i.currentTime=e),i.once(k,function(){i.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,t,i,n){e&&(n=n||L.PARENT_FULLSCREEN,this._orgCss||(this._orgCss=v.filterStyleFromText(e)),v.addClass(e,i),t)&&t!==e&&!this._orgPCss&&(this._orgPCss=v.filterStyleFromText(t),v.addClass(t,n),t.setAttribute($e,this.playerId))}},{key:"recoverFullStyle",value:function(e,t,i,n){n=n||L.PARENT_FULLSCREEN,this._orgCss&&(v.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),v.removeClass(e,i),t&&t!==e&&this._orgPCss&&(v.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",v.removeClass(t,n),t.removeAttribute($e))}},{key:"getFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,i=this.media,e=e||t;if(this._fullScreenOffset={top:v.scrollTop(),left:v.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get",v.getFullScreenEl()===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var n=0;n<Ze.length;n++){var o,s=Ze[n];if(e[s])return(o="webkitRequestFullscreen"===s?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[s]())&&o.then?o:Promise.resolve()}return i.fullscreenEnabled||i.webkitSupportsFullscreen?(i.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||v.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var i=0;i<Je.length;i++){var n,o=Je[i];if(document[o])return(n=document[o]())&&n.then?n:Promise.resolve()}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(e){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=(this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen(),e?"".concat(L.INNER_FULLSCREEN," ").concat(L.CSS_FULLSCREEN):L.CSS_FULLSCREEN),t=(this.changeFullStyle(this.root,e,t),this.config.fullscreen),t=void 0===t?{}:t;(!0===t.useCssFullscreen||"function"==typeof t.useCssFullscreen&&t.useCssFullscreen())&&(this.fullscreen=!0,this.emit(b,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Ie,!0)}},{key:"exitCssFullscreen",value:function(){var e,t=this._cssfullscreenEl?"".concat(L.INNER_FULLSCREEN," ").concat(L.CSS_FULLSCREEN):L.CSS_FULLSCREEN;this.fullscreen?!0===(e=void 0===(e=this.config.fullscreen)?{}:e).useCssFullscreen||"function"==typeof e.useCssFullscreen&&e.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this.fullscreen=!1,this.emit(b,!1)):this.removeClass(t):this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Ie,!1)}},{key:"getRotateFullscreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=(this.cssfullscreen&&this.exitCssFullscreen(e),e?"".concat(L.INNER_FULLSCREEN," ").concat(L.ROTATE_FULLSCREEN):L.ROTATE_FULLSCREEN);this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,L.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(b,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(L.INNER_FULLSCREEN," ").concat(L.ROTATE_FULLSCREEN):L.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,L.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(b,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(Ce,u({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit("blur",u({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},i=this.innerStates;this.isActive=!0,this.removeClass(L.INACTIVE),this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null),void 0!==t.isLock&&(i.isActiveLocked=t.isLock),!1===t.autoHide||!0===t.isLock||i.isActiveLocked?this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null):(i=t&&t.delay?t.delay:this.config.inactive,this.userTimer=v.setTimeout(this,function(){e.userTimer=null,e.blur()},i))}},{key:"onBlur",value:function(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).ignorePaused,t=void 0!==t&&t;this.isActive&&!this.innerStates.isActiveLocked&&(e=this.config.closePauseVideoFocus,this.isActive=!1,t||e||!this.paused&&!this.ended)&&this.addClass(L.INACTIVE)}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(L.ENTER),this.removeClass(L.ERROR),this.removeClass(L.LOADING),this.isCanplay=!0,this.waitTimer&&v.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(L.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(L.PAUSED),this.ended&&this.removeClass(L.ENDED),this.config.closePlayVideoFocus||this.focus()}},{key:"onPause",value:function(){this.addClass(L.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(v.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(L.ENDED),this.setState(7)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(L.NOT_ALLOW_AUTOPLAY),this.removeClass(L.NO_START),this.removeClass(L.ENTER),this.removeClass(L.LOADING),this.addClass(L.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(L.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&v.clearTimeout(this,this.waitTimer),this.removeClass(L.LOADING),this.removeClass(L.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&v.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=v.setTimeout(this,function(){e.addClass(L.LOADING),v.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var t=this;this.isError=!1,[L.NO_START,L.PAUSED,L.ENDED,L.ERROR,L.REPLAY,L.LOADING].forEach(function(e){t.removeClass(e)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(L.LOADING))&&2<this.media.readyState&&(this.removeClass(L.LOADING),v.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<6&&this.duration&&(this.setState(6),this.emit(we)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===v.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,i){var n;this.media&&t&&e&&(n="String"===v.typeOf(e)?e:e.type||"",i.props&&"Array"!==v.typeOf(i.props)&&(i.props=[i.props]),this.emit(He,u({eventType:n,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},i)))}},{key:"updateAcc",value:function(e){var t;this._accPlayed.t&&(t=(new Date).getTime()-this._accPlayed.t,this._accPlayed.acc+=t,this._accPlayed.t=0,"ended"!==e&&!this.ended||(this._accPlayed.loopAcc=this._accPlayed.acc))}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var i=e||this.media.currentTime||.2,n=t.length,o=0;o<n;o++)if(t.start(o)<=i&&t.end(o)>i)return!0;return!1}},{key:"resizePosition",value:function(){var e,t,i,n,o,s,r,a,l=this.videoPos,c=l.rotate,u=l.vy,h=l.vx,d=l.h,l=l.w;c<0&&!u&&!h||(e=!(e=this.videoPos._pi)&&this.media.videoHeight?this.media.videoWidth/this.media.videoHeight*100:e)&&(this.videoPos.pi=e,e={rotate:c},a=t=0,i=1,c=Math.abs(c/90),r=this.root,o=this.innerContainer,n=r.offsetWidth,r=o=(o||r).offsetHeight,s=n,c%2==0?(e.scale=i=0<d?100/d:0<l?100/l:1,t=0<u?(100-d)/2-u:0,e.y=2===c?0-t:t,a=0<h?(100-l)/2-h:0,e.x=2===c?0-a:a,this.media.style.width="".concat(s,"px"),this.media.style.height="".concat(r,"px")):c%2==1&&(a=-(d=o-(r=n))/2/(s=o)*100,e.x=3===c?a+u/2:a-u/2,t=d/2/r*100,e.y=3===c?t+h/2:t-h/2,e.scale=i,this.media.style.width="".concat(s,"px"),this.media.style.height="".concat(r,"px")),l=v.getTransformStyle(e,this.media.style.transform||this.media.style.webkitTransform),this.media.style.transform=l,this.media.style.webkitTransform=l)}},{key:"position",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};this.media&&t&&t.h&&((e=this.videoPos).h=100*t.h||0,e.w=100*t.w||0,e.vx=100*t.x||0,e.vy=100*t.y||0,this.resizePosition())}},{key:"setConfig",value:function(i){var n=this;i&&Object.keys(i).map(function(e){var t;"plugins"!==e&&(n.config[e]=i[e],t=n.plugins[e.toLowerCase()])&&"Function"===v.typeOf(t.setConfig)&&t.setConfig(i[e])})}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,T(this,"playnext",function(){t.start(),t.emit(Ne,e)})}},{key:"resize",value:function(){var e,t,i,n,o,s,r,a,l,c,u=this;this.media&&(n=this.root.getBoundingClientRect(),this.sizeInfo.width=n.width,this.sizeInfo.height=n.height,this.sizeInfo.left=n.left,this.sizeInfo.top=n.top,o=(s=this.media).videoWidth,s=s.videoHeight,e=(t=this.config).fitVideoSize,"fill"!==(t=t.videoFillMode)&&"cover"!==t&&"contain"!==t||this.setAttribute("data-xgfill",t),s)&&o&&(this._videoHeight=s,this._videoWidth=o,i=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,c=n.width,n=n.height-i,o=parseInt(o/s*1e3,10),s=parseInt(c/n*1e3,10),r=c,a=n,l={},"auto"===e&&o<s||"fixWidth"===e?(a=c/o*1e3,this.config.fluid?l.paddingTop="".concat(100*a/r,"%"):l.height="".concat(a+i,"px")):("auto"===e&&s<o||"fixHeight"===e)&&(l.width="".concat(r=o*n/1e3,"px")),this.fullscreen||this.cssfullscreen||Object.keys(l).forEach(function(e){u.root.style[e]=l[e]}),("fillHeight"===t&&s<o||"fillWidth"===t&&o<s)&&this.setAttribute("data-xgfill","cover"),c={videoScale:o,vWidth:r,vHeight:a,cWidth:r,cHeight:a+i},this.resizePosition(),this.emit(Re,c))}},{key:"updateObjectPosition",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){d.logInfo("setState","state from:".concat(Tt[this.state]," to:").concat(Tt[e])),this._state=e}},{key:"preProcessUrl",value:function(e,t){var i=this.config.preProcessUrl;return!v.isBlob(e)&&i&&"function"==typeof i?i(e,t):{url:e}}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(!1===(this._hasStart=e)&&this.setState(2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state},set:function(e){e?this.setState(6):6<=this._state&&this.setState(4)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var i=this,n=this.config.definition,o=null,s=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(e){var t;(null==(t=i.curDefinition)?void 0:t.definition)===e.definition&&(o=e),n.defaultDefinition===e.definition&&(s=e)}),!s&&0<e.length&&(s=e[0]),o?this.changeDefinition(o):s&&this.changeDefinition(s)}},{key:"videoFrameInfo",get:function(){var e,t={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};return this.media&&this.media.getVideoPlaybackQuality&&(e=this.media.getVideoPlaybackQuality(),t.dropped=e.droppedVideoFrames||0,t.total=e.totalVideoFrames||0,t.corrupted=e.corruptedVideoFrames||0,0<t.total)&&(t.droppedRate=t.dropped/t.total*100,t.droppedDuration=parseInt(this.cumulateTime/t.total*t.dropped,0)),t}},{key:"lang",get:function(){return this.config.lang},set:function(t){0!==At.langKeys.filter(function(e){return e===t}).length||"zh"===t?(this.config.lang=t,P.setLang(t,this)):console.error("Sorry, set lang fail, because the language [".concat(t,"] is not supported now, list of all supported languages is [").concat(At.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return this.__i18n.lang[e="zh"===e?"zh-cn":e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return oe}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return(this.plugins.poster||this).config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return l(a(A.prototype),"readyState",this)}},{key:"error",get:function(){var e=l(a(A.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return l(a(A.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed,t=e.acc,e=e.t;return e?(new Date).getTime()-e+t:t}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){(e=v.convertDeg(e))%90==0&&e!==this.videoPos.rotate&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return Rt},set:function(e){Rt=e}},{key:"realTimeSpeed",get:function(){return Dt},set:function(e){Dt=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,t){return tt.call.apply(tt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return it.call.apply(it,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return nt.call.apply(nt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(3<n?n-3:0),s=3;s<n;s++)o[s-3]=arguments[s];return ot.call.apply(ot,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,i){for(var n=arguments.length,o=new Array(3<n?n-3:0),s=3;s<n;s++)o[s-3]=arguments[s];return st.call.apply(st,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),P.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return d.config.debug},set:function(e){d.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return P.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){P.setCurrentUserActive(e,t)}},{key:"isHevcSupported",value:function(){return p.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return p.probeConfigSupported(e)}},{key:"install",value:function(e,t){(A.plugins=A.plugins?A.plugins:{})[e]||(A.plugins[e]=t)}},{key:"use",value:function(e,t){(A.plugins=A.plugins?A.plugins:{})[e]=t}}]),A);function A(e){var s;m(this,A);var t,i,e=v.deepMerge(_t(),e),e=(r(h(s=It.call(this,e)),"canPlayFunc",function(){var e,t,i;s.config&&(e=(i=s.config).autoplay,t=i.startTime,i=i.defaultPlaybackRate,d.logInfo("player","canPlayFunc, startTime",t),t&&(s.currentTime=t>s.duration?s.duration:t,s.config.startTime=0),s.playbackRate=i,(e||s._useAutoplay)&&s.mediaPlay(),s.off(k,s.canPlayFunc),s.removeClass(L.ENTER))}),r(h(s),"onFullscreenChange",function(e,t){function i(){v.setTimeout(h(s),function(){s.resize()},100)}var n=v.getFullScreenEl(),o=(s._fullActionFrom?s._fullActionFrom="":s.emit(He,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:s.currentTime,duration:s.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),function(e,t){var i;if(e)return!(!(i=e.getAttribute("data-xgplayerid"))||i!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}(n,s.playerId));t||n&&(n===s._fullscreenEl||o)?(i(),s.config.closeFocusVideoFocus||s.media.focus(),s.fullscreen=!0,s.changeFullStyle(s.root,n,L.FULLSCREEN),s.emit(b,!0,s._fullScreenOffset),s.cssfullscreen&&s.exitCssFullscreen()):s.fullscreen&&(i(),o=(t=h(s))._fullScreenOffset,t.config.needFullscreenScroll?(window.scrollTo(o.left,o.top),v.setTimeout(h(s),function(){s.fullscreen=!1,s._fullScreenOffset=null},100)):(s.config.closeFocusVideoFocus||s.media.focus(),s.fullscreen=!1,s._fullScreenOffset=null),s.cssfullscreen?s.removeClass(L.FULLSCREEN):s.recoverFullStyle(s.root,s._fullscreenEl,L.FULLSCREEN),s._fullscreenEl=null,s.emit(b,!1))}),r(h(s),"_onWebkitbeginfullscreen",function(e){s._fullscreenEl=s.media,s.onFullscreenChange(e,!0)}),r(h(s),"_onWebkitendfullscreen",function(e){s.onFullscreenChange(e,!1)}),rt(h(s),Ot),s.config=e,s._pluginInfoId=v.generateSessionId(),(e=h(s)).logInfo=d.logInfo.bind(e),e.logWarn=d.logWarn.bind(e),e.logError=d.logError.bind(e),s.constructor.defaultPreset);return s.config.presets.length?0<=(t=s.config.presets.indexOf("default"))&&e&&(s.config.presets[t]=e):e&&s.config.presets.push(e),s.userTimer=null,s.waitTimer=null,s._state=1,s.isError=!1,s._hasStart=!1,s.isSeeking=!1,s.isCanplay=!1,s._useAutoplay=!1,s.rotateDeg=0,s.isActive=!1,s.fullscreen=!1,s.cssfullscreen=!1,s.isRotateFullscreen=!1,s._fullscreenEl=null,s.timeSegments=[],s._cssfullscreenEl=null,s.curDefinition=null,s._orgCss="",s._fullScreenOffset=null,s._videoHeight=0,s._videoWidth=0,s.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},s.sizeInfo={width:0,height:0,left:0,top:0},s._accPlayed={t:0,acc:0,loopAcc:0},s._offsetInfo={currentTime:-1,duration:0},s.innerContainer=null,s.controls=null,s.topBar=null,s.root=null,s.__i18n=At.init(s._pluginInfoId),p.os.isAndroid&&0<p.osVersion&&p.osVersion<6&&(s.config.autoplay=!1),s.database=new Ye,s.isUserActive=!1,s._onceSeekCanplay=null,s._isPauseBeforeSeek=0,s.innerStates={isActiveLocked:!1},s._initDOM()?(e=(t=s.config).definition,i=void 0===e?{}:e,!t.url&&i.list&&0<i.list.length&&((e=i.list.find(function(e){return e.definition&&e.definition===i.defaultDefinition}))||(i.defaultDefinition=i.list[0].definition,e=i.list[0]),s.config.url=e.url,s.curDefinition=e),s._bindEvents(),s._registerPresets(),s._registerPlugins(),P.onPluginsReady(h(s)),s.getInitDefinition(),s.setState(2),v.setTimeout(h(s),function(){s.emit(be)},0),s.onReady&&s.onReady(),(s.config.videoInit||s.config.autoplay)&&(!s.hasStart||s.state<4)&&s.start(),s):(console.error(new Error("can't find the dom which id is ".concat(s.config.id," or this.config.el does not exist"))),H(s))}function O(){return(new Date).getTime()}r(Mt,"defaultPreset",null),r(Mt,"XgVideoProxy",null);var jt,Nt="waitingStart",Ft=(t(Ht,S),jt=i(Ht),e(Ht,[{key:"afterCreate",value:function(){var n=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=O(),this.loadedCostTime=0,this.startCostTime=0,this.on(ve,function(){var e=n._state,t=e.autoplayStart,i=e.isFFSend;n.startCostTime=O()-n.newPointTime,d.logInfo("[xgLogger]".concat(n.player.playerId," LOAD_START"),"autoplayStart:".concat(t," isFFSend:").concat(i," startCostTime:").concat(n.startCostTime," newPointTime").concat(n.newPointTime)),i||(e.isLs||n.emitLog("loadstart",{}),e.isLs=!0,e.isTimeUpdate=!1,e.isFFLoading=!0,n.pt=O(),n.vt=0,n.fvt=0,n._initOnceEvents(),n._onWaitingLoadStart())}),this.on(C,function(){n.vt=O(),n.fvt=n.vt-n.pt,n.loadedCostTime=n.vt-n.newPointTime;var e=n._state,t=e.isTimeUpdate,i=e.isFFSend,e=e.autoplayStart;d.logInfo("[xgLogger]".concat(n.player.playerId," LOADED_DATA"),"fvt:".concat(n.fvt," isTimeUpdate:").concat(n._state.isTimeUpdate," loadedCostTime:").concat(n.loadedCostTime)),(t||e)&&n._sendFF("loadedData"),i||n.emitLog("loadeddata",{}),n.suspendWaitingStatus("loadeddata")}),this.on(de,this._onSeeking),this.on(y,this._onSeeked),this.on(Ee,function(){n.endState("destroy")}),this.on(Pe,function(){n.endState("urlChange"),d.logInfo("[xgLogger]".concat(n.player.playerId," URL_CHANGE")),n._state.isFFSend&&n._onReset()}),this.on([le,k],this._onPlaying),this.on(fe,this._onWaiting),this.on(he,this._onError),this.on(Be,function(){d.logInfo("[xgLogger]".concat(n.player.playerId," RESET")),n.endState("reset"),n._initOnceEvents(),n._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(we,this._onAutoplayStart),this.off(s,this._onTimeupdate),this.once(we,this._onAutoplayStart),this.once(s,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=O();var t=this._state,i=t.isFFLoading,t=t.isFFSend;d.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(i," !isFFSend:").concat(!t)),0<this.vt&&i&&!t&&(d.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&v.clearTimeout(this,this._waittTimer),this._waittTimer=v.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),v.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){var t,i;this.seekingStart&&(i=(t=O())-this.seekingStart,this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:i,endType:e}))}},{key:"suspendWaitingStatus",value:function(e){var t,i,n;this._waitTimer&&(v.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(v.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart&&(t=(i=O())-this.waitingStart,i=i-this.fixedWaitingStart,n=this.config.waitTimeout,this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog("waitingEnd",{fixedCostTime:n<i?n:i,costTime:n<t?n:t,type:"loadeddata"===e?1:this._waitType,endType:2===this._waitType?"seek":e}))}},{key:"emitLog",value:function(e,t){var i=this.player;this.emit("xglog",u({t:O(),host:v.getHostFromUrl(i.currentSrc),vtype:i.vtype,eventType:e,currentTime:this.player.currentTime,readyState:i.video.readyState,networkState:i.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),Ht);function Ht(){var e;m(this,Ht);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r(h(e=jt.call.apply(jt,[this].concat(i))),"_onTimeupdate",function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(d.logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))}),r(h(e),"_onAutoplayStart",function(){d.logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")}),r(h(e),"_onReset",function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e.newPointTime=O(),e.loadedCostTime=0,e.startCostTime=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e.fixedWaitingStart=0,e._isWaiting=!1,e._waitTimer&&v.clearTimeout(h(e),e._waitTimer),e._waittTimer&&v.clearTimeout(h(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0}),r(h(e),"_onSeeking",function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=O(),e.emitLog("seekStart",{start:O()}))}),r(h(e),"_onSeeked",function(){e.suspendSeekingStatus("seeked")}),r(h(e),"_onWaitingLoadStart",function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=O(),e.fixedWaitingStart=O(),e._waitType=1,e.emitLog(Nt,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:1,endType:"loadstart"}))}),r(h(e),"_onWaiting",function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e.fixedWaitingStart=O(),e._waitTimer=v.setTimeout(h(e),function(){e._isWaiting&&(e.waitingStart=O(),v.clearTimeout(h(e),e._waitTimer),e._waitTimer=null,e._startWaitTimeout(),e.emitLog(Nt,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))},200))}),r(h(e),"_onError",function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")}),r(h(e),"_onPlaying",function(){e._isWaiting&&e.suspendWaitingStatus("playing")}),e}function Bt(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}t(Kt,S),Vt=i(Kt),e(Kt,[{key:"registerIcons",value:function(){return{replay:Bt}}},{key:"afterCreate",value:function(){var i=this;S.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){i.player.replay()},{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ce,function(){if(i.playerConfig.loop||v.addClass(i.player.root,"replay"),!i.config.disable){i.show();var e=i.root.querySelector("path");if(e){var t=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof t&&-1<t.indexOf("none"))return null;e.setAttribute("transform",t)}}}),this.on(o,function(){i.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),v.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]);var Ut,Vt,Wt=Kt,Gt=(t(zt,S),Ut=i(zt),e(zt,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(ce,function(){e.isEndedShow&&v.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(s,function(){e.onTimeUpdate()}),this.on(Pe,function(){v.removeClass(e.root,"hide"),v.addClass(e.root,"xg-showplay"),e.once(s,function(){e.onTimeUpdate()})})):this.on(o,function(){v.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?v.removeClass(this.root,"xg-showplay"):this.once(s,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,e=e.hideCanplay,t=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(e?"xg-showplay":"",'" style="').concat(t,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),zt);function zt(){return m(this,zt),Ut.apply(this,arguments)}function Kt(){return m(this,Kt),Vt.apply(this,arguments)}function qt(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Yt(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var D={};function Xt(e){e?window.clearTimeout(e):Object.keys(D).map(function(e){window.clearTimeout(D[e].id),delete D[e]})}t(ti,S),Jt=i(ti),e(ti,[{key:"afterCreate",value:function(){var i=this,e=this.player,t=this.playerConfig;this.initIcons(),this.once(be,function(){t&&(t.lang&&"en"===t.lang?v.addClass(e.root,"lang-is-en"):"jp"===t.lang&&v.addClass(e.root,"lang-is-jp"))}),this.on(we,this.onAutoplayStart),t.autoplay||this.show(),this.on(Te,function(){var e="auto"===i.config.mode?"auto-hide":"hide";i.setAttr("data-state","play"),v.removeClass(i.root,e),i.show()}),this.on(o,function(){i.onPlayPause("play")}),this.on(ue,function(){i.onPlayPause("pause")}),this.on(Be,function(){i.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation();var t=i.player.paused;i.emitUserAction(e,"switch_play_pause",{props:"paused",from:t,to:!t})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:qt,class:"xg-icon-play"},startPause:{icon:Yt,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){v.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){v.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;this._animateId=function(e,t,i){var n=2<arguments.length&&void 0!==i?i:{start:null,end:null};return D[e]&&window.clearTimeout(D[e].id),D[e]={},n.start&&n.start(),D[e].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(D[e].id),delete D[e]},400),D[e].id}("pauseplay",400,{start:function(){v.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){v.removeClass(t.root,"interact"),e||t.hide(),t._animateId=null}})}},{key:"endAnimate",value:function(){v.removeClass(this.root,"interact"),Xt(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<2||(this.player.paused||6!==t.state?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,i=this.player;!i||i.state<6||!this.autoPlayStart||("show"===t.mode?(this.switchStatus(),this.show()):"auto"!==t.mode?t.isShowPause&&i.paused&&!i.ended||t.isShowEnd&&i.ended?(this.switchStatus(),this.show(),this.endAnimate()):t.disableAnimate?(this.switchStatus(),this.hide()):"play"===e?this.autoPlayStart?this.animate():this.hide():this.autoPlayStart&&!i.ended&&this.animate():this.switchStatus())}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Xt(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]);var Zt,Jt,$t=ti,Qt=(t(ei,S),Zt=i(ei),e(ei,[{key:"render",value:function(){var e=this.config.innerHtml,t=v.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var i="",n=1;n<=12;n++)i+='<div class="xgplayer-enter-bar'.concat(n,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(i,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),ei);function ei(){return m(this,ei),Zt.apply(this,arguments)}function ti(e){var t;return m(this,ti),r(h(t=Jt.call(this,e)),"onPlayerReset",function(){t.autoPlayStart=!1;var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),v.removeClass(t.root,e),t.show()}),r(h(t),"onAutoplayStart",function(){var e;t.autoPlayStart||(e="auto"===t.config.mode?"auto-hide":"hide",v.addClass(t.root,e),t.autoPlayStart=!0,t.onPlayPause("play"))}),t.autoPlayStart=!1,t}function ii(e,t,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(e.i18nKeys[t],'">\n    ').concat(e.i18n[t],"\n    </div>")}catch(e){return'<div class="xg-tips hide"></div>'}}t(si,S),ni=i(si),e(si,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:10}}}]);var ni,oi=si;function si(){return m(this,si),ni.apply(this,arguments)}function ri(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!Number.isNaN(t)&&t}var ai=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],li=ai.length;function ci(e){if((e="string"==typeof e?document.querySelector(e):e)&&"object"===g(e)&&e.nodeType){s=e;var t=window.getComputedStyle(s);if("none"===t.display){for(var i={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<li;n++)i[ai[n]]=0;return i}var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var s=o.isBorderBox="border-box"===t.boxSizing,r=0;r<li;r++){var a=ai[r],l=t[a],l=parseFloat(l);o[a]=Number.isNaN(l)?0:l}var e=o.paddingLeft+o.paddingRight,c=o.paddingTop+o.paddingBottom,u=o.marginLeft+o.marginRight,h=o.marginTop+o.marginBottom,d=o.borderLeftWidth+o.borderRightWidth,f=o.borderTopWidth+o.borderBottomWidth,p=ri(t.width),p=(!1!==p&&(o.width=p+(s?0:e+d)),ri(t.height));return!1!==p&&(o.height=p+(s?0:c+f)),o.innerWidth=o.width-(e+d),o.innerHeight=o.height-(c+f),o.outerWidth=o.width+u,o.outerHeight=o.height+h,o}var s}function ui(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier===t)return n}}var hi,di,fi,pi={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},gi=(t(xi,Y),fi=i(xi),e(xi,[{key:"_bindStartEvent",value:function(){var t=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),pi[this._startKey].map(function(e){t["on".concat(e)]=t["on".concat(e)].bind(t)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;e&&((e=pi[this._startKey]).map(function(e){window.addEventListener(e,t["on".concat(e)])}),this._boundPointerEvents=e)}},{key:"_unbindPostStartEvents",value:function(){var t=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(e){window.removeEventListener(e,t["on".concat(e)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=ui(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=ui(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=ui(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){this._root&&!this.isDown&&this.isEnabled&&(this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition(),t=ci(this._root),this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-t.height,this.startPos.maxX=window.innerWidth-t.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e))}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var i={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this.dragRealStart(e,t),i}},{key:"dragMove",value:function(e,t){var i,n;e=e||window.event,this.isDown&&(i=(n=this.startPos).x,n=n.y,t=(e=this._dragPointerMove(e,t)).x,e=e.y,t=this.checkContain("x",t,i),e=this.checkContain("y",e,n),this.position.x=i+t,this.position.y=n+e,this.dragPoint.x=t,this.dragPoint.y=e,this.emit("dragMove",this.position))}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)}},{key:"checkContain",value:function(e,t,i){return t+i<0?0-i:"x"===e&&t+i>this.startPos.maxX?this.startPos.maxX-i:"y"===e&&t+i>this.startPos.maxY?this.startPos.maxY-i:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),i=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(i)?0:i,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t,i,e=e.transform;0===e.indexOf("matrix")&&(i=e.split(","),e=0===e.indexOf("matrix3d")?12:4,t=parseInt(i[e],10),i=parseInt(i[1+e],10),this.position.x+=t,this.position.y+=i)}},{key:"_getPositionCoord",value:function(e,t){var i;return-1!==e.indexOf("%")?(i=ci(this._root.parentNode))?parseFloat(e)/100*i[t]:0:parseInt(e,10)}}]),xi),yi=(t(Ti,S),di=i(Ti),e(Ti,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(ue,function(){e.setAttr("data-state","pause")}),this.on(o,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;this.config.disable||(this.config.isShowIcon&&t.controls.registerPlugin(oi,{config:{onClick:function(){e.getMini()}}},oi.pluginName),t=v.checkTouchSupport()?"touchend":"click",this.bind(".mini-cancel-btn",t,this.onCancelClick),this.bind(".play-icon",t,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new gi(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll))}},{key:"registerIcons",value:function(){return{play:{icon:qt,class:"xg-icon-play"},pause:{icon:Yt,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e,t,i,n=this;this.isMini||(e=this.player,t=this.playerConfig,i=this.config.target||this.player.root,this.lastStyle={},v.addClass(e.root,"xgplayer-mini"),["width","height","top","left"].map(function(e){n.lastStyle[e]=i.style[e],i.style[e]="".concat(n.pos[e],"px")}),t.fluid&&(i.style["padding-top"]=""),this.emit(Ae,!0),e.isMini=this.isMini=!0)}},{key:"exitMini",value:function(){var t=this;if(!this.isMini)return!1;var e=this.player,i=this.playerConfig,n=this.config.target||this.player.root;v.removeClass(e.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(e){n.style[e]=t.lastStyle[e]}),this.lastStyle=null,i.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]="".concat(100*i.height/i.width,"%")),this.emit(Ae,!1),this.isMini=e.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=v.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      '.concat(ii(this,"MINI_DRAG",this.playerConfig.isHideTips),'\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),Ti),mi={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},vi=["videoClick","videoDbClick"],ki=(t(wi,ct),hi=i(wi),e(wi,[{key:"afterCreate",value:function(){var t=this;this._clickCount=0,vi.map(function(e){t.__hooks[e]=null}),"mobile"===this.playerConfig.isMobileSimulateMode||"mobile"===p.device&&!p.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var t=this,e=this.player,i=e.video,n=e.root,e=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(mi).map(function(e){n.addEventListener(e,t[mi[e]],!1)}),e&&i&&i.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&0<t.duration&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var t=this,e=this.player,i=e.video,n=e.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),i.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(mi).map(function(e){n.removeEventListener(e,t[mi[e]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),wi),Ci="pressend",bi={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},_i={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function wi(){var o;m(this,wi);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(o=hi.call.apply(hi,[this].concat(t))),"onMouseMove",function(e){var t=h(o),i=t.player,t=t.playerConfig;i.isActive||(i.focus({autoHide:!t.closeDelayBlur}),t.closeFocusVideoFocus)||i.media.focus()}),r(h(o),"onMouseEnter",function(e){var t=h(o),i=t.playerConfig,t=t.player;i.closeFocusVideoFocus||t.media.focus(),i.closeDelayBlur?t.focus({autoHide:!1}):t.focus()}),r(h(o),"onMouseLeave",function(e){var t=o.playerConfig,i=t.closePlayerBlur,n=t.leavePlayerTime,t=t.closeDelayBlur;i||t||(n?o.player.focus({autoHide:!0,delay:n}):o.player.blur())}),r(h(o),"onVideoClick",function(e){var t=h(o),i=t.player,t=t.playerConfig;e.target&&t.closeVideoClick||e.target!==i.root&&e.target!==i.media&&e.target!==i.innerContainer&&e.target!==i.media.__canvas||(e.preventDefault(),t.closeVideoStopPropagation||e.stopPropagation(),o._clickCount++,o.clickTimer&&(clearTimeout(o.clickTimer),o.clickTimer=null),o.clickTimer=setTimeout(function(){o._clickCount&&(o._clickCount--,T(h(o),vi[0],function(e,t){o.switchPlayPause(t.e)},{e:e,paused:i.paused}),clearTimeout(o.clickTimer),o.clickTimer=null)},300))}),r(h(o),"onVideoDblClick",function(e){var t=h(o),i=t.player,t=t.playerConfig;t.closeVideoDblclick||!e.target||e.target!==i.media&&e.target!==i.media.__canvas||(!t.closeVideoClick&&o._clickCount<2?o._clickCount=0:(o._clickCount=0,o.clickTimer&&(clearTimeout(o.clickTimer),o.clickTimer=null),e.preventDefault(),e.stopPropagation(),T(h(o),vi[1],function(e,t){o.emitUserAction(t.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()},{e:e,fullscreen:i.fullscreen})))}),o}function Ti(e){m(this,Ti),r(h(i=di.call(this,e)),"onCancelClick",function(e){i.exitMini(),i.isClose=!0}),r(h(i),"onCenterClick",function(e){var t=h(i).player;t.paused?t.play():t.pause()}),r(h(i),"onScroll",function(e){var t;!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50||(t=parseInt(v.getCss(i.player.root,"height")),t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?i.isMini||i.isClose||i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1))}),i.isMini=!1,i.isClose=!1;var i,e=h(i).config;return i.pos={left:e.left<0?window.innerWidth-e.width-20:e.left,top:e.top<0?window.innerHeight-e.height-20:e.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}function xi(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return m(this,xi),(t=fi.call(this)).isEnabled=!0,t.isDragging=!1,t.isDown=!1,t.position={},t.downPoint={},t.dragPoint={x:0,y:0},t.startPos={x:0,y:0},t._root=e instanceof Element?e:document.querySelector(e),t._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),t._root&&t._handlerDom?(t._bindStartEvent(),t):H(t)}function Si(e){return e&&0<e.length?e[e.length-1]:null}e(Pi,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,i=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger("press",e),t._pos.press=!0,t.__clearPress()},i.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,i=this.config;this.dbIntrvalId?(this.__clearDb(),this.trigger("doubleclick",e)):this.dbIntrvalId=setTimeout(function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger("click",e)},i.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var i=this.__handlers[e],n=-1,o=0;o<i.length;o++)if(i[o]===t){n=o;break}0<=n&&this.__handlers[e].splice(n,1)}}},{key:"trigger",value:function(t,i){this.__handlers[t]&&this.__handlers[t].map(function(e){try{e(i)}catch(e){console.error("trigger>>:".concat(t),e)}})}},{key:"destroy",value:function(){var t=this,i={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(i).forEach(function(e){t.root.removeEventListener(e,t[i[e]])})}}]);var Ei=Pi;function Pi(e){var s=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};m(this,Pi),r(this,"onTouchStart",function(e){var t=s._pos,i=s.root,n=Si(e.touches);t.x=n?parseInt(n.pageX,10):e.pageX,t.y=n?parseInt(n.pageX,10):e.pageX,t.start=!0,s.__setPress(e),i.addEventListener(s.events.end,s.onTouchEnd),i.addEventListener(s.events.cancel,s.onTouchCancel),i.addEventListener(s.events.move,s.onTouchMove),s.trigger("touchstart",e)}),r(this,"onTouchCancel",function(e){s.onTouchEnd(e)}),r(this,"onTouchEnd",function(e){var t=s._pos,i=s.root;s.__clearPress(),i.removeEventListener(s.events.cancel,s.onTouchCancel),i.removeEventListener(s.events.end,s.onTouchEnd),i.removeEventListener(s.events.move,s.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&s.trigger(Ci,e),s.trigger("touchend",e),t.press||t.moving||s.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}),r(this,"onTouchMove",function(e){var t=s._pos,i=s.config,n=Si(e.touches),o=n?parseInt(n.pageX,10):e.pageX,n=n?parseInt(n.pageY,10):e.pageX,o=o-t.x,n=n-t.y;Math.abs(n)<i.miniStep&&Math.abs(o)<i.miniStep||(s.__clearPress(),t.press&&s.trigger(Ci,e),t.press=!1,t.moving=!0,s.trigger("touchmove",e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(t).map(function(e){s.config[e]=t[e]}),this.root=e,this.events="mouse"===t.eventType?_i:bi,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}function Li(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var Ii,Ai="auto",Oi=["videoClick","videoDbClick"],Di=(t(Ri,S),Ii=i(Ri),e(Ri,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Li,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var i=this,e=(Oi.map(function(e){i.__hooks[e]=null}),this.playerConfig),t=this.config,n=this.player,e=(!0===e.closeVideoDblclick&&(t.closedbClick=!0),this.resetPos(),v.isUndefined(e.disableGesture)||(t.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=v.createDom("xg-mask","",{},"xgmask"),n.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail(),"mouse"===this.domEventType?"mouse":"touch"),o=(this.touch=new Ei(this.root,{eventType:e,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(e){e.preventDefault()}),n.root.addEventListener("touchmove",this.onRootTouchMove,!0),n.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(pe,function(){var e=i.player,t=i.config;1e3*e.duration<t.moveDuration&&(t.moveDuration=1e3*e.duration)}),this.on([k,ce],function(){var e=i.pos,t=e.time;!e.isStart&&0<t&&(i.pos.time=0)}),{touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"});Object.keys(o).map(function(t){i.touch.on(t,function(e){i[o[t]](e)})}),t.disableActive||(e=n.plugins.progress)&&(e.addCallBack("dragmove",function(e){i.activeSeekNote(e.currentTime,e.forward)}),e.addCallBack("dragend",function(){i.changeAction(Ai)}))}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;e&&e.usable&&(this.thumbnail=e.createThumbnail(null,"mobile-thumbnail"),(e=this.find(".time-preview")).insertBefore(this.thumbnail,e.children[0]))}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,e=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),e&&(this.find(".xg-bar").style.backgroundColor=e,this.find(".time-preview").style.color=e),this.config.disableTimeProgress&&v.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(e){t.pos[e]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player,e=(this.root.setAttribute("data-xg-action",e),t.plugins.start);e&&e.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;e=e.touches&&0<e.touches.length?e.touches[e.touches.length-1]:e;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(e,t,i,n,o){var s=o.width,r=-1;return e<0||s<e||(s=0===n?Math.abs(i):Math.abs(i/n),0<Math.abs(i)&&1.73<=s&&e>o.scopeM1&&e<o.scopeM2?r=0:(0===Math.abs(i)||s<=.57)&&(r=e<o.scopeL?1:e>o.scopeR?2:3)),r}},{key:"executeMove",value:function(e,t,i,n,o){switch(i){case 0:this.updateTime(e/n*this.config.scopeM);break;case 1:this.updateBrightness(t/o);break;case 2:p.os.isIos||this.updateVolume(t/o)}}},{key:"endLastMove",value:function(e){var t=this,i=this.pos,n=this.player,o=this.config,i=(i.time-this.timeOffset)/1e3;0===e&&(n.seek(Number(i).toFixed(1)),o.hideControlsEnd?n.blur():n.focus(),this.timer=setTimeout(function(){t.pos.time=0},500)),this.changeAction(Ai)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"clickHandler",value:function(e){var t=this.player,i=this.config,n=this.playerConfig;t.state<6?n.closeVideoClick||(this.sendUseAction(v.createEvent("click")),t.play()):!i.closedbClick||n.closeVideoClick?t.isActive?t.blur():t.focus():n.closeVideoClick||((t.isActive||i.focusVideoClick)&&(this.sendUseAction(v.createEvent("click")),this.switchPlayPause()),t.focus())}},{key:"dbClickHandler",value:function(e){var t=this.config,i=this.player;!t.closedbClick&&6<=i.state&&(this.sendUseAction(v.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,t=this.player;T(this,Oi[0],function(e,t){i.clickHandler(t.e)},{e:e,paused:t.paused})}},{key:"onDbClick",value:function(e){var i=this,t=this.player;T(this,Oi[1],function(e,t){i.dbClickHandler(t.e)},{e:e,paused:t.paused})}},{key:"onPress",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:n.playbackRate,to:i.pressRate}),n.playbackRate=i.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:n.playbackRate,to:t.rate}),n.playbackRate=t.rate,t.rate=1,this.changeAction(Ai))}},{key:"updateTime",value:function(e){var t=this.player,i=this.config,n=this.player.duration,o=(e=Number(e.toFixed(4)),parseInt(e*i.moveDuration,10)+this.timeOffset),o=(o+=this.pos.time)<0?0:1e3*n<o?1e3*n-200:o;t.getPlugin("time")&&t.getPlugin("time").updateTime(o/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(o/1e3/this.duration,!0),this.activeSeekNote(o/1e3,0<e),i.isTouchingSeek&&t.seek(Number((o-this.timeOffset)/1e3).toFixed(1)),this.pos.time=o}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,i=this.pos;e=parseInt(100*e,10),i.volume+=e,Math.abs(i.volume)<10||(e=parseInt(10*t.volume,10)-parseInt(i.volume/10,10),t.volume=(e=10<e?10:e<1?0:e)/10,i.volume=0)}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,i=this.config,n=this.xgMask,e=(e=t.light+.8*e)>i.maxDarkness?i.maxDarkness:e<0?0:e;n&&(n.style.backgroundColor="rgba(0,0,0,".concat(e,")")),t.light=e}},{key:"activeSeekNote",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.player,n=this.config,o=!(this.duration!==1/0&&0<this.duration);!e||"number"!=typeof e||o||n.disableActive||(e<0?e=0:e>i.duration&&(e=i.duration-.2),this.changeAction("seeking"),(o=i.plugins.start)&&o.focusHide(),this.find(".xg-dur").innerHTML=v.format(this.duration),this.find(".xg-cur").innerHTML=v.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?v.removeClass(this.find(".xg-seek-show"),"xg-back"):v.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e))}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<4)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),Ri);function Ri(e){var u;return m(this,Ri),r(h(u=Ii.call(this,e)),"onTouchStart",function(e){var t=h(u),i=t.player,n=t.config,o=t.pos,t=t.playerConfig,e=u.getTouche(e);e&&!n.disableGesture&&0<u.duration&&!i.ended&&(o.isStart=!0,v.checkIsFunction(t.disableSwipeHandler)&&t.disableSwipeHandler(),u.find(".xg-dur").innerHTML=v.format(u.duration),t=u.root.getBoundingClientRect(),90===i.rotateDeg?(o.top=t.left,o.left=t.top,o.width=t.height,o.height=t.width):(o.top=t.top,o.left=t.left,o.width=t.width,o.height=t.height),t=parseInt(e.pageX-o.left,10),e=parseInt(e.pageY-o.top,10),o.x=90===i.rotateDeg?e:t,o.y=90===i.rotateDeg?t:e,o.scopeL=n.scopeL*o.width,o.scopeR=(1-n.scopeR)*o.width,o.scopeM1=o.width*(1-n.scopeM)/2,o.scopeM2=o.width-o.scopeM1)}),r(h(u),"onTouchMove",function(e){var t,i,n,o,s,r=u.getTouche(e),a=h(u),l=a.pos,c=a.config,a=a.player;r&&!c.disableGesture&&u.duration&&l.isStart&&(o=c.miniMoveStep,t=c.hideControlsActive,n=parseInt(r.pageX-l.left,10),r=parseInt(r.pageY-l.top,10),i=90===a.rotateDeg?r:n,n=90===a.rotateDeg?n:r,Math.abs(i-l.x)>o||Math.abs(n-l.y)>o)&&(r=i-l.x,o=n-l.y,-1===(s=l.scope)&&(0!==(s=u.checkScope(i,n,r,o,l))||(t?a.blur():a.focus({autoHide:!1}),l.time)||(l.time=parseInt(1e3*a.currentTime,10)+1e3*u.timeOffset),l.scope=s),-1===s||0<s&&!c.gestureY||0===s&&!c.gestureX||(e.cancelable&&e.preventDefault(),u.executeMove(r,o,s,l.width,l.height),l.x=i,l.y=n))}),r(h(u),"onTouchEnd",function(e){var t,i=h(u),n=i.player,o=i.pos,i=i.playerConfig;o.isStart&&(-1<o.scope&&e.cancelable&&e.preventDefault(),t=(e=u.config).disableGesture,e=e.gestureX,!t&&e?(u.endLastMove(o.scope),setTimeout(function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()},10)):o.time=0,o.scope=-1,u.resetPos(),v.checkIsFunction(i.enableSwipeHandler)&&i.enableSwipeHandler(),u.changeAction(Ai))}),r(h(u),"onRootTouchMove",function(e){!u.config.disableGesture&&u.config.gestureX&&u.checkIsRootTarget(e)&&(e.stopPropagation(),u.pos.isStart?u.onTouchMove(e):u.onTouchStart(e))}),r(h(u),"onRootTouchEnd",function(e){u.pos.isStart&&u.checkIsRootTarget(e)&&(e.stopPropagation(),u.onTouchEnd(e))}),u.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},u.timer=null,u}function Mi(e){var t=e.tagName;return"INPUT"===t||"TEXTAREA"===t||e.isContentEditable}t(Fi,ct),ji=i(Fi),e(Fi,[{key:"mergekeyCodeMap",value:function(){var i=this,n=this.config.keyCodeMap;n&&Object.keys(n).map(function(t){i.keyCodeMap[t]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(e){n[t][e]&&(i.keyCodeMap[t][e]=n[t][e])}):i.keyCodeMap[t]=n[t]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){var e,t,i,n;return!(this.config.checkVisible&&(e=(i=this.player.root.getBoundingClientRect()).height,t=i.top,i=i.bottom,n=window.innerHeight,t<0&&t<0-.9*e||0<i&&.9*e<i-n))}},{key:"checkCode",value:function(t,i){var n=this,o=!1;return Object.keys(this.keyCodeMap).map(function(e){n.keyCodeMap[e]&&t===n.keyCodeMap[e].keyCode&&!n.keyCodeMap[e].disable&&(o=!i||!n.keyCodeMap[e].noBodyTarget)}),o}},{key:"downVolume",value:function(e){var t,i,n=this.player;n.volume<=0||(t=parseFloat((n.volume-.1).toFixed(1)),i={volume:{from:n.volume,to:t}},this.emitUserAction(e,"change_volume",{props:i}),n.volume=0<=t?t:0)}},{key:"upVolume",value:function(e){var t,i,n=this.player;1<=n.volume||(t=parseFloat((n.volume+.1).toFixed(1)),i={volume:{from:n.volume,to:t}},this.emitUserAction(e,"change_volume",{props:i}),n.volume=t<=1?t:1)}},{key:"seek",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,o=t.duration,s=t.offsetDuration,t=t.timeSegments,n=-1<n?n:i,s=s||o,o=e.repeat&&4<=this.seekStep?parseInt(this.seekStep/2,10):this.seekStep,o=(n+o<=s?n+=o:n=s,v.getCurrentTimeByOffset(n,t));this.emitUserAction(e,"seek",{props:{currentTime:{from:i,to:o}}}),this.player.currentTime=o}},{key:"seekBack",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,t=t.timeSegments,n=(-1<n?n:i)-(e.repeat?parseInt(this.seekStep/2,10):this.seekStep),i={currentTime:{from:i,to:n=v.getCurrentTimeByOffset(n=n<0?0:n,t)}};this.emitUserAction(e,"seek",{props:i}),this.player.currentTime=n}},{key:"changePlaybackRate",value:function(e){var t=this._keyState,i=this.config,n=this.player;0===t.playbackRate&&(t.playbackRate=n.playbackRate,n.playbackRate=i.playbackRate)}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,i=t.fullscreen,n=t.cssfullscreen;i&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:i,to:!i}),t.exitFullscreen()),n&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:n,to:!n}),t.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var t=this._keyState;if(e.repeat){t.isPress=!0;var i=Date.now();if(i-t.tt<200)return;t.tt=i}(i=e).preventDefault(),i.returnValue=!1,this.handleKeyCode(e.keyCode,e,t.isPress)}},{key:"handleKeyUp",value:function(e){var t=this._keyState;0<t.playbackRate&&(this.player.playbackRate=t.playbackRate,t.playbackRate=0),t.isKeyDown=!1,t.isPress=!1,t.tt=0}},{key:"handleKeyCode",value:function(e,t,i){for(var n=Object.keys(this.keyCodeMap),o=0;o<n.length;o++){var s=this.keyCodeMap[n[o]],r=s.action,a=s.keyCode,l=s.disable,c=s.pressAction,s=s.disablePress;if(a===e){l||i&&s||("function"==typeof(a=i&&c||r)?r(t,this.player,i):"string"==typeof a&&"function"==typeof this[a]&&this[a](t,this.player,i),this.emit(Fe,u({key:n[o],target:t.target,isPress:i},this.keyCodeMap[n[o]])));break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!1}}}]);var ji,Ni=Fi;function Fi(){var l;m(this,Fi);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(l=ji.call.apply(ji,[this].concat(t))),"onBodyKeyDown",function(e){var t,i,n,o,s,r,a;l.player&&(i=(t=e||window.event).keyCode,n=(o=h(l))._keyState,o=o.player,s=(a=l.config).disable,r=a.disableBodyTrigger,a=a.isIgnoreUserActive,s||r||!o.isUserActive&&!a||Mi(t.target)||!l.checkIsVisible()||t.metaKey||t.altKey||t.ctrlKey?n.isBodyKeyDown=!1:(e.repeat||n.isKeyDown||((t.target===document.body||l.config.isGlobalTrigger&&!Mi(t.target))&&l.checkCode(i,!0)&&(n.isBodyKeyDown=!0),document.addEventListener("keyup",l.onBodyKeyUp)),n.isBodyKeyDown&&l.handleKeyDown(t)))}),r(h(l),"onBodyKeyUp",function(e){l.player&&(document.removeEventListener("keyup",l.onBodyKeyUp),l.handleKeyUp(e))}),r(h(l),"onKeydown",function(e){if(l.player){var e=e||window.event,t=h(l)._keyState;if(!e.repeat){if(l.config.disable||l.config.disableRootTrigger||e.metaKey||e.altKey||e.ctrlKey)return;if(!l.player.isUserActive&&!l.config.isIgnoreUserActive)return;!e||37!==e.keyCode&&!l.checkCode(e.keyCode)||e.target!==l.player.root&&e.target!==l.player.video&&e.target!==l.player.controls.el||(t.isKeyDown=!0),l.player.root.addEventListener("keyup",l.onKeyup)}t.isKeyDown&&l.handleKeyDown(e)}}),r(h(l),"onKeyup",function(e){l.player&&(l.player.root.removeEventListener("keyup",l.onKeyup),l.handleKeyUp(e))}),l}function Hi(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}t(en,S),Wi=i(en),e(en,[{key:"registerIcons",value:function(){return{loadingIcon:Hi}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:x.ROOT}}}]);var Bi,Ui,Vi,Wi,Gi=en,zi=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Ki=(e(Qi,[{key:"updateDuration",value:function(e){var t=this,i=(this.duration=e,0),e=this.fragments;this.fragments=e.map(function(e){return e.start=parseInt(i,10),e.end=parseInt(i+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),i+=e.percent*t.duration,e})}},{key:"updateProgress",value:function(){var i,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"played",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},o=this.progressList,s=this.fragments;o.length<1||(i=t.newIndex,e=t.curIndex,t=t.millisecond,i!==e&&o.map(function(e,t){t<i?e[n].style.width="100%":i<t&&(e[n].style.width=0)}),e=s[i],s=0===t?0:(t-e.start)/e.duration,o[i][n].style.width=s<0?0:"".concat(100*s,"%"))}},{key:"updateFocus",value:function(e){var t;!this.fragConfig.fragAutoFocus||this.fragments.length<2||(e?0<=(e=this.findIndex(1e3*e.currentTime,this.focusIndex))&&e!==this.focusIndex&&(-1<this.focusIndex&&this.unHightLight(this.focusIndex),this.setHightLight(e),t={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]},this.focusIndex=e,this._callBack)&&this._callBack(t):-1<this.focusIndex&&(this.unHightLight(this.focusIndex),e={index:-1,preIndex:this.focusIndex,fragment:null},this._callBack&&this._callBack(e),this.focusIndex=-1))}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=1<arguments.length?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var t=this.playedIndex,i=this.cachedIndex;if("Undefined"!==v.typeOf(e.played)){var n=this.findIndex(1e3*e.played,t);if(n<0)return;this.updateProgress("played",{newIndex:n,curIndex:t,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=n}"Undefined"===v.typeOf(e.cached)||(t=this.findIndex(1e3*e.cached,i))<0||(this.updateProgress("cached",{newIndex:t,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=t)}},{key:"findIndex",value:function(e,t){var i=this.fragments;if(!i||0===i.length)return-1;if(1===i.length)return 0;if(!(-1<t&&t<i.length&&e>i[t].start&&e<i[t].end)){if(e>i[i.length-1].start)return i.length-1;for(var n=0;n<i.length;n++)if(e>i[n].start&&e<=i[n].end){t=n;break}}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(v.hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)v.removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return v.addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(t){var i=this;if(Object.keys(this.fragConfig).forEach(function(e){void 0!==t[e]&&(i.fragConfig[e]=t[e])}),t.fragments){if(this.fragments=0===t.fragments.length?[{percent:1}]:t.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;0<e.length;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var e,i,n,o=this,s=this.style.progressColor;return this.root||(this.root=v.createDom("xg-inners","",{},"progress-list")),this.fragments&&(e=this.fragConfig,i=e.fragClass,n=e.fragFocusClass,this.progressList=this.fragments.map(function(e){var t=v.createDom("xg-inner","",{style:(s?"background:".concat(s,"; flex: "):"flex: ").concat(e.percent)},"".concat(e.isFocus?n:""," xgplayer-progress-inner ").concat(i));return o.root.appendChild(t),zi.forEach(function(e){t.appendChild(v.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(o.style[e.styleKey],"; width:0;"):"width:0;"},e.className))}),{cached:t.children[0],played:t.children[1]}})),this.root}}]),Qi),qi={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Yi=(t($i,S),Vi=i($i),e($i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,e=e.currentTime;return 0<=t?t:e+this.timeOffset}},{key:"changeState",value:function(){this.useable=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=u(u({fragments:e=e&&0!==e.length?e:[{percent:1}]},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),{},{actionCallback:function(e){t.emitUserAction("fragment_focus","fragment_focus",e)}});this.innerList?this.innerList.reset(e):(this.innerList=new Ki(e),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(e){t[e]=t.innerList[e].bind(t.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e,t,i,n=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer"),e=(i=this.config).fragFocusClass,t=i.fragAutoFocus,i=i.fragClass,this._initInner(this.config.fragments,{fragFocusClass:e,fragAutoFocus:t,fragClass:i,style:this.playerConfig.commonStyle||{}}),"mobile"===p.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(pe,function(){n.onMouseLeave()}),this.on(s,function(){n.onTimeupdate()}),this.on(y,function(){n.onTimeupdate(),n.onCacheUpdate()}),this.on(me,function(){n.onCacheUpdate()}),this.on(ce,function(){n.onCacheUpdate(!0),n.onTimeupdate(!0),n._state.now=0}),this.on(ke,function(){n.onReset()}),this.on(Re,function(){n.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle())}},{key:"setConfig",value:function(t){var i=this,n=null;Object.keys(t).forEach(function(e){i.config[e]=t[e],"fragments"===e&&(n=t[e])}),n&&this._initInner(n,t)}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,i=this.progressBtn;t&&("string"==typeof t?i.style.boxShadow=t:"object"===g(t)&&Object.keys(t).map(function(e){i.style[e]=t[e]}))}},{key:"triggerCallbacks",value:function(e,i,n){0<this.__dragCallBacks.length&&this.__dragCallBacks.map(function(t){if(t&&t.handler&&t.type===e)try{t.handler(i,n)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(t," error"),e)}})}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(i,n){var e=this.__dragCallBacks,o=-1;e.map(function(e,t){e&&e.type===i&&e.handler===n&&(o=t)}),-1<o&&e.splice(o,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;t.isEnter=!1,e.isMini||(this.unbind("mousemove",this.onMoveOnly),t.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,e=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",v.stopPropagation),t.center)&&t.center.addEventListener("touchend",v.stopPropagation)),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==e.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),v.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),v.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,i,n){var o=this.config,s=this.player;o.isCloseClickSeek&&0===n||(t=t=t>=s.duration?s.duration-o.endedDiff:Number(t).toFixed(1),this.updatePercent(i),this.updateTime(e),(1!==n||o.isDragingSeek&&"audio"!==s.config.mediaType)&&(this._state.now=t,this._state.direc=t>s.currentTime?0:1,s.seek(t)))}},{key:"computeTime",value:function(e,t){var i,n=this.player,o=this.root.getBoundingClientRect(),s=o.width,r=o.height,a=o.top,o=o.left,r=90===n.rotateDeg?(i=r,a):(i=s,o),a=t-r,s=(s=(a=i<a?i:a<0?0:a)/i)<0?0:1<s?1:s,o=parseInt(s*this.offsetDuration*1e3,10)/1e3;return{percent:s,currentTime:o,seekTime:v.getCurrentTimeByOffset(o,n.timeSegments),offset:a,width:i,left:r,e:e}}},{key:"updateTime",value:function(e){var t=this.player,i=this.duration,i=(i<e?e=i:e<0&&(e=0),t.plugins.time);i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){var i;this.isProgressMoving=!0,!this.config.disable&&(this.progressBtn.style.left="".concat(100*(e=1<e?1:e<0?0:e),"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration),i=this.player.plugins.miniprogress)&&i.update({played:e*this.offsetDuration},this.offsetDuration)}},{key:"onTimeupdate",value:function(e){var t=this.player,i=this._state,n=this.offsetDuration;if(!t.isSeeking&&!this.isProgressMoving){if(-1<i.now){t=parseInt(1e3*i.now,10)-parseInt(1e3*t.currentTime,10);if(0===i.direc&&300<t||1===i.direc&&-300<t)return void(i.now=-1);i.now=-1}t=this.currentTime,t=v.adjustTimeByDuration(t,n,e),i=(this.innerList.update({played:t},n),this.progressBtn.style.left="".concat(t/n*100,"%"),this.player.plugins.miniprogress);i&&i.update({played:t},n)}}},{key:"onCacheUpdate",value:function(e){var t=this.player,i=this.duration;t&&(t=t.bufferedPoint.end,t=v.adjustTimeByDuration(t,i,e),this.innerList.update({cached:t},i),e=this.player.plugins.miniprogress)&&e.update({cached:t},i)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls,i=(this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.domEventType);"touch"!==i&&"compatible"!==i||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",v.stopPropagation),t.center)&&t.center.removeEventListener("touchend",v.stopPropagation)),"mouse"!==i&&"compatible"!==i||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){var e;if(!this.config.disable&&!this.playerConfig.isLive)return e=this.player.controls?this.player.controls.config.mode:"",'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:qi.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return qi}}]),$i),_=(t(Ji,S),Ui=i(Ji),e(Ji,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),Ji),Xi=(t(Zi,_),Bi=i(Zi),e(Zi,[{key:"afterCreate",value:function(){var e=this,t=(l(a(Zi.prototype),"afterCreate",this).call(this),this.player);this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([ue,he,ke],function(){e.animate(t.paused)}),this.on(o,function(){e.animate(t.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:qt,class:"xg-icon-play"},pause:{icon:Yt,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t,i;this.player&&(t=this.i18nKeys,i=this.find(".xg-tips"),e?(this.setAttr("data-state","pause"),i&&this.changeLangTextKey(i,t.PLAY_TIPS)):(this.setAttr("data-state","play"),i&&this.changeLangTextKey(i,t.PAUSE_TIPS)))}},{key:"destroy",value:function(){l(a(Zi.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(ii(this,"PLAY_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_LEFT,index:0,disable:!1}}}]),Zi);function Zi(){return m(this,Zi),Bi.apply(this,arguments)}function Ji(){var t;m(this,Ji);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return r(h(t=Ui.call.apply(Ui,[this].concat(i))),"_onMouseenter",function(e){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),r(h(t),"_onMouseLeave",function(e){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}function $i(e){var a;return m(this,$i),r(h(a=Vi.call(this,e)),"onMoveOnly",function(e,t){var i=h(a),n=i.pos,o=i.config,i=i.player;if(e){v.event(e);var s=v.getEventPos(e,i.zoom),i=90===i.rotateDeg?s.clientY:s.clientX;if(n.moving&&Math.abs(n.x-i)<o.miniMoveStep)return;n.moving=!0,n.x=i,t=a.computeTime(e,i)}a.triggerCallbacks("dragmove",t,e),a._updateInnerFocus(t)}),r(h(a),"onBodyClick",function(e){a.pos.isLocked&&(a.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())}),r(h(a),"_mouseDownHandler",function(e,t){a._state.time=t.currentTime,a.updateWidth(t.currentTime,t.seekTime,t.percent,0),a._updateInnerFocus(t)}),r(h(a),"_mouseUpHandler",function(e,t){h(a).pos.moving&&a.updateWidth(t.currentTime,t.seekTime,t.percent,2)}),r(h(a),"_mouseMoveHandler",function(e,t){var i=h(a),n=i._state,o=i.pos,s=i.config,i=i.player;n.time<t.currentTime?t.forward=!0:t.forward=!1,n.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&i.pause(),a.triggerCallbacks("dragstart",t,e),a.emitUserAction("drag","dragstart",t)),a.updateWidth(t.currentTime,t.seekTime,t.percent,1),a.triggerCallbacks("dragmove",t,e),a._updateInnerFocus(t)}),r(h(a),"onMouseDown",function(e){var t=h(a),i=t._state,n=t.player,o=t.pos,s=t.config,t=t.playerConfig,r=v.getEventPos(e,n.zoom),r=90===n.rotateDeg?r.clientY:r.clientX;if(!(n.isMini||s.closeMoveSeek||!t.allowSeekAfterEnded&&n.ended)){if(n.duration||n.isPlaying)return e.stopPropagation(),a.focus(),v.checkIsFunction(t.disableSwipeHandler)&&t.disableSwipeHandler(),v.checkIsFunction(s.onMoveStart)&&s.onMoveStart(),v.event(e),o.x=r,o.isDown=!0,o.moving=!1,i.prePlayTime=n.currentTime,n.focus({autoHide:!1}),a.isProgressMoving=!0,v.addClass(a.progressBtn,"active"),(t=a.computeTime(e,r)).prePlayTime=i.prePlayTime,a._mouseDownHandlerHook(e,t),"touchstart"===e.type?(a.root.addEventListener("touchmove",a.onMouseMove),a.root.addEventListener("touchend",a.onMouseUp)):(a.unbind("mousemove",a.onMoveOnly),document.addEventListener("mousemove",a.onMouseMove,!1),document.addEventListener("mouseup",a.onMouseUp,!1)),!0;n.play()}}),r(h(a),"onMouseUp",function(e){var t=h(a),i=t.player,n=t.config,o=t.pos,s=t.playerConfig,t=t._state,n=(e.stopPropagation(),e.preventDefault(),v.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),v.checkIsFunction(n.onMoveEnd)&&n.onMoveEnd(),v.event(e),v.removeClass(a.progressBtn,"active"),a.computeTime(e,o.x));n.prePlayTime=t.prePlayTime,o.moving?(a.triggerCallbacks("dragend",n,e),a.emitUserAction("drag","dragend",n)):(a.triggerCallbacks("click",n,e),a.emitUserAction("click","click",n)),a._mouseUpHandlerHook(e,n),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,o.isLocked=!0,t.prePlayTime=0,t.time=0,"touchend"===e.type?(a.root.removeEventListener("touchmove",a.onMouseMove),a.root.removeEventListener("touchend",a.onMouseUp),a.blur()):(document.removeEventListener("mousemove",a.onMouseMove,!1),document.removeEventListener("mouseup",a.onMouseUp,!1),o.isEnter?"mobile"!==s.isMobileSimulateMode&&a.bind("mousemove",a.onMoveOnly):a.onMouseLeave(e)),v.setTimeout(h(a),function(){a.resetSeekState()},10),i.focus()}),r(h(a),"onMouseMove",function(e){var t=h(a),i=t._state,n=t.pos,o=t.player,t=t.config,s=(v.checkTouchSupport()&&e.preventDefault(),v.event(e),v.getEventPos(e,o.zoom)),o=90===o.rotateDeg?s.clientY:s.clientX,s=Math.abs(n.x-o);n.moving&&s<t.miniMoveStep||!n.moving&&s<t.miniStartStep||(n.x=o,(s=a.computeTime(e,o)).prePlayTime=i.prePlayTime,a._mouseMoveHandlerHook(e,s))}),r(h(a),"onMouseOut",function(e){a.triggerCallbacks("mouseout",null,e)}),r(h(a),"onMouseOver",function(e){a.triggerCallbacks("mouseover",null,e)}),r(h(a),"onMouseEnter",function(e){var t=h(a),i=t.player,t=t.pos;t.isDown||t.isEnter||i.isMini||!i.config.allowSeekAfterEnded&&i.ended||(t.isEnter=!0,a.bind("mousemove",a.onMoveOnly),a.bind("mouseleave",a.onMouseLeave),v.event(e),t=v.getEventPos(e,i.zoom),i=90===i.rotateDeg?t.clientY:t.clientX,t=a.computeTime(e,i),a.triggerCallbacks("mouseenter",t,e),a.focus())}),r(h(a),"onMouseLeave",function(e){a.triggerCallbacks("mouseleave",null,e),a.unlock(),a._updateInnerFocus(null)}),r(h(a),"onVideoResize",function(){var e=a.pos,t=e.x,i=e.isDown;e.isEnter&&!i&&(e=a.computeTime(null,t),a.onMoveOnly(null,e))}),a.useable=!1,a.isProgressMoving=!1,a.__dragCallBacks=[],a._state={now:-1,direc:0,time:0,prePlayTime:-1},a._disableBlur=!1,a}function Qi(e){m(this,Qi),this.fragments=e.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=e.actionCallback,this.fragConfig={fragFocusClass:e.fragFocusClass||"inner-focus-point",fragAutoFocus:!!e.fragAutoFocus,fragClass:e.fragClass||""},this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}function en(){return m(this,en),Wi.apply(this,arguments)}function tn(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}t(sn,S),nn=i(sn),e(sn,[{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.onClick=function(e){e.preventDefault(),e.stopPropagation(),t.config.onClick(e)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:tn,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){v.addClass(this.root,"show")}},{key:"hide",value:function(){v.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:x.ROOT_TOP,index:0}}}]);var nn,on=sn;function sn(){return m(this,sn),nn.apply(this,arguments)}function rn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function an(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}t(yn,_),un=i(yn),e(yn,[{key:"afterCreate",value:function(){var i=this,e=(l(a(yn.prototype),"afterCreate",this).call(this),this.config),t=this.playerConfig;e.disable||(e.target&&(this.playerConfig.fullscreenTarget=this.config.target),e=v.getFullScreenEl(),t.fullscreenTarget===e&&this.player.getFullscreen().catch(function(e){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(e){var t=i.player.fullscreen;i.emitUserAction(e,"switch_fullscreen",{prop:"fullscreen",from:t,to:!t})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(b,function(e){var t=i.find(".xg-tips");t&&i.changeLangTextKey(t,e?i.i18nKeys.EXITFULLSCREEN_TIPS:i.i18nKeys.FULLSCREEN_TIPS),i.animate(e)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:on,options:{config:{onClick:function(e){i.handleFullscreen(e)}}}})),"mobile"===p.device&&window.addEventListener("orientationchange",this._onOrientationChange))}},{key:"registerIcons",value:function(){return{fullscreen:{icon:rn,class:"xg-get-fullscreen"},exitFullscreen:{icon:an,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){l(a(yn.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===p.device?"touchend":"click",this.handleFullscreen),"mobile"===p.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var e=this.player,t=this.config;!0===t.useCssFullscreen||"function"==typeof t.useCssFullscreen&&t.useCssFullscreen()?(e.fullscreen?e.exitCssFullscreen():e.getCssFullscreen(),this.animate(e.fullscreen)):t.rotateFullscreen?(e.fullscreen?e.exitRotateFullscreen():e.getRotateFullscreen(),this.animate(e.fullscreen)):t.switchCallback&&"function"==typeof t.switchCallback?t.switchCallback(e.fullscreen):e.fullscreen?e.exitFullscreen():e.getFullscreen().catch(function(e){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){l(a(yn.prototype),"show",this).call(this)}},{key:"hide",value:function(){l(a(yn.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(ii(this,"FULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]);var ln,cn,un,hn=yn,dn=(t(gn,S),cn=i(gn),e(gn,[{key:"duration",get:function(){var e=this.player,t=e.offsetDuration,e=e.duration;return this.playerConfig.customDuration||t||e}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,e=e.currentTime;return 0<=t?t:e}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([pe,y,s],function(){e.onTimeUpdate()}),this.on(ce,function(){e.onTimeUpdate(!0)}),this.on(ke,function(){e.onReset()}))}},{key:"show",value:function(){"flex"===this.mode?(this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block")):this.root.style.display="block"}},{key:"hide",value:function(){"flex"===this.mode?(this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none")):this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var t=this.player,i=this.config,n=this.duration;i.disable||this.isActiving||!t.hasStart||(i=this.currentTime+this.timeOffset,i=v.adjustTimeByDuration(i,n,e),"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(v.format(i)),n!==1/0&&0<n&&(this.centerDurDom.innerHTML=v.format(n))):(this.timeDom.innerHTML=this.minWidthTime(v.format(i)),n!==1/0&&0<n&&(this.durationDom.innerHTML=v.format(n))))}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(v.format(0)),this.centerDurDom.innerHTML=v.format(0)):(this.timeDom.innerHTML=this.minWidthTime(v.format(0)),this.durationDom.innerHTML=v.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;e.controls&&e.controls.center&&(e=e.controls.center,this.centerCurDom=v.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=v.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),0<e.children.length?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom))}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(v.hide(this.durationDom),v.hide(this.timeDom),v.hide(this.find(".time-separator")),v.show(this.find(".time-live-tag"))):v.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(v.hide(this.durationDom),v.hide(this.timeDom),v.hide(this.find(".time-separator")),v.show(this.find(".time-live-tag"))):(v.hide(this.find(".time-live-tag")),v.show(this.find(".time-separator")),v.show(this.durationDom),v.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=this.minWidthTime(v.format(e)):this.centerCurDom.innerHTML=this.minWidthTime(v.format(e)))}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(e){return'<span class="time-min-width">'.concat(e,"</span>")}).join(":")}},{key:"resetActive",value:function(){function e(){t.isActiving=!1}var t=this,i=this.player;this.off(y,e),i.isSeeking?this.once(y,e):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_LEFT,index:2,disable:!1}}}]),gn),fn=(t(pn,ct),ln=i(pn),e(pn,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(pe,this._onDurationChange),this.on(C,this._onLoadedData),this.on(s,this._onTimeupdate),this.on(de,this._onSeeking),this.on(o,this._onPlay)}},{key:"setConfig",value:function(t){var e,i=this;!t||(e=Object.keys(t)).length<1||(e.forEach(function(e){i.config[e]=t[e]}),this.updateSegments())}},{key:"updateSegments",value:function(){var e=this.config,t=e.disable,e=e.segments,i=this.player;t||!e||0===e.length?(i.timeSegments=[],i.offsetDuration=0,i.offsetCurrentTime=-1):(t=this.formatTimeSegments(e,i.duration),i.timeSegments=t,i.offsetDuration=0<t.length?t[t.length-1].duration:0)}},{key:"formatTimeSegments",value:function(e,o){var s=[];return e?(e.sort(function(e,t){return e.start-t.start}),e.forEach(function(e,t){var i,n={};n.start=e.start<0?0:e.start,n.end=0<o&&e.end>o?o:e.end,0<o&&o<n.start||(s.push(n),i=n.end-n.start,0===t?(n.offset=e.start,n.cTime=0,n.segDuration=i,n.duration=i):(n.offset=(e=s[t-1]).offset+(n.start-e.end),n.cTime=e.duration+e.cTime,n.segDuration=i,n.duration=e.duration+i))}),s):[]}},{key:"getSeekTime",value:function(e,t,i,n){var o=n[i],s=o.start,o=o.end;return!(s<=e&&e<=o)&&(o=e-t)<0&&e<s?0<=i-1?n[i-1].end+o+(s<t?t-s:0):0:-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,t){0<=(this.curIndex=e)&&0<t.length?this.curPos=t[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),pn);function pn(){var s;m(this,pn);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(s=ln.call.apply(ln,[this].concat(t))),"_onDurationChange",function(){s.updateSegments();var e,t=s.player,i=t.currentTime,t=t.timeSegments;s._checkIfEnabled(t)&&(e=v.getIndexByTime(i,t),i=v.getOffsetCurrentTime(i,t,e),s.player.offsetCurrentTime=i,s.changeIndex(e,t))}),r(h(s),"_onLoadedData",function(){var e,t=s.player.timeSegments;s._checkIfEnabled(t)&&(e=v.getOffsetCurrentTime(0,t),s.player.offsetCurrentTime=e,s.changeIndex(0,t),0<s.curPos.start)&&(s.player.currentTime=s.curPos.start)}),r(h(s),"_onTimeupdate",function(){var e,t,i,n=s.player,o=n.currentTime,n=n.timeSegments;s._checkIfEnabled(n)&&(e=n.length,s.lastCurrentTime=o,(t=v.getIndexByTime(o,n))!==s.curIndex&&s.changeIndex(t,n),n=v.getOffsetCurrentTime(o,n,t),s.player.offsetCurrentTime=n,s.curPos)&&(i=(n=s.curPos).start,n=n.end,o<i?s.player.currentTime=i:n<o&&e-1<=t&&s.player.pause())}),r(h(s),"_onSeeking",function(){var e,t=s.player,i=t.currentTime,t=t.timeSegments;s._checkIfEnabled(t)&&(i<t[0].start?s.player.currentTime=t[0].start:i>t[t.length-1].end?s.player.currentTime=t[t.length-1].end:0<=(e=v.getIndexByTime(i,t))&&0<=(i=s.getSeekTime(i,s.lastCurrentTime,e,t))&&(s.player.currentTime=i))}),r(h(s),"_onPlay",function(){var e=s.player,t=e.currentTime,e=e.timeSegments;s._checkIfEnabled(e)&&t>=e[e.length-1].end&&(s.player.currentTime=e[0].start)}),s}function gn(e){return m(this,gn),(e=cn.call(this,e)).isActiving=!1,e}function yn(){var t;m(this,yn);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return r(h(t=un.call.apply(un,[this].concat(i))),"_onOrientationChange",function(e){t.player.fullscreen&&t.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}function mn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function vn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function kn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}t(_n,S),Cn=i(_n),e(_n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:vn,class:"xg-volume-small"},volumeLarge:{icon:mn,class:"xg-volume"},volumeMuted:{icon:kn,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e,t,i=this;this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.config.disable||(this.initIcons(),e=(t=this.playerConfig).commonStyle,t=t.volume,e.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=e.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(e){i.changeMuted(e)},{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==p.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(ge,this.onVolumeChange),this.once(C,this.onVolumeChange),"Number"!==v.typeOf(t)&&(this.player.volume=this.config.default),this.onVolumeChange())}},{key:"updateVolumePos",value:function(e,t){var i=this.player,n=this.find(".xgplayer-drag"),o=this.find(".xgplayer-bar");o&&n&&(o=parseInt(e/o.getBoundingClientRect().height*1e3,10),n.style.height="".concat(e,"px"),n=Math.max(Math.min(o/1e3,1),0),e={volume:{from:i.volume,to:n}},i.muted&&(e.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:i.muted,volume:i.volume,props:e}),i.volume=Math.max(Math.min(o/1e3,1),0),i.muted&&(i.muted=!1),this.config.showValueLabel)&&this.updateVolumeValue()}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,e=e.muted,i=this.find(".xgplayer-value-label"),t=Math.max(Math.min(t,1),0);i.innerText=e?0:Math.ceil(100*t)}},{key:"focus",value:function(){this.player.focus({autoHide:!1}),this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),v.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length?arguments[2]:void 0,o=this._d,s=this.player;o.isActive||(this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=v.setTimeout(this,function(){o.isActive||(i?s.blur():s.focus(),v.removeClass(e.root,"slide-show"),o.isStart&&e.onBarMouseUp(n)),e._timerId=null},t))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this._d.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),0<t.volume&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(v.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===p.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){var e,t;if(!this.config.disable)return e=this.config.default||this.player.volume,t=this.config.showValueLabel,'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]);var Cn,bn=_n;function _n(){var o;m(this,_n);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(o=Cn.call.apply(Cn,[this].concat(t))),"onBarMousedown",function(e){var t=h(o).player,i=o.find(".xgplayer-bar"),i=(v.event(e),i.getBoundingClientRect()),t=v.getEventPos(e,t.zoom),n=i.height-(t.clientY-i.top);if(t.h=n,t.barH=i.height,o.pos=t,!(n<-2))return o.updateVolumePos(n,e),document.addEventListener("mouseup",o.onBarMouseUp),!(o._d.isStart=!0)}),r(h(o),"onBarMouseMove",function(e){var t,i,n=h(o)._d;n.isStart&&(t=(i=h(o)).pos,i=i.player,e.preventDefault(),e.stopPropagation(),v.event(e),i=v.getEventPos(e,i.zoom),n.isMoving=!0,(n=t.h-i.clientY+t.clientY)>t.barH||o.updateVolumePos(n,e))}),r(h(o),"onBarMouseUp",function(e){v.event(e),document.removeEventListener("mouseup",o.onBarMouseUp);e=h(o)._d;e.isStart=!1,e.isMoving=!1}),r(h(o),"onMouseenter",function(e){o._d.isActive=!0,o.focus(),o.emit("icon_mouseenter",{pluginName:o.pluginName})}),r(h(o),"onMouseleave",function(e){o._d.isActive=!1,o.unFocus(100,!1,e),o.emit("icon_mouseleave",{pluginName:o.pluginName})}),r(h(o),"onVolumeChange",function(e){var t,i;o.player&&(t=(i=o.player).muted,i=i.volume,o._d.isMoving||(o.find(".xgplayer-drag").style.height=t||0===i?"4px":"".concat(100*i,"%"),o.config.showValueLabel&&o.updateVolumeValue()),o.animate(t,i))}),o}function wn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}t(Sn,_),Tn=i(Sn),e(Sn,[{key:"afterCreate",value:function(){var e,t=this;this.config.disable||(l(a(Sn.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Re,function(){t.rotateDeg&&t.config.innerRotate&&v.setTimeout(t,function(){t.updateRotateDeg(t.rotateDeg,t.config.innerRotate)},100)}),e=this.player.root,this.rootWidth=e.style.width||e.offsetWidth||e.clientWidth,this.rootHeight=e.style.height||e.offsetHeight||e.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){l(a(Sn.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var i,n,o,s,r,a,l,c,u,h,d,f;e=e||0,t?this.player.videoRotateDeg=e:(i=this.player,r=this.rootWidth,a=this.rootHeight,n=i.root,s=i.innerContainer,o=i.media,u=n.offsetWidth,s=(s&&t?s:n).offsetHeight,r=r,a=a,c=l=0,.75!==e&&.25!==e||(r="".concat(s,"px"),a="".concat(u,"px"),l=-(s-u)/2,c=-(u-s)/2),u="translate(".concat(l,"px,").concat(c,"px) rotate(").concat(e,"turn)"),h={transformOrigin:"center center",transform:u,webKitTransform:u,height:a,width:r},d=t?o:n,f=t?i.getPlugin("poster"):null,Object.keys(h).map(function(e){d.style[e]=h[e],f&&f.root&&(f.root.style[e]=h[e])}))}},{key:"rotate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=this.player,e=(this.rotateDeg||(this.rotateDeg=0),e?1:-1);this.rotateDeg=(this.rotateDeg+1+.25*e*i)%1,this.updateRotateDeg(this.rotateDeg,t),n.emit("rotate",360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:wn}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(ii(this,"ROTATE_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]);var Tn,xn=Sn;function Sn(e){return m(this,Sn),(e=Tn.call(this,e)).rotateDeg=e.config.rotateDeg||0,e}function En(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Pn(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var Ln,In="picture-in-picture",An="fullscreen",On=(t(R,_),Ln=i(R),e(R,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(l(a(R.prototype),"afterCreate",this).call(this),this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(xe,function(){e.config.showIcon&&(v.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:En,class:"xg-get-pip"},pipIconExit:{icon:Pn,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var i=this,n=this.player;this.leavePIPCallback=function(){var e=n.paused;v.setTimeout(i,function(){e||n.mediaPlay()},0),e||n.mediaPlay(),i.setAttr("data-state","normal"),n.emit(Me,!1)},this.enterPIPCallback=function(e){n.emit(Me,!0),i.pipWindow=e.pictureInPictureWindow,i.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(e){var t=n.media.webkitPresentationMode;i.pMode===An&&t!==An&&n.onFullscreenChange(null,!1),(i.pMode=t)===In?i.enterPIPCallback(e):"inline"===t&&i.leavePIPCallback(e)},n.media&&(n.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),n.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),R.checkWebkitSetPresentationMode(n.media))&&n.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged)}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.media.poster="String"===v.typeOf(i)?i:i.poster),R.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(R.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===In}},{key:"isPIPAvailable",value:function(){var e=this.player.media;return("Boolean"!==v.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===v.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===v.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){l(a(R.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),R.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      '.concat(ii(this,"PIP",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),R);function R(){var t;m(this,R);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return r(h(t=Ln.call.apply(Ln,[this].concat(i))),"switchPIP",function(e){if(!t.isPIPAvailable())return!1;e.stopPropagation&&e.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):4===t.player.media.readyState&&(t.requestPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}function Dn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}t(jn,S),Rn=i(jn),e(jn,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Dn}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===p.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(ii(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),"\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]);var Rn,Mn=jn,Y={exports:{}};function jn(e){var i;return m(this,jn),r(h(i=Rn.call(this,e)),"playNext",function(e){var t=h(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),t.emit(Ne,i.idx+1)):(i.nextHandler(),t.emit(Ne))}),i.idx=-1,i}Y.exports=function t(e,i,n){function o(e){return String(e)}var s,r=window,a="application/octet-stream",l=n||a,c=e,e=!i&&!n&&c,u=document.createElement("a"),h=r.Blob||r.MozBlob||r.WebKitBlob||o,d=i||"download",h=h.call?h.bind(r):Blob;if("true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),e&&e.length<2048&&(d=e.split("/").pop().split("?")[0],u.href=e,-1!==u.href.indexOf(e)))return(s=new XMLHttpRequest).open("GET",e,!0),s.responseType="blob",s.onload=function(e){t(e.target.response,d,a)},setTimeout(function(){s.send()},0),s;if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(2096103.424<c.length&&h!==o))return navigator.msSaveBlob?navigator.msSaveBlob(y(c),d):m(c);l=(c=y(c)).type||a}else if(/([\x80-\xff])/.test(c)){for(var f=0,p=new Uint8Array(c.length),g=p.length;f<g;++f)p[f]=c.charCodeAt(f);c=new h([p],{type:l})}function y(e){for(var e=e.split(/[:;,]/),t=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),n=i.length,o=0,s=new Uint8Array(n);o<n;++o)s[o]=i.charCodeAt(o);return new h([s],{type:t})}function m(e,t){var i;return"download"in u?(u.href=e,u.setAttribute("download",d),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout(function(){r.URL.revokeObjectURL(u.href)},250)},66),!0):/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent)?(/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0):(i=document.createElement("iframe"),document.body.appendChild(i),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),i.src=e,void setTimeout(function(){document.body.removeChild(i)},333))}if(n=c instanceof h?c:new h([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(n,d);if(r.URL)m(r.URL.createObjectURL(n),!0);else{if("string"==typeof n||n.constructor===o)try{return m("data:"+l+";base64,"+r.btoa(n))}catch(e){return m("data:"+l+","+encodeURIComponent(n))}(i=new FileReader).onload=function(e){m(this.result)},i.readAsDataURL(n)}return!0};var Nn=Y.exports;function Fn(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}t(Xn,_),Bn=i(Xn),e(Xn,[{key:"afterCreate",value:function(){l(a(Xn.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:Fn}}},{key:"getAbsoluteURL",value:function(e){var t;return e.match(/^https?:\/\//)||((t=document.createElement("div")).innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href),e}},{key:"destroy",value:function(){l(a(Xn.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   '.concat(ii(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:3,disable:!0}}}]);var Hn,Bn,Un=Xn,Vn=(t(Yn,_),Hn=i(Yn),e(Yn,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){l(a(Yn.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(Re,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var i=document.createElement("a"),e=(i.href=e,i.download=t,document.createEvent("MouseEvents"));e.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}},{key:"createCanvas",value:function(e,t){var i=document.createElement("canvas"),n=i.getContext("2d");this.canvasCtx=n,(this.canvas=i).width=e||this.config.width,i.height=t||this.config.height,n.imageSmoothingEnabled=!0,n.imageSmoothingEnabled&&(n.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(e){t.emit(je,e),t.saveScreenShot(e,t.config.name+t.config.format)})}},{key:"shot",value:function(d,f){var p=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},g=this.config,y=this.player,m=e.quality||g.quality,v=e.type||g.type;return new Promise(function(e,t){var i,n,o,s,r,a,l,c,u,h=null;y.media.canvas?h=y.media.canvas:(p.canvas?(p.canvas.width=d||g.width,p.canvas.height=f||g.height):p.createCanvas(d,f),h=p.canvas,i=p.canvasCtx,a=y.media.videoWidth/y.media.videoHeight,l=h.width/h.height,c=y.media.videoWidth,u=y.media.videoHeight,l<a?(s=h.width,r=h.width/a,n=0,o=Math.round((h.height-r)/2)):a==l?(s=h.width,r=h.height,o=n=0):a<l&&(s=h.height*a,r=h.height,n=Math.round((h.width-s)/2),o=0),i.drawImage(y.media,0,0,c,u,n,o,s,r)),e(h.toDataURL(v,m).replace(v,"image/octet-stream").replace(/^data:image\/[^;]+/,"data:application/octet-stream"))})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){l(a(Yn.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Re,this.initSize)}},{key:"render",value:function(){var e,t;if(!this.config.disable)return e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT",'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>"),"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),Yn),Wn=(e(qn,[{key:"renderItemList",value:function(e){var n=this,t=this.config,i=this.root;e?t.data=e:e=t.data,t.style&&Object.keys(t.style).map(function(e){i.style[e]=t[e]}),0<e.length&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map(function(e,t){var i=e.selected?"option-item selected":"option-item";e["data-index"]=t,n.root.appendChild(v.createDom("li","<span>".concat(e.showText,"</span>"),e,i))})}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&v.hasClass(t,"selected"))return!1;var i="function"==typeof this.config.onItemClick?this.config.onItemClick:null,n=this.root.querySelector(".selected");v.addClass(t,"selected"),n&&v.removeClass(n,"selected"),i(e,{from:n?this.getAttrObj(n,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){var i;return t&&e?(i={},e.map(function(e){i[e]=t.getAttribute(e)}),(e=t.getAttribute("data-index"))&&(i.index=Number(e)),i):{}}},{key:"show",value:function(){v.removeClass(this.root,"hide"),v.addClass(this.root,"active")}},{key:"hide",value:function(){v.removeClass(this.root,"active"),v.addClass(this.root,"hide")}},{key:"setStyle",value:function(t){var i=this;Object.keys(t).forEach(function(e){i.root.style[e]=t[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(e){e.destroy&&e.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),qn),Gn="side",zn="middle",Kn="click";function qn(e){m(this,qn),this.config=e.config,this.parent=e.root,this.root=v.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),e.root.appendChild(this.root);e=this.config.maxHeight,e&&this.setStyle({maxHeight:e}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList(),e="mobile"===p.device?"touchend":"click";this._delegates=S.delegate.call(this,this.root,"li",e,this.onItemClick)}function Yn(){return m(this,Yn),Hn.apply(this,arguments)}function Xn(e){var i;return m(this,Xn),r(h(i=Bn.call(this,e)),"download",function(e){var t;i.isLock||(i.emitUserAction(e,"download"),e=i.playerConfig.url,t="","String"===v.typeOf(e)?t=e:"Array"===v.typeOf(e)&&0<e.length&&(t=e[0].src),e=i.getAbsoluteURL(t),Nn(e),i.isLock=!0,i.timer=window.setTimeout(function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null},300))}),i.timer=null,i.isLock=!1,i}var Zn,Jn,$n,Qn="mobile"===p.device,eo=(t(oo,S),$n=i(oo),e(oo,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),Qn&&t.listType!==zn&&(t.listType=Gn),t.hidePortrait&&v.addClass(this.root,"portrait"),this.on([Re,b],function(){e._resizeList()}),this.once(k,function(){t.list&&0<t.list.length&&(e.renderItemList(t.list),e.show())}),Qn&&this.on(Ce,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Qn?(t.toggleMode=Kn,this.activeEvent="touchend"):this.activeEvent=t.toggleMode===Kn?"click":"mouseenter",t.toggleMode===Kn?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var t=this,i=this.icons,e=Object.keys(i),n=!1;0<e.length&&(e.forEach(function(e){t.appendChild(".xgplayer-icon",i[e]),n=n||i[e]}),this.isIcons=n),n||(this.appendChild(".xgplayer-icon",v.createDom("span","",{},"icon-text")),v.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||v.addClass(this.root,"show")}},{key:"hide",value:function(){v.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,i){if(void 0===e)return"";var n=this.config.list;i=i||this.player.lang,t=!t||v.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=n[e]);try{return"object"===g(e[t])?e[t][i]||e[t].en:e[t]}catch(e){return console.warn(e),""}}},{key:"toggle",value:function(e){var t,i;e!==this.isActive&&(t=this.player.controls,i=this.config.listType,e?(i===Gn?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):(i===Gn?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e)}},{key:"onItemClick",value:function(e,t){e.stopPropagation();var e=this.config,i=e.listType,e=e.list;this.curIndex=t.to.index,this.curItem=e[this.curIndex],this.changeCurrentText(),(this.config.isItemClickHide||Qn||i===Gn)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){var e;this.isIcons||(e=(e=this.config.list)[this.curIndex<e.length?this.curIndex:0])&&(this.find(".icon-text").innerHTML=this.getTextByLang(e,"iconText"))}},{key:"renderItemList",value:function(e,t){var i=this,n=this.config,o=this.optionsList,s=this.player;"number"==typeof t&&(this.curIndex=t,this.curItem=n.list[t]),o?(o.renderItemList(e),this.changeCurrentText()):(e={config:{data:e||[],className:(t=n.listType,o=n.position,t===Gn?o===x.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""),onItemClick:function(e,t){i.onItemClick(e,t)}},root:n.listType===Gn?s.innerContainer||s.root:this.root},this.config.isShowIcon&&(t=this.player.root.getBoundingClientRect().height,(o=n.listType===zn?t-50:t)&&(e.config.maxHeight="".concat(o,"px")),this.optionsList=new Wn(e),this.changeCurrentText(),this.show()),this._resizeList())}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect().height,e=this.config.listType===zn?e-50:e;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(e,"px")})}},{key:"destroy",value:function(){this.config.toggleMode===Kn?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:"hover"}}}]),oo),to=(t(no,eo),Jn=i(no),e(no,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&0<t.length&&(e.config.list=t.map(function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e}))}},{key:"afterCreate",value:function(){var t=this;l(a(no.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(e){t.changeDefinitionList(e)}),this.on(Oe,function(e){t.renderItemList(t.config.list,e.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||v.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var t,e=this.config,i=e.list,n=e.defaultDefinition;0<i.length&&(t=null,i.map(function(e){e.definition===n&&(t=e)}),t=t||i[0],this.changeDefinition(t))}},{key:"renderItemList",value:function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.list||[],t=1<arguments.length?arguments[1]:void 0,o=t&&t.definition?t.definition:this.config.defaultDefinition,s=(t&&e.forEach(function(e){e.selected=!1}),0),t=e.map(function(e,t){var i=u(u({},e),{},{showText:n.getTextByLang(e)||e.definition,selected:!1});return(e.selected||e.definition&&e.definition==o)&&(i.selected=!0,s=t),i});l(a(no.prototype),"renderItemList",this).call(this,t,s)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var i=this.player.definitionList;l(a(no.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var n=0;n<i.length;n++)t.to&&i[n].definition===t.to.definition&&(t.to.url=i[n].url),t.from&&i[n].definition===t.from.definition&&(t.from.url=i[n].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return u(u({},eo.defaultConfig),{},{position:x.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),no),io=(t(M,eo),Zn=i(M),e(M,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,t=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(t)&&(e.config.list=t.map(function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e}))}},{key:"afterCreate",value:function(){var e=this;l(a(M.prototype),"afterCreate",this).call(this),this.on(ye,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&l(a(M.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){l(a(M.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,i=Number(i.getAttribute("rate"));if(!i||i===this.curValue)return!1;var n={playbackRate:{from:this.player.playbackRate,to:i}};this.emitUserAction(e,"change_rate",{props:n}),this.curValue=i,this.player.playbackRate=i}},{key:"renderItemList",value:function(){var n=this,o=this.player.playbackRate||1,s=(this.curValue=o,-1),e=this.config.list.map(function(e,t){var i={rate:e.rate};return i.rate===o&&(i.selected=!0,s=t),i.showText=n.getTextByLang(e),i});l(a(M.prototype),"renderItemList",this).call(this,e,s)}},{key:"changeCurrentText",value:function(){var e,t;this.isIcons||(t="",t=!(e=(e=this.config.list)[this.curIndex<e.length?this.curIndex:0])||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(e,"iconText"),this.find(".icon-text").innerHTML=t)}},{key:"destroy",value:function(){l(a(M.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return u(u({},eo.defaultConfig),{},{position:x.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),M);function M(e){return m(this,M),(e=Zn.call(this,e)).curRate=1,e}function no(e){return m(this,no),(e=Jn.call(this,e)).curTime=0,e.isPaused=!0,e}function oo(e){var t;return m(this,oo),r(h(t=$n.call(this,e)),"onEnter",function(e){e.stopPropagation(),t.emit("icon_mouseenter",{pluginName:t.pluginName}),t.switchActiveState(e)}),r(h(t),"switchActiveState",function(e){e.stopPropagation(),t.config.toggleMode===Kn?t.toggle(!t.isActive):t.toggle(!0)}),r(h(t),"onLeave",function(e){e.stopPropagation(),t.emit("icon_mouseleave",{pluginName:t.pluginName}),t.config.listType!==Gn&&t.isActive&&t.toggle(!1)}),r(h(t),"onListEnter",function(e){t.enterType=2}),r(h(t),"onListLeave",function(e){t.enterType=0,t.isActive&&t.toggle(!1)}),t.isIcons=!1,t.isActive=!1,t.curValue=null,t.curIndex=0,t}function so(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function ro(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}t(mo,_),co=i(mo),e(mo,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var t=this;l(a(mo.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Ie,function(e){t.animate(e)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys,i=this.find(".xg-tips");i&&this.changeLangTextKey(i,e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:so,class:"xg-get-cssfull"},exitCssFullscreen:{icon:ro,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){l(a(mo.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    </div>\n    ".concat(ii(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:x.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]);var ao,lo,co,uo=mo,ho=(t(yo,S),lo=i(yo),e(yo,[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(he,function(e){t.onError(e)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=this.player,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).errorType,i=e.errorNote?this.i18n[e.errorNote]:"";if(!i)switch(t){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),yo),fo=(t(go,S),ao=i(go),e(go,[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))}),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var i=this;Object.keys(t).map(function(e){i.root.style[e]=t[e]})}},{key:"show",value:function(e){var t,i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e&&(this.customOnClick=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},t=this.config.interval,this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),v.addClass(this.root,"show"),"arrow"===n.mode&&v.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style),("boolean"==typeof n.autoHide?n:this.config).autoHide)&&(e=n.interval||t,this.intervalId=setTimeout(function(){i.hide()},e))}},{key:"hide",value:function(){v.removeClass(this.root,"show"),v.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(L.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),go),po={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function go(){return m(this,go),ao.apply(this,arguments)}function yo(){return m(this,yo),lo.apply(this,arguments)}function mo(){return m(this,mo),co.apply(this,arguments)}function vo(t){Object.keys(po).map(function(e){void 0===t[e]&&(t[e]=po[e])})}var ko,Co,bo,_o={_updateDotDom:function(e,t){var i,n;t&&(i=this.calcuPosition(e.time,e.duration),(n=e.style||{}).left="".concat(i.left,"%"),n.width="".concat(i.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),i.isMini?v.addClass(t,"mini"):v.removeClass(t,"mini"),Object.keys(n).map(function(e){t.style[e]=n[e]}))},initDots:function(){var t=this;this._ispots.map(function(e){t.createDot(e,!1)}),this.ispotsInit=!0},createDot:function(e){var t,i,n,o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=this.player.plugins.progress;s&&(o&&(vo(e),this._ispots.push(e)),this.ispotsInit||!o)&&(o=this.calcuPosition(e.time,e.duration),(t=e.style||{}).left="".concat(o.left,"%"),t.width="".concat(o.width,"%"),i="xgspot_".concat(e.id," xgplayer-spot"),o.isMini&&(i+=" mini"),o=e.template?'<div class="xgplayer-spot-pop">'.concat(e.template,"</div>"):"",n=v.createDom("xg-spot",o,{"data-text":e.text,"data-time":e.time,"data-id":e.id},i),Object.keys(t).map(function(e){n.style[e]=t[e]}),s.outer&&s.outer.appendChild(n),this.positionDot(n,e.id))},findDot:function(i){var e;if(this.player.plugins.progress)return 0<(e=this._ispots.filter(function(e,t){return e.id===i})).length?e[0]:null},updateDot:function(t){var i,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;n&&((i=this.findDot(t.id))&&Object.keys(t).map(function(e){i[e]=t[e]}),this.ispotsInit)&&(n=n.find('xg-spot[data-id="'.concat(t.id,'"]')))&&(this._updateDotDom(t,n),e)&&this.showDot(t.id)},deleteDot:function(e){var t=this._ispots,i=this.player.plugins.progress;if(i){for(var n=[],o=0;o<t.length;o++)t[o].id===e&&n.push(o);for(var s,r=n.length-1;0<=r;r--)t.splice(n[r],1),this.ispotsInit&&(s=i.find('xg-spot[data-id="'.concat(e,'"]')))&&s.parentElement.removeChild(s)}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e){if(this.ispotsInit)for(var t=e.root.getElementsByTagName("xg-spot"),i=t.length-1;0<=i;i--)e.outer.removeChild(t[i]);this._ispots=[]}},updateAllDots:function(){var i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.player.plugins.progress;if(t)if(this.ispotsInit){this._ispots=[];var n=t.root.getElementsByTagName("xg-spot"),o=n.length;if(o>e.length)for(var s=o-1;s>e.length-1;s--)t.outer.removeChild(n[s]);e.forEach(function(e,t){t<o?(n[t].setAttribute("data-id","".concat(e.id)),i._ispots.push(e),i.updateDot(e)):i.createDot(e)})}else this._ispots=e},positionDots:function(){var i=this,e=this._ispots,t=this.playerSize,n=this.player.sizeInfo,o=this.player.plugins.progress;o&&n.width!==t.width&&(t.width=n.width,t.left=n.left,e.forEach(function(e){var t=o.find('xg-spot[data-id="'.concat(e.id,'"]'));t&&i.positionDot(t,e.id)}))},positionDot:function(e,t){var i,n,o,s,r=v.findDom(e,".xgplayer-spot-pop");r&&(o=this.playerSize,e=e.getBoundingClientRect(),i=r.getBoundingClientRect(),s=e.left-o.left,n=o.width-s-e.width/2,s<i.width/2||o.width<i.width?(o=i.width/2-s,r.style.left="".concat(o,"px")):n<i.width/2?(s=n-i.width/2+e.width/2,r.style.left="".concat(s,"px")):r.style.left="50%")},updateDuration:function(){var i=this,n=this.player.plugins.progress;n&&this._ispots.forEach(function(e){var t=n.find('xg-spot[data-id="'.concat(e.id,'"]'));i._updateDotDom(e,t)})},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}},wo={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},To=(t(Io,S),bo=i(Io),e(Io,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var t,e,i,n=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(e,t){t.seekTime&&n.player.seek(t.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(e){n.setTimeContent(e)}),e=(t=this).config,i=t.player,Object.keys(_o).map(function(e){t[e]=_o[e].bind(t)}),e=i.config.progressDot||e.ispots||[],t._ispots=e.map(function(e){return vo(e),e}),t.ispotsInit=!1,t.playerSize={left:i.sizeInfo.left,width:i.sizeInfo.width},t.on(pe,function(){t.ispotsInit?t.updateDuration():t.initDots()}),t.on(Re,function(){t.positionDots()}),this.on(pe,function(){n.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(t){var i=this;t&&Object.keys(t).map(function(e){i.config[e]=t[e]})}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t,i=this,n=this.player.plugins.progress;n&&(Object.keys(wo).map(function(e){i[wo[e]]=i[wo[e]].bind(i),n.addCallBack(e,i[wo[e]])}),"mobile"!==p.device)&&(this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup),t=this.hook("previewClick",function(){}),this.handlerPreviewClick=function(e){e.stopPropagation(),t(parseInt(1e3*i._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick))}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview)&&v.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview)&&v.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(t,i){this.config.disable||v.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(e){t[e]=i.target.getAttribute("data-".concat(e))}),t.time&&(t.time=Number(t.time)),this.handlerSpotClick(i,t))}},{key:"updateLinePos",value:function(e,t){var i,n=this.root,o=this.previewLine,s=this.player,r=this.config,s="flex"===s.controls.mode,a=n.getBoundingClientRect().width;!a&&this._hasThumnail||((r=e-(a=this._hasThumnail&&a<r.width?r.width:a)/2)<0&&!s?(r=0,i=e-a/2):t-a<r&&!s?(i=r-(t-a),r=t-a):i=0,void 0!==i&&(o.style.transform="translateX(".concat(i.toFixed(2),"px)")),n.style.transform="translateX(".concat(r.toFixed(2),"px) translateZ(0)"))}},{key:"updateTimeText",value:function(e){var t=this.timeText,i=this.timePoint;t.innerHTML=e,this.thumbnail||(i.innerHTML=e)}},{key:"updatePosition",value:function(e,t,i,n){var o=this.root,s=this.config,r=this._state;o&&(r.now=i,this.transformTimeHook(i),o=this.timeStr,n&&n.target&&v.hasClass(n.target,"xgplayer-spot")?(this.showTips(n.target.getAttribute("data-text"),!1,o),this.focusDot(n.target),r.f=!0,s.isFocusDots&&r.f&&(r.now=parseInt(n.target.getAttribute("data-time"),10))):s.defaultText?(r.f=!1,this.showTips(s.defaultText,!0,o)):(r.f=!1,this.hideTips("")),this.updateTimeText(o),this.updateThumbnails(r.now),this.updateLinePos(e,t))}},{key:"setTimeContent",value:function(e){this.timeStr="".concat(v.format(e))}},{key:"updateThumbnails",value:function(e){var t=this.player,i=this.videoPreview,n=this.config,t=t.plugins.thumbnail;t&&t.usable&&(this.thumbnail&&t.update(this.thumbnail,e,n.width,n.height),n=i&&i.getBoundingClientRect(),this.videothumbnail)&&t.update(this.videothumbnail,e,n.width,n.height)}},{key:"registerThumbnail",value:function(){var e,t,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"mobile"!==p.device&&(e=this.player,t=this.config,(i=e.getPlugin("thumbnail"))&&i.setConfig(n),i&&i.usable&&t.isShowThumbnail?(v.removeClass(this.root,"short-line no-thumbnail"),"short"===t.mode&&v.addClass(this.root,"short-line"),this._hasThumnail=!0,n=this.find(".xg-spot-thumbnail"),this.thumbnail=i.createThumbnail(n,"progress-thumbnail"),t.isShowCoverPreview&&(this.videoPreview=v.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)):v.addClass(this.root,"short-line no-thumbnail"))}},{key:"calcuPosition",value:function(e,t){var i=this.player.plugins.progress,n=this.player,i=i.root.getBoundingClientRect().width,i=n.duration/i*6;return e+t>n.duration&&(t=n.duration-e),n.duration,n.duration,{left:e/n.duration*100,width:t/n.duration*100,isMini:t<i}}},{key:"showDot",value:function(e){var t,i,e=this.findDot(e);e&&(t=this.root.getBoundingClientRect().width,i=e.time/this.player.duration*t,this.updatePosition(i,t,e.time))}},{key:"focusDot",value:function(e,t){e&&(t=t||e.getAttribute("data-id"),v.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){var t;e||(t=this._activeDotId,e=this.getDotDom(t)),e&&(v.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";v.addClass(this.root,"no-timepoint"),e&&(v.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(v.addClass(this.root,"product"),this.tipText.textContent=e):(v.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(i," ").concat(e)))}},{key:"hideTips",value:function(){v.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",v.removeClass(this.find(".xg-spot-content"),"show-text"),v.removeClass(this.root,"product")}},{key:"hide",value:function(){v.addClass(this.root,"hide")}},{key:"show",value:function(){v.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var t=this,i=this.player.plugins.progress;i&&Object.keys(wo).map(function(e){i.removeCallBack(e,t[wo[e]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===p.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info hide '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),Io),xo=(t(Lo,S),Co=i(Lo),e(Lo,[{key:"afterCreate",value:function(){var i=this;this.usable&&this.initThumbnail(),this.on([pe],function(){var e=i.config,t=e.pic_num,e=e.interval;i.usable&&(i.interval=0<e?e:Math.round(1e3*i.player.duration/t)/1e3)})}},{key:"setConfig",value:function(t){var e,i=this;!t||(e=Object.keys(t)).length<1||(e.forEach(function(e){i.config[e]=t[e]}),this.usable&&this.initThumbnail())}},{key:"usable",get:function(){var e=this.config,t=e.urls,e=e.pic_num;return t&&0<t.length&&0<e}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,i=e.height,n=e.pic_num,e=e.interval;this.ratio=t/i*100,this.interval=e||Math.round(this.player.duration/n),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return 0<=e&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t,i,n,o=this;this._preloadMark[e]||(t=this.config.urls,i=t.length,n=[],0<e&&n.push(e-1),n.push(e),0<e&&e<i-1&&n.push(e+1),n.map(function(e){!o._preloadMark[e]&&0<=e&&e<i&&(o._preloadMark[e]=1,v.preloadImg(t[e],function(){o._preloadMark[e]=2}))}))}},{key:"getPosition",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.config,o=n.pic_num,s=n.row,r=n.col,a=n.width,n=n.height,e=(this.interval=Math.round(this.player.duration/o),Math.ceil(e/this.interval)),o=(e=o<e?o:e)<s*r?0:Math.ceil(e/(s*r))-1,e=e-r*s*o,s=0<e?Math.ceil(e/r)-1:0,e=0<e?e-s*r-1:0,l=0,c=0,i=(t&&i?t/i<a/n?l=(c=i)*(a/n):c=(l=t)/(a/n):i?t||(l=(c=i||n)*(a/n)):c=(l=t||a)/(a/n),this.getUrlByIndex(o));return{urlIndex:o,rowIndex:s,colIndex:e,url:i,height:c,width:l,style:{backgroundImage:"url(".concat(i,")"),backgroundSize:"".concat(l*r,"px auto"),backgroundPosition:"-".concat(e*l,"px -").concat(s*c,"px"),width:"".concat(l,"px"),height:"".concat(c,"px")}}}},{key:"update",value:function(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"",r=this.config,a=r.pic_num,r=r.urls;a<=0||!r||0===r.length||(i=this.getPosition(e,n,o),this.preload(i.urlIndex),Object.keys(i.style).map(function(e){t.style[e]=i.style[e]}),Object.keys(s).map(function(e){t.style[e]=s[e]}))}},{key:"changeConfig",value:function(){this.setConfig(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"createThumbnail",value:function(e,t){t=v.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(t),t}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),Lo),So=(t(Po,S),ko=i(Po),e(Po,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=1<arguments.length?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played)&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%"))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),Po),Eo="firstframe";function Po(){return m(this,Po),ko.apply(this,arguments)}function Lo(e){return m(this,Lo),(e=Co.call(this,e)).ratio=1,e.interval=null,e._preloadMark={},e}function Io(e){var i;return m(this,Io),r(h(i=bo.call(this,e)),"onMousemove",function(e){i.config.disable||(v.hasClass(e.target,"xg-spot-content")&&i.config.isHideThumbnailHover?i.player.plugins.progress.onMouseLeave(e):(i._state.f||v.hasClass(e.target,"xg-spot-content"))&&(v.event(e),e.stopPropagation()))}),r(h(i),"onMousedown",function(e){i.config.disable||(i._state.f||v.hasClass(e.target,"xg-spot-content"))&&(v.event(e),e.stopPropagation())}),r(h(i),"onMouseup",function(e){var t;i.isDrag&&(t=i.player.plugins.progress)&&t.pos&&(t.onMouseUp(e),!t.pos.isEnter)&&t.onMouseLeave(e)}),r(h(i),"onDotMouseLeave",function(e){i.config.disable||(i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null,(e=i.player.plugins.progress)&&e.enableBlur(),i.show())}),r(h(i),"onProgressMouseOver",function(e,t){i.config.disable||!v.hasClass(t.target,"xgplayer-spot")||i._curDot||(i._curDot=t.target,i.focusDot(t.target),0<i._curDot.children.length&&i.hide(),(t=i.player.plugins.progress)&&t.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave))}),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i.timeStr="",i._state={now:0,f:!1},i}var Ao,Oo,Do,Ro=null,Mo=(t(Uo,S),Do=i(Uo),e(Uo,[{key:"afterCreate",value:function(){var e=this,t=(!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),Uo.isSupport||(this.config.disable=!0),this.config),i=t.disable,n=t.mode,t=t.frameRate;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/t,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(xe,function(){e.player&&(e.init(),e.player.paused||e.start())}),"poster"!==n&&(n!==Eo&&(this.on(ke,function(){e.stop()}),this.on(o,function(){e._checkIfCanStart()&&e.start()}),this.on(ue,function(){e.stop()})),this.on(C,this.onLoadedData),this.on(ve,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=Uo.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(t.index,'"><canvas>\n        </canvas><xgmask></xgmask></div>')),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(e){d.logError("plugin:DynamicBg",e)}}},{key:"checkVideoIsSupport",value:function(e){var t;return e&&((e=e&&e instanceof window.HTMLVideoElement?e:e.canvas||e.flyVideo||null)&&("safari"!==p.browser||!v.isMSE(e))||"canvas"===(t=e?e.tagName.toLowerCase():"")||"img"===t)?e:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;e&&(e="String"===v.typeOf(e)?e:"String"===v.typeOf(e.poster)?e.poster:null,this.updateImg(e))}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==Eo&&"poster"!==e}},{key:"renderOnce",value:function(){var e,t=this.player.media;t.videoWidth&&t.videoHeight&&(this.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10),e=this.checkVideoIsSupport(t))&&t.videoWidth&&this.update(e,this.videoPI)}},{key:"updateImg",value:function(e){var t,i,n,o,s=this;e&&(t=this.canvas.getBoundingClientRect(),i=t.width,n=t.height,(o=new window.Image).onload=function(){var e;!s.canvas||s.frameId||s.isStart||(s.canvas.height=n,s.canvas.width=i,e=parseInt(i/n*100,10),s.update(o,e),o=null)},o.src=e)}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var i,n,o,s=this._pos,r=this.config,a=this.canvas.getBoundingClientRect(),l=a.width,c=a.height;l===s.width&&c===s.height&&s.pi===t||(i=parseInt(l/c*100,10),s.pi=t,s.width=this.canvas.width=l,n=s.height=this.canvas.height=c,o=l,i<t?o=parseInt(c*t/100,10):t<i&&(n=parseInt(100*l/t,10)),s.rwidth=o*r.multiple,s.rheight=n*r.multiple,s.x=(l-s.rwidth)/2,s.y=(c-s.rheight)/2),this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(e,s.x,s.y,s.rwidth,s.rheight)}catch(e){d.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof Ro?Ro:Ro=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===p.browser||"firefox"===p.browser)}}]),Uo),jo=W,No=(t(Bo,ct),Oo=i(Bo),e(Bo,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(He,this._recordUserActions),this.on(jo.STATS_INFO,this._recordInfo),this.on(jo.STATS_DOWNLOAD,this._downloadStats),this.on(jo.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(u(u({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){e&&e.startMs?(e=u({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e),this._info(e)):console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(r(e={},"info",[]),r(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.media,t=[],i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});var n={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=n,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map(function(e){var t=e.payload.data,i="";try{t instanceof Error?i=t.msg:void 0!==t&&(i=JSON.stringify(t))}catch(e){console.log("err",e)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(i," ")})}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats.info.forEach(function(e){e.payload.profile&&t.traceEvents.push(e.payload)}),t}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),Bo),Fo=(t(Ho,S),Ao=i(Ho),e(Ho,[{key:"afterCreate",value:function(){var e=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(fe,this.onGapJump),this.on(o,function(){e.hasPlayed=!0}),this.on(de,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,t,i){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=this._getBuffered(e),o=null,s=0;s<n.length;s++)if(n[s].start>t&&(0===s||n[s-1].end-t<=i)){o=s;break}return o}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),Ho);function Ho(){var a;m(this,Ho);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(a=Ao.call.apply(Ao,[this].concat(t))),"onGapJump",function(){var e,t,i,n,o,s=h(a),r=s.player,s=s.config;if(r.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(r.media.seeking){if(!a.seekingEventReceived)return}else a.seekingEventReceived=!1;r.media.paused&&0!==r.media.currentTime&&a.hasPlayed||(i=r.media.buffered,o=s.smallGapLimit||.5,t=s.gapDetectionThreshold||.3,e=r.media.currentTime,null!==(t=a._getIndex(i,e,t))&&0!==t&&(console.log("GapJump  bufferRange ",i.start(t),i.end(t)),(i=i.start(t)+.1)>r.media.duration||(o=(n=i-e)<=o,n<Ho.BROWSER_GAP_TOLERANCE)||o&&(!1!==s.useGapJump&&(r.media.currentTime=a.isSafari?i+.1:i),a.player&&a.player.emit("detectGap"),console.log("gapJump gapIndex",t," isGapSamll:",o," currentTime:",r.media.currentTime," jumpSize:",e-r.media.currentTime),.08!==i)&&r&&r.emit("log",{type:"oneevent",end_type:"gap",vid:r.config.vid,ext:{video_postion:Math.floor(1e3*i)}})))}}),a}function Bo(){var i;m(this,Bo);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(h(i=Oo.call.apply(Oo,[this].concat(t))),"_recordUserActions",function(e){var t=i._getTime(),e=Object.assign({},e,{msg:e.msg||e.action});i._stats.info.push(u(u({type:"userAction"},t),{},{payload:e}))}),r(h(i),"_onReset",function(){i.reset()}),r(h(i),"_recordInfo",function(e){i.info(e)}),r(h(i),"_downloadStats",function(){var e=i.getStats(),e=new Blob([JSON.stringify(e)],{type:"application/json"}),e=window.URL.createObjectURL(e),t=document.createElement("a");t.style.display="none",t.href=e,t.download="player.txt",t.disabled=!1,t.click()}),i}function Uo(){var n;m(this,Uo);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(n=Do.call.apply(Do,[this].concat(t))),"onLoadedData",function(e){n.player&&(n._frameCount=n.config.startFrameCount,n.renderOnTimeupdate(e),n.off(s,n.renderOnTimeupdate),n.on(s,n.renderOnTimeupdate))}),r(h(n),"renderOnTimeupdate",function(e){0<n._frameCount?(n.renderOnce(),n._frameCount--):(n._isLoaded=!0,n.off(s,n.renderOnTimeupdate),!n.player.paused&&n._checkIfCanStart()&&n.start())}),r(h(n),"start",function(){var e=n.player.media,t=function(){try{return parseInt(window.performance.now(),10)}catch(e){return(new Date).getTime()}}(),i=n.checkVideoIsSupport(e);i&&n.canvasCtx&&(n.stop(),e.videoWidth&&e.videoHeight&&(n.videoPI=0<e.videoHeight?parseInt(e.videoWidth/e.videoHeight*100,10):0,"realtime"===n.config.mode||t-n.preTime>=n.interval)&&(e&&e.videoWidth&&n.update(i,n.videoPI),n.preTime=t),n.frameId=v.requestAnimationFrame(n.start))}),r(h(n),"stop",function(){n.frameId&&(v.cancelAnimationFrame(n.frameId),n.frameId=null)}),n}Fo.BROWSER_GAP_TOLERANCE=.001;t($o,S),Go=i($o),e($o,[{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.useWaitingTimeoutJump,t=t.jumpSize;!1!==i&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=t,this.on(fe,this.onWaiting),this.on([le,k],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(o,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]);var Vo,Wo,Go,zo=$o,Ko="cdn",qo=["cdn"],Yo=(t(Jo,S),Wo=i(Jo),e(Jo,[{key:"afterCreate",value:function(){var e=this.config,t=e.openSpeed,e=e.addSpeedTypeList;0<(null==e?void 0:e.length)&&qo.push.apply(qo,c(e)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,t&&this.on([C,Se],this.startTimer)}},{key:"getSpeedName",value:function(e,t){return e+"Speed"+t.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){!(this.config.openSpeed=e)&&this.timer?(clearTimeout(this.timer),this.timer=null):this.config.openSpeed&&!this.timer&&(this.timer=setTimeout(this.testSpeed,this.config.testTimeStep))}},{key:"destroy",value:function(){var t=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([C,Se],this.startTimer),qo.forEach(function(e){t.speedListCache&&t.speedListCache[e]&&(t.speedListCache[e]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),Jo),Xo=(t(Zo,S),Vo=i(Zo),e(Zo,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.config;this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],i.disabled||t.media.getVideoPlaybackQuality&&(this.on(o,function(){e._startTick()}),this.on(ue,function(){e._stopTick()}),this.on(ce,function(){e._stopTick()}),this.on(ke,function(){e._stopTick()}))}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,t,i,n){var o=this.player.media,s=document.hidden,r=o.paused;if("boolean"==typeof s&&!s&&!r){for(var a=o.currentTime,l=o.buffered,c=!1,u=[],h=0;h<l.length;h++){var d=l.start(h),f=l.end(h);if(u.push({start:d,end:f}),d<=a&&a<=f-1){c=!0;break}}4===o.readyState&&c&&(this._currentStuckCount>this.config.stuckCount?(this.emit(Ge,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:u,currentTime:o.currentTime,curDecodedFrames:e,totalVideoFrames:t,droppedVideoFrames:i,checkInterval:n})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e,t,i,n,o;this.player.media&&(e=(t=this.player.media.getVideoPlaybackQuality()).totalVideoFrames,t=t.droppedVideoFrames,i=performance.now(),e&&this._lastCheckPoint&&(n=e-this._lastDecodedFrames,o=i-this._lastCheckPoint,this._checkStuck(n,e,t,o)),this._lastDecodedFrames=e,this._lastCheckPoint=i)}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),Zo);function Zo(){return m(this,Zo),Vo.apply(this,arguments)}function Jo(){var u;m(this,Jo);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(h(u=Wo.call.apply(Wo,[this].concat(t))),"getSpeed",function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ko;return!u.speedListCache||!u.speedListCache[e]||u.speedListCache[e].length<=0?0:(t=0,u.speedListCache[e].map(function(e){t+=e}),Math.floor(t/u.speedListCache[e].length))}),r(h(u),"startTimer",function(){v.isMSE(u.player.video)||(u.initSpeedList(),u.cnt=0,u.timer=setTimeout(u.testSpeed,u.config.testTimeStep))}),r(h(u),"initSpeedList",function(){u.speedListCache={},qo.forEach(function(e){u.speedListCache[e]=[]})}),r(h(u),"_onRealSpeedChange",function(e){e.speed&&u.appendList(e.speed,e.type||Ko)}),r(h(u),"testSpeed",function(){if(clearTimeout(u.timer),u.timer=null,u.player&&u.config.openSpeed){var e=u.config,t=e.url,i=e.loadSize,n=e.testCnt,o=e.testTimeStep,e=t+(t.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(u.cnt>=n)){u.cnt++;try{var s,r=(new Date).getTime(),a=new XMLHttpRequest,l=((u.xhr=a).open("GET",e),{}),c=Math.floor(10*Math.random());l.Range="bytes="+c+"-"+(i+c),l&&Object.keys(l).forEach(function(e){a.setRequestHeader(e,l[e])}),a.onreadystatechange=function(){var e;4===a.readyState&&(u.xhr=null,s=(new Date).getTime(),e=a.getResponseHeader("Content-Length")/1024*8,e=Math.round(1e3*e/(s-r)),u.appendList(e),u.timer=setTimeout(u.testSpeed,o))},a.send()}catch(e){console.error(e)}}}}),r(h(u),"appendList",function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ko;u.speedListCache&&u.speedListCache[i]&&(t=u.config.saveSpeedMax,u.speedListCache[i].length>=t&&u.speedListCache[i].shift(),u.speedListCache[i].push(e),(t=h(u).player)&&(i===Ko?t.realTimeSpeed=e:t[u.getSpeedName("realTime",i)]=e),u.updateSpeed(i))}),r(h(u),"updateSpeed",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ko,t=u.getSpeed(e),i=h(u).player;i&&(e===Ko?i.avgSpeed&&t===i.avgSpeed||(i.avgSpeed=t,i.emit(Le,{speed:t,realTimeSpeed:i.realTimeSpeed})):i[e=u.getSpeedName("avg",e)]&&t===i[e]||(i[e]=t,i.emit(Le,{speed:t,realTimeSpeed:i.realTimeSpeed})))}),u}function $o(){var i;m(this,$o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(h(i=Go.call.apply(Go,[this].concat(t))),"onWaiting",function(){var e=h(i).config;i.jumpCnt>e.jumpCntMax||i.timer||!1===e.useWaitingTimeoutJump||(i.timer=setTimeout(i.onJump,1e3*e.waitingTime))}),r(h(i),"onJump",function(){var e=h(i),t=e.player,e=e.config;clearTimeout(i.timer),i.timer=null,i.jumpCnt>e.jumpCntMax||!1===e.useWaitingTimeoutJump||t.media.paused&&0!==t.media.currentTime&&i.hasPlayed||(i.jumpSize=e.jumpSize*(i.jumpCnt+1),i.jumpCnt===e.jumpSize&&i.jumpSize<6&&(i.jumpSize=6),(e=t.currentTime+i.jumpSize)>t.media.duration)||(console.log("waitintTimeout, currentTime:",t.currentTime,", jumpTo:",e),i.jumpCnt++,t.currentTime=e)}),i}At.use({LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:""},mse:{code:2,msg:""},parse:{code:3,msg:""},format:{code:4,msg:""},decoder:{code:5,msg:""},runtime:{code:6,msg:""},timeout:{code:7,msg:""},other:{code:8,msg:""}},HAVE_NOTHING:"/",HAVE_METADATA:"/",HAVE_CURRENT_DATA:"/",HAVE_FUTURE_DATA:"",HAVE_ENOUGH_DATA:"",NETWORK_EMPTY:"/",NETWORK_IDLE:"/",NETWORK_LOADING:"",NETWORK_NO_SOURCE:"/",MEDIA_ERR_ABORTED:"",MEDIA_ERR_NETWORK:"",MEDIA_ERR_DECODE:"",MEDIA_ERR_SRC_NOT_SUPPORTED:"/",REPLAY:"",ERROR:"",PLAY_TIPS:"",PAUSE_TIPS:"",PLAYNEXT_TIPS:"",DOWNLOAD_TIPS:"",ROTATE_TIPS:"",RELOAD_TIPS:"",FULLSCREEN_TIPS:"",EXITFULLSCREEN_TIPS:"",CSSFULLSCREEN_TIPS:"",EXITCSSFULLSCREEN_TIPS:"",TEXTTRACK:"",PIP:"",SCREENSHOT:"",LIVE:"",OFF:"",OPEN:"",MINI_DRAG:"",MINISCREEN:"",REFRESH_TIPS:"",REFRESH:"",FORWARD:"",LIVE_TIP:""}});var Qo,Y=e(function e(t,i){m(this,e);var n,o=i&&"mobile"===i.isMobileSimulateMode,i=i.isLive,i=[].concat(i?[]:[fn,Yi,So,To,dn],[Xi,hn,xn,Mn,to,io,Un,Vn,bn,On]),s=[Wt,Gt,$t,Gi,Qt,ho,fo,xo,yi],i=(this.plugins=[No,Ft].concat(c(i),s,[Fo,zo]),o?"mobile":p.device);switch(i){case"pc":(n=this.plugins).push.apply(n,[Ni,ki,uo,Yo,Xo]);break;case"mobile":(n=this.plugins).push.apply(n,[Di]);break;default:(n=this.plugins).push.apply(n,[Ni,ki,uo])}!p.os.isIpad&&"pc"!==i||this.plugins.push(Mo),p.os.isIpad&&this.plugins.push(ki),this.ignores=[],this.i18n=[]}),_=(t(es,Mt),Qo=i(es),e(es));function es(){return m(this,es),Qo.apply(this,arguments)}return r(_,"defaultPreset",Y),r(_,"Util",v),r(_,"Sniffer",p),r(_,"Errors",ae),r(_,"Events",ze),r(_,"Plugin",S),r(_,"BasePlugin",ct),r(_,"I18N",At),r(_,"STATE_CLASS",L),_});